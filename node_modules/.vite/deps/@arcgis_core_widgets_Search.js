import {
  t as t4
} from "./chunk-OSJOW7C6.js";
import {
  c
} from "./chunk-TUZ3FLXS.js";
import {
  a as a4,
  n as n6
} from "./chunk-TMLBWFXL.js";
import {
  e as e5
} from "./chunk-V7M26XZ7.js";
import {
  e as e6
} from "./chunk-EHYYP2L2.js";
import {
  t as t3
} from "./chunk-E447OCKN.js";
import {
  t as t2
} from "./chunk-LPU5TMA4.js";
import {
  O,
  e2 as e3
} from "./chunk-25QHXOZB.js";
import "./chunk-AA7FGPNP.js";
import {
  n as n3
} from "./chunk-UHJVTABQ.js";
import {
  A,
  k as k2,
  v as v2
} from "./chunk-W66LN57L.js";
import "./chunk-PNUWGOXY.js";
import {
  e as e4,
  n as n5,
  o as o3
} from "./chunk-6FKG7JUE.js";
import {
  s as s5
} from "./chunk-WBX2MY5R.js";
import {
  h as h2
} from "./chunk-3DZ4BNVJ.js";
import {
  o as o2
} from "./chunk-T7SYNS2R.js";
import {
  u
} from "./chunk-G4IZ2HTT.js";
import {
  a as a2,
  h,
  j as j3,
  l as l2
} from "./chunk-T7BEWVV3.js";
import {
  a as a3
} from "./chunk-KVF4M6PZ.js";
import {
  z
} from "./chunk-RN2KRYDN.js";
import {
  g
} from "./chunk-BLINZ65M.js";
import {
  m2 as m4
} from "./chunk-TADZYUVR.js";
import "./chunk-C5ULLWJ7.js";
import "./chunk-HFDYAQZS.js";
import "./chunk-HJHWUUQQ.js";
import "./chunk-TMBOFNWA.js";
import {
  n as n4
} from "./chunk-ZNEGSJWK.js";
import {
  B as B2
} from "./chunk-EI4MOLML.js";
import "./chunk-4SBWV5M2.js";
import "./chunk-CF56UYH2.js";
import {
  S,
  m as m3
} from "./chunk-5TRUGQDM.js";
import "./chunk-PZG7CR4Y.js";
import "./chunk-2HDG7SIE.js";
import "./chunk-56RHM4A6.js";
import "./chunk-ACJD5XFJ.js";
import "./chunk-OO2JXX7L.js";
import "./chunk-6DWU2ZQF.js";
import {
  B
} from "./chunk-Q3R7XFM5.js";
import "./chunk-JCPK2OXG.js";
import "./chunk-HVM5D6S5.js";
import "./chunk-JYHTO6QC.js";
import "./chunk-FTLBKDGL.js";
import "./chunk-5Z5455ZY.js";
import "./chunk-D7DLEBS2.js";
import {
  s as s6
} from "./chunk-H7JF6Q7A.js";
import {
  j as j2
} from "./chunk-TT2HIXWQ.js";
import {
  n as n2
} from "./chunk-OIPX3EDD.js";
import "./chunk-NWRK6QLX.js";
import "./chunk-HPH3FMVB.js";
import {
  L as L2
} from "./chunk-OOZMA7DN.js";
import {
  s as s4
} from "./chunk-Y7FSCP47.js";
import {
  U
} from "./chunk-65A2N4LL.js";
import "./chunk-GVELBHGI.js";
import "./chunk-5N3FSR63.js";
import "./chunk-C4LU7RDX.js";
import "./chunk-EPCCNF3D.js";
import {
  d as d2
} from "./chunk-4PRVTUEZ.js";
import {
  s
} from "./chunk-DMJWTK32.js";
import "./chunk-FVPTCNCX.js";
import "./chunk-BPZGJQOB.js";
import "./chunk-ZOKX6UGH.js";
import "./chunk-PKZEO23A.js";
import "./chunk-43S7PUMG.js";
import "./chunk-AIRC226G.js";
import "./chunk-BNPOKP6A.js";
import {
  m2
} from "./chunk-CHNDTVQJ.js";
import {
  v2 as v
} from "./chunk-VLCG72SW.js";
import {
  M
} from "./chunk-Q72YFZUL.js";
import {
  R,
  j2 as j
} from "./chunk-YPZEGNLG.js";
import {
  k2 as k
} from "./chunk-3NMRL5CR.js";
import "./chunk-SN4RUQ4N.js";
import "./chunk-XRL56EGK.js";
import "./chunk-ZIHDQYKE.js";
import "./chunk-GSRNZQFV.js";
import {
  l
} from "./chunk-ICD7AJSY.js";
import {
  d,
  n8 as n,
  y3 as y
} from "./chunk-2QOWZFCU.js";
import {
  e
} from "./chunk-IVBXK6OP.js";
import "./chunk-YAAIZ67O.js";
import "./chunk-5EQKHR4M.js";
import {
  E,
  L,
  i,
  r as r3
} from "./chunk-U3PSONS6.js";
import {
  s2 as s3
} from "./chunk-HFTNOKM2.js";
import {
  b
} from "./chunk-23NWA6WL.js";
import {
  r as r2,
  s as s2
} from "./chunk-CVWDM4C7.js";
import {
  m,
  o2 as o
} from "./chunk-G5JBUC5N.js";
import {
  a,
  e as e2,
  r,
  t
} from "./chunk-CBQWMOBK.js";
import "./chunk-AC2VUBZ6.js";

// node_modules/@arcgis/core/widgets/Search/SearchSource.js
var p = class extends s6(l) {
  constructor(t7) {
    super(t7), this.autoNavigate = null, this.filter = null, this.getResults = null, this.getSuggestions = null, this.maxResults = null, this.maxSuggestions = null, this.minSuggestCharacters = null, this.outFields = null, this.placeholder = "", this.popupEnabled = null, this.popupTemplate = null, this.prefix = "", this.resultGraphicEnabled = null, this.resultSymbol = null, this.suggestionsEnabled = null, this.suffix = "", this.withinViewEnabled = false, this.zoomScale = null;
  }
};
e([d()], p.prototype, "autoNavigate", void 0), e([d()], p.prototype, "filter", void 0), e([d()], p.prototype, "getResults", void 0), e([d()], p.prototype, "getSuggestions", void 0), e([d()], p.prototype, "maxResults", void 0), e([d()], p.prototype, "maxSuggestions", void 0), e([d()], p.prototype, "minSuggestCharacters", void 0), e([d()], p.prototype, "outFields", void 0), e([d()], p.prototype, "placeholder", void 0), e([d()], p.prototype, "popupEnabled", void 0), e([d()], p.prototype, "popupTemplate", void 0), e([d()], p.prototype, "prefix", void 0), e([d()], p.prototype, "resultGraphicEnabled", void 0), e([d()], p.prototype, "resultSymbol", void 0), e([d()], p.prototype, "suggestionsEnabled", void 0), e([d()], p.prototype, "suffix", void 0), e([d()], p.prototype, "withinViewEnabled", void 0), e([d()], p.prototype, "zoomScale", void 0), p = e([n("esri.widgets.Search.SearchSource")], p);
var i2 = p;

// node_modules/@arcgis/core/widgets/Search/support/geometryUtils.js
var o4 = s2.getLogger("esri.widgets.Search.support.geometryUtils");
function s7(r4, t7) {
  var _a, _b;
  if (!t7)
    return o4.error("missing-parameter: view is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "view is missing."));
  if (!r4)
    return o4.error("missing-parameter: point is missing."), Promise.reject(new s3("searchgeometryutils:missing-parameter", "point is missing."));
  if (r4.hasZ || "2d" === t7.type)
    return Promise.resolve(r4);
  const n14 = (_a = t7 == null ? void 0 : t7.map) == null ? void 0 : _a.ground;
  return n14 && n14.layers.length ? n14.queryElevation(r4, { cache: (_b = t7.basemapTerrain) == null ? void 0 : _b.elevationQueryCache }).then((e9) => e9.geometry) : Promise.resolve(r4);
}
function m5(e9) {
  if (t(e9))
    return null;
  switch (e9.type) {
    case "point":
      return e9;
    case "extent":
      return e9.center;
    case "polygon":
      return e9.centroid;
    case "multipoint":
      return e9.getPoint(0);
    case "polyline":
      return e9.getPoint(0, 0);
  }
  return null;
}
function a5(e9, r4, n14) {
  return t(e9) ? null : "extent" === e9.type ? e9 : "multipoint" === e9.type || "polygon" === e9.type || "polyline" === e9.type ? e9.extent : "point" === e9.type ? c2(e9, r4, n14) : void 0;
}
function p2(e9, r4, n14) {
  return t(e9) || t(r4) ? null : c2(e9.center, r4, n14);
}
function c2(e9, r4, t7) {
  const o7 = e9.hasZ ? e9.z : void 0;
  if (r4 && r4.map) {
    return (t7 ? c(r4, t7) : r4.extent).clone().centerAt(e9).set({ zmax: o7, zmin: o7 });
  }
  return new M({ xmin: e9.x - 0.25, ymin: e9.y - 0.25, xmax: e9.x + 0.25, ymax: e9.y + 0.25, spatialReference: e9.spatialReference, zmin: o7, zmax: o7 });
}

// node_modules/@arcgis/core/widgets/Search/support/layerSearchUtils.js
var c3 = /https?:\/\/services.*\.arcgis\.com/i;
var d3 = /(?:\{([^}]+)\})/g;
var f = s2.getLogger("esri.widgets.Search.support.layerSearchUtils");
function m6(t7, r4) {
  const { exactMatch: i7 = false, location: o7, maxResults: s9, spatialReference: l7, source: u4, sourceIndex: a8, suggestResult: c10, view: d9 } = t7, { layer: m8, filter: g5, zoomScale: v6 } = u4, b5 = d9 && d9.scale, j7 = p3(u4, d9), T2 = r4 && r4.signal;
  return h3(m8).then(() => {
    const e9 = m8.popupTemplate;
    return e9 ? e9.getRequiredFields(m8.fieldsIndex) : null;
  }).then((t8) => {
    var _a, _b, _c;
    const { objectIdField: r5, returnZ: p10 } = m8, h6 = x(u4);
    if (!$(m8, h6))
      throw f.error("invalid-field: displayField is invalid."), new s3("getResults():invalid-field", "displayField is invalid.");
    const R3 = t8 && t8.length ? t8 : [h6], S5 = u4.outFields || R3, D2 = y2(S5);
    S5.includes(r5) || D2 || S5.push(r5), ((_a = m8.floorInfo) == null ? void 0 : _a.floorField) && S5.push(m8.floorInfo.floorField);
    if (!(D2 || w(m8, S5)))
      throw f.error("invalid-field: outField is invalid."), new s3("getResults():invalid-field", "outField is invalid.");
    const E3 = m8.createQuery(), { orderByFields: M3 } = u4;
    if (M3 && (E3.orderByFields = M3), l7) {
      E3.outSpatialReference = l7;
      const e9 = 1 / z(l7);
      e9 && (E3.maxAllowableOffset = e9);
    }
    const C2 = "mesh" === m8.geometryType || "multipatch" === m8.geometryType, N2 = ((_c = (_b = m8.capabilities) == null ? void 0 : _b.data) == null ? void 0 : _c.supportsZ) && !C2;
    if (E3.returnZ = N2 && false !== p10, E3.returnGeometry = true, E3.multipatchOption = C2 ? "xyFootprint" : null, S5 && (E3.outFields = S5), o7)
      E3.geometry = o7;
    else if (c10.key)
      E3.objectIds = [c10.key];
    else {
      const t9 = u4.searchFields || [h6];
      if (!w(m8, t9))
        throw f.error("invalid-field: search field is invalid."), new s3("getResults():invalid-field", "search field is invalid.");
      F(m8) && (E3.num = s9), j7 && (E3.geometry = j7);
      if (!c10.text.trim())
        return [];
      const { prefix: r6 = "", suffix: n14 = "" } = u4, o8 = L3({ searchTerm: I(`${r6}${c10.text}${n14}`), layer: m8, searchFields: t9, filter: g5, exactMatch: i7, type: "search" });
      if (!o8)
        return [];
      E3.where = o8;
    }
    return m8.queryFeatures(E3, { signal: T2 }).then((e9) => U2(e9, d9, u4, a8, h6, b5, v6));
  });
}
function g2(t7, r4) {
  const { source: i7, spatialReference: n14, view: o7, suggestTerm: s9, maxSuggestions: l7, sourceIndex: u4, exactMatch: a8 } = t7, { layer: c10, filter: m8 } = i7, g5 = r4 && r4.signal, v6 = p3(i7, o7);
  return h3(c10).then(() => {
    if (!F(c10))
      return [];
    const t8 = x(i7), r5 = i7.searchFields || [t8], o8 = [];
    i7.suggestionTemplate ? i7.suggestionTemplate.replace(d3, (e9, t9) => (o8.push(t9), e9)) : o8.push(t8);
    const p10 = y2(o8);
    o8.includes(c10.objectIdField) || p10 || o8.push(c10.objectIdField);
    const h6 = $(c10, t8), b5 = p10 || w(c10, o8), j7 = w(c10, r5);
    if (!h6)
      throw f.error("invalid-field: displayField is invalid."), new s3("getSuggestions():invalid-field", "displayField is invalid.");
    if (!b5)
      throw f.error("invalid-field: outField is invalid."), new s3("getSuggestions():invalid-field", "outField is invalid.");
    if (!j7)
      throw f.error("invalid-field: search field is invalid."), new s3("getSuggestions():invalid-field", "search field is invalid.");
    const T2 = c10.createQuery(), { orderByFields: R3 } = i7;
    R3 && (T2.orderByFields = R3), T2.outSpatialReference = n14, T2.returnGeometry = false, T2.num = l7, T2.outFields = o8, v6 && (T2.geometry = v6);
    if (!s9.trim())
      return [];
    const { prefix: S5 = "", suffix: D2 = "" } = i7, E3 = L3({ searchTerm: I(`${S5}${s9}${D2}`), layer: c10, searchFields: r5, filter: m8, exactMatch: a8, type: "suggest" });
    return E3 ? (T2.where = E3, c10.queryFeatures(T2, { signal: g5 }).then((e9) => N(e9, i7, u4, t8))) : [];
  });
}
function p3(e9, t7) {
  const { filter: r4, withinViewEnabled: i7 } = e9, n14 = t7 && t7.extent;
  return r4 && r4.geometry || (i7 && n14 ? n14 : void 0);
}
function y2(e9) {
  return e9 && e9.includes("*");
}
async function h3(e9) {
  e9 && await e9.load();
}
function F(e9) {
  var _a, _b;
  return ((_b = (_a = e9 == null ? void 0 : e9.capabilities) == null ? void 0 : _a.query) == null ? void 0 : _b.supportsPagination) ?? false;
}
function v3(e9) {
  var _a, _b, _c;
  return ((_c = (_b = (_a = e9 == null ? void 0 : e9.fieldsIndex) == null ? void 0 : _a.fields) == null ? void 0 : _b.find((e10) => "string" === e10.type)) == null ? void 0 : _c.name) ?? "";
}
function x(e9) {
  return e9.displayField || e9.layer.displayField || v3(e9.layer);
}
function w(e9, t7) {
  return !(!e9 || !t7) && t7.every((t8) => $(e9, t8));
}
function $(e9, t7) {
  return !!e9.getField(t7);
}
function b2(e9) {
  for (let t7 = 0; t7 < e9.length; t7++)
    if (e9.charCodeAt(t7) > 255)
      return true;
  return false;
}
function j4(e9, t7, r4) {
  let i7 = null;
  const { codedValues: n14 } = e9;
  return n14 && n14.some((e10) => {
    const n15 = e10.name, o7 = r4 ? n15 : n15.toLowerCase();
    return (r4 ? t7 : t7.toLowerCase()) === o7 && (i7 = e10.code.toString(), true);
  }), i7;
}
function I(e9) {
  return e9.replace(/\'/g, "''");
}
function T(e9, t7) {
  const r4 = t7 && t7.where;
  return r4 ? `(${e9}) AND (${r4})` : e9;
}
function R2({ currentTerm: e9, field: t7, filter: r4, exactMatch: i7, url: n14, type: o7 }) {
  const s9 = t7.type, l7 = t7.name;
  if ("string" === s9 || "date" === s9 || "global-id" === s9) {
    const t8 = c3.test(n14), s10 = t8 && b2(e9) ? "N" : "";
    if (i7 && "search" === o7)
      return T(`${l7} = ${s10}'${e9}'`, r4);
    const u4 = t8 ? l7 : `UPPER(${l7})`, a8 = t8 ? e9 : e9.toUpperCase();
    return T(`${u4} LIKE ${s10}${i7 ? `'${a8}%'` : `'%${a8}%'`}`, r4);
  }
  if ("oid" === s9 || "small-integer" === s9 || "integer" === s9 || "single" === s9 || "double" === s9) {
    const t8 = Number(e9);
    return isNaN(t8) ? null : T(`${l7} = ${t8}`, r4);
  }
  return T(`${l7} = ${e9}`, r4);
}
function S2(e9, t7) {
  return e9 ? ` OR (${t7})` : `(${t7})`;
}
function L3({ searchTerm: e9, layer: t7, searchFields: r4, filter: i7, exactMatch: n14, type: o7 }) {
  const { definitionExpression: s9, url: l7 } = t7;
  let u4 = "";
  return e9 && r4 && r4.forEach((r5) => {
    const s10 = t7.getField(r5), a8 = "function" == typeof t7.getFieldDomain && t7.getFieldDomain(r5), c10 = (a8 && "coded-value" === a8.type ? j4(a8, e9, n14) : null) || e9 || null;
    if (null !== c10) {
      const e10 = R2({ currentTerm: c10, field: s10, filter: i7, exactMatch: n14, url: l7, type: o7 });
      e10 && (u4 += S2(u4, e10));
    }
  }), s9 ? `(${s9}) AND (${u4})` : u4;
}
function D(e9, t7) {
  let r4 = null;
  const { codedValues: i7 } = e9;
  return i7 && i7.length && i7.some((e10) => e10.code === t7 && (r4 = e10.name, true)), r4;
}
function E2(e9, t7) {
  return e9[Object.keys(e9).find((e10) => e10.toLowerCase() === t7.toLowerCase())];
}
function M2(e9, t7, r4) {
  const i7 = e9.sourceLayer, { attributes: n14 } = e9, o7 = "function" == typeof i7.getFieldDomain && i7.getFieldDomain(r4);
  if (t7)
    return s5(t7, n14);
  if (r4 && n14) {
    const e10 = i7.getField(r4), t8 = E2(n14, r4);
    return null == t8 ? "" : o7 && "coded-value" === o7.type ? D(o7, t8) : "date" === (e10 == null ? void 0 : e10.type) ? L2(new Date(t8)) : "number" == typeof t8 ? t8.toString() : "string" != typeof t8 ? "" : t8.trim();
  }
  return "";
}
function C(e9, t7, r4, i7) {
  const n14 = e9.sourceLayer, { attributes: o7 } = e9, { objectIdField: s9 } = n14, l7 = o7[s9];
  return { text: M2(e9, t7.suggestionTemplate, i7), key: l7, sourceIndex: r4 };
}
function N(e9, t7, r4, i7) {
  return e9.features.map((e10) => C(e10, t7, r4, i7));
}
function k3(e9, r4, n14, u4, a8, c10, d9) {
  const f5 = e9.clone(), m8 = e9.sourceLayer, g5 = m8 && m8.objectIdField, p10 = g5 && e9.attributes[g5], y6 = M2(e9, n14.searchTemplate, a8), h6 = a5(f5.geometry, r4, c10), F2 = "number" == typeof d9 ? p2(m(h6), r4, d9) : h6, v6 = e9.clone();
  return r(F2) && (v6.geometry = v.fromExtent(F2)), { extent: F2, target: v6, feature: f5, key: p10, name: y6, sourceIndex: u4 };
}
function U2(e9, t7, r4, i7, n14, o7, s9) {
  return e9.features.map((e10) => k3(e10, t7, r4, i7, n14, o7, s9));
}

// node_modules/@arcgis/core/widgets/Search/LayerSearchSource.js
var o5;
var h4 = o5 = class extends i2 {
  constructor(e9) {
    super(e9), this.displayField = null, this.exactMatch = null, this.orderByFields = null, this.searchFields = null, this.searchTemplate = null, this.suggestionTemplate = null, this.getResults = (e10, t7) => m6({ source: this, ...e10 }, t7), this.getSuggestions = (e10, t7) => g2({ source: this, ...e10 }, t7);
  }
  set layer(e9) {
    this._set("layer", e9), e9 && e9.load().catch(() => {
    });
  }
  get name() {
    return this._getLayerTitle() || "";
  }
  set name(e9) {
    void 0 !== e9 ? this._override("name", e9) : this._clearOverride("name");
  }
  clone() {
    return new o5({ autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? m(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, displayField: this.displayField, exactMatch: this.exactMatch, layer: this.layer, searchFields: this.searchFields ? m(this.searchFields) : null, suggestionTemplate: this.suggestionTemplate, zoomScale: this.zoomScale });
  }
  _getFirstStringField() {
    var _a;
    return ((_a = this.layer.fieldsIndex.fields.find((e9) => "string" === e9.type)) == null ? void 0 : _a.name) ?? "";
  }
  _getDisplayField() {
    return this.displayField || this.layer.displayField || this._getFirstStringField();
  }
  _getSearchFieldsString() {
    const { layer: e9, searchFields: t7 } = this;
    if (!e9.loaded)
      return "";
    return `: ${(t7 || [this._getDisplayField()]).map((t8) => {
      const s9 = e9.getField(t8);
      return s9 && s9.alias || t8;
    }).join(", ")}`;
  }
  _getLayerTitle() {
    const { layer: e9 } = this;
    if (!e9)
      return;
    const { title: t7 } = e9;
    return t7 ? `${t7}${this._getSearchFieldsString()}` : void 0;
  }
};
e([d({ json: { read: { source: "field.name" }, write: { target: "field.name" } } })], h4.prototype, "displayField", void 0), e([d({ json: { read: { source: "field.exactMatch" }, write: { target: "field.exactMatch" } } })], h4.prototype, "exactMatch", void 0), e([d({ value: null })], h4.prototype, "layer", null), e([d()], h4.prototype, "name", null), e([d({ type: [String], json: { write: true } })], h4.prototype, "orderByFields", void 0), e([d()], h4.prototype, "searchFields", void 0), e([d()], h4.prototype, "searchTemplate", void 0), e([d()], h4.prototype, "suggestionTemplate", void 0), h4 = o5 = e([n("esri.widgets.Search.LayerSearchSource")], h4);
var n7 = h4;

// node_modules/@arcgis/core/rest/locator/utils.js
function n8(n14) {
  return n14 && "number" == typeof n14.x && "number" == typeof n14.y;
}
function e7(n14) {
  return n14 && "number" == typeof n14.xmin && "number" == typeof n14.ymin && "number" == typeof n14.xmax && "number" == typeof n14.ymax;
}

// node_modules/@arcgis/core/rest/support/AddressCandidate.js
var i3 = class extends l {
  constructor(t7) {
    super(t7), this.address = null, this.attributes = null, this.extent = null, this.location = null, this.score = null;
  }
};
e([d({ type: String, json: { write: true } })], i3.prototype, "address", void 0), e([d({ type: Object, json: { write: true } })], i3.prototype, "attributes", void 0), e([d({ type: M, json: { write: true } })], i3.prototype, "extent", void 0), e([d({ type: j, json: { write: true } })], i3.prototype, "location", void 0), e([d({ type: Number, json: { write: true } })], i3.prototype, "score", void 0), i3 = e([n("esri.rest.support.AddressCandidate")], i3);
var c4 = i3;

// node_modules/@arcgis/core/rest/support/AddressToLocationsParameters.js
var l3 = class extends l {
  constructor(t7) {
    super(t7), this.address = null, this.apiKey = null, this.categories = null, this.countryCode = null, this.forStorage = null, this.location = null, this.locationType = null, this.magicKey = null, this.maxLocations = null, this.outFields = null, this.outSpatialReference = null, this.searchExtent = null;
  }
};
e([d({ type: Object, json: { write: true } })], l3.prototype, "address", void 0), e([d(t4)], l3.prototype, "apiKey", void 0), e([d({ type: [String], json: { read: { source: "category", reader: (t7) => t7 ? t7.split(",") : null }, write: { target: "category", writer: (t7, o7) => {
  o7.category = t7 ? t7.join(",") : null;
} } } })], l3.prototype, "categories", void 0), e([d({ type: String, json: { write: true } })], l3.prototype, "countryCode", void 0), e([d({ type: Boolean, json: { write: true } })], l3.prototype, "forStorage", void 0), e([d({ type: j, json: { write: { writer: (t7, o7) => {
  o7.location = t7 ? t7.clone().normalize() : null;
} } } })], l3.prototype, "location", void 0), e([d({ type: String, json: { write: true } })], l3.prototype, "locationType", void 0), e([d({ type: String, json: { write: true } })], l3.prototype, "magicKey", void 0), e([d({ type: Number, json: { write: true } })], l3.prototype, "maxLocations", void 0), e([d({ type: [String], json: { write: { writer: (t7, o7) => {
  o7.outFields = t7 ? t7.join(",") : null;
} } } })], l3.prototype, "outFields", void 0), e([d({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], l3.prototype, "outSpatialReference", void 0), e([d({ type: M, json: { write: { writer: (t7, o7) => {
  const e9 = t7 ? t7.shiftCentralMeridian() : null;
  o7.searchExtent = e9;
} } } })], l3.prototype, "searchExtent", void 0), l3 = e([n("esri.rest.support.AddressToLocationsParameters")], l3), l3.from = b(l3);
var c5 = l3;

// node_modules/@arcgis/core/rest/locator/addressToLocations.js
async function d4(o7, n14, a8) {
  n14 = c5.from(n14);
  const d9 = n5(o7), { address: p10, ...m8 } = n14.toJSON(), u4 = { ...p10, ...m8, f: "json" }, c10 = o3({ ...d9.query, ...u4 }), j7 = e4(c10, a8), l7 = `${d9.path}/findAddressCandidates`;
  return U(l7, j7).then(f2);
}
function f2({ data: r4 }) {
  if (!r4)
    return [];
  const { candidates: t7, spatialReference: e9 } = r4;
  return t7 ? t7.map((r5) => {
    if (!r5)
      return;
    const { extent: t8, location: s9 } = r5, i7 = !t8 || e7(t8);
    return n8(s9) && i7 ? (t8 && (t8.spatialReference = e9), s9.spatialReference = e9, c4.fromJSON(r5)) : void 0;
  }) : [];
}

// node_modules/@arcgis/core/rest/support/LocationToAddressParameters.js
var a6 = class extends l {
  constructor(o7) {
    super(o7), this.apiKey = null, this.location = null, this.locationType = null, this.outSpatialReference = null;
  }
};
e([d(t4)], a6.prototype, "apiKey", void 0), e([d({ type: j, json: { write: { writer: (o7, r4) => {
  const t7 = o7 ? o7.clone().normalize() : null, e9 = void 0 !== t7;
  r4.location = e9 ? t7 : null;
} } } })], a6.prototype, "location", void 0), e([d({ type: String, json: { write: true } })], a6.prototype, "locationType", void 0), e([d({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], a6.prototype, "outSpatialReference", void 0), a6 = e([n("esri.rest.support.LocationToAddressParameters")], a6), a6.from = b(a6);
var n9 = a6;

// node_modules/@arcgis/core/rest/locator/locationToAddress.js
async function n10(e9, n14, i7) {
  n14 = n9.from(n14);
  const c10 = n5(e9), m8 = { ...n14.toJSON(), f: "json" }, u4 = o3({ ...c10.query, ...m8 }), f5 = e4(u4, i7), p10 = `${c10.path}/reverseGeocode`;
  return U(p10, f5).then(d5);
}
function d5({ data: r4 }) {
  if (!r4)
    return;
  const { address: o7, location: t7 } = r4, s9 = o7 && o7.Match_addr || "";
  return c4.fromJSON({ address: s9, attributes: o7 || {}, location: t7, score: 100 });
}

// node_modules/@arcgis/core/rest/support/SuggestionCandidate.js
var e8 = class extends l {
  constructor(o7) {
    super(o7), this.isCollection = null, this.magicKey = null, this.text = null;
  }
};
e([d({ type: Boolean, json: { write: true } })], e8.prototype, "isCollection", void 0), e([d({ type: String, json: { write: true } })], e8.prototype, "magicKey", void 0), e([d({ type: String, json: { write: true } })], e8.prototype, "text", void 0), e8 = e([n("esri.rest.support.SuggestionCandidate")], e8);
var p4 = e8;

// node_modules/@arcgis/core/rest/support/SuggestLocationsParameters.js
var c6 = class extends l {
  constructor(t7) {
    super(t7), this.apiKey = null, this.categories = null, this.countryCode = null, this.location = null, this.maxSuggestions = null, this.outSpatialReference = null, this.searchExtent = null, this.text = null;
  }
};
e([d(t4)], c6.prototype, "apiKey", void 0), e([d({ type: [String], json: { read: { source: "category", reader: (t7) => t7 ? t7.split(",") : null }, write: { target: "category", writer: (t7, o7) => {
  o7.category = t7 ? t7.join(",") : null;
} } } })], c6.prototype, "categories", void 0), e([d({ type: String, json: { write: true } })], c6.prototype, "countryCode", void 0), e([d({ type: j, json: { write: { writer: (t7, o7) => {
  o7.location = t7 ? t7.clone().normalize() : null;
} } } })], c6.prototype, "location", void 0), e([d({ type: Number, json: { write: true } })], c6.prototype, "maxSuggestions", void 0), e([d({ type: k, json: { read: { source: "outSR" }, write: { target: "outSR" } } })], c6.prototype, "outSpatialReference", void 0), e([d({ type: M, json: { write: { writer: (t7, o7) => {
  const e9 = t7 ? t7.shiftCentralMeridian() : null;
  o7.searchExtent = JSON.stringify(e9);
} } } })], c6.prototype, "searchExtent", void 0), e([d({ type: String, json: { write: true } })], c6.prototype, "text", void 0), c6 = e([n("esri.rest.support.SuggestLocationsParameters")], c6), c6.from = b(c6);
var l4 = c6;

// node_modules/@arcgis/core/rest/locator/suggestLocations.js
async function u2(n14, u4, m8) {
  const p10 = n5(n14), a8 = { ...(u4 = l4.from(u4)).toJSON(), f: "json" }, f5 = o3({ ...p10.query, ...a8 }), g5 = e4(f5, m8), c10 = `${p10.path}/suggest`;
  return U(c10, g5).then(i4);
}
function i4(t7) {
  const { data: o7 } = t7;
  if (!o7)
    return [];
  const { suggestions: r4 } = o7;
  return r4 ? r4.map((t8) => new p4(t8)) : [];
}

// node_modules/@arcgis/core/widgets/Search/support/locatorUtils.js
var f3 = "Single Line Input";
var d6 = 3e5;
function g3(e9, o7) {
  return e9.location ? h5(e9, o7) : I2(e9, o7);
}
function p5(e9, o7) {
  if (o7.localSearchDisabled)
    return null;
  const t7 = e9 == null ? void 0 : e9.scale;
  return "number" == typeof t7 && t7 <= d6 ? e9.get("extent.center") : null;
}
function y3(e9, t7) {
  const { source: r4, spatialReference: s9, view: n14, suggestTerm: c10, maxSuggestions: a8, sourceIndex: l7 } = e9, m8 = new l4(), { apiKey: f5, url: d9 } = r4, g5 = j5(r4, n14), y6 = t7 && t7.signal;
  if (!d9)
    return Promise.resolve(null);
  f5 && (m8.apiKey = f5), r4.categories && (m8.categories = r4.categories), s9 && (m8.outSpatialReference = s9);
  const x3 = p5(n14, r4);
  x3 && (m8.location = x3);
  if (!c10.trim())
    return Promise.resolve(null);
  const { prefix: v6 = "", suffix: S5 = "" } = r4, w5 = `${v6}${c10}${S5}`;
  return m8.text = w5, g5 && (m8.searchExtent = e2(g5)), m8.maxSuggestions = a8, r4.countryCode && (m8.countryCode = r4.countryCode), u2(d9, m8, { signal: y6 }).then((e10) => b3(e10, l7));
}
function x2(e9) {
  return !!e9 && /(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function v4(e9) {
  return !!e9 && /(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
function S3(e9) {
  return !!e9 && /(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(e9);
}
var w2 = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";
function h5(e9, o7) {
  const { source: t7, spatialReference: r4, location: s9, sourceIndex: i7, view: c10 } = e9, { apiKey: u4, url: l7, zoomScale: m8, defaultZoomScale: f5 } = t7, d9 = c10 && c10.scale, g5 = o7 && o7.signal, p10 = new n9();
  return p10.location = s9, u4 && (p10.apiKey = u4), r4 && (p10.outSpatialReference = r4), n10(l7, p10, { signal: g5 }).then((e10) => L4([e10], { sourceIndex: i7, scale: d9, view: c10, zoomScale: m8, defaultZoomScale: f5 })).catch(() => []);
}
function j5(e9, o7) {
  const { filter: t7, withinViewEnabled: r4 } = e9, s9 = o7 && o7.scale, n14 = o7 && o7.extent, i7 = t7 && t7.geometry;
  return a5(i7, o7, s9) || (r4 && n14 ? n14 : void 0);
}
function I2(e9, t7) {
  const { source: r4, suggestResult: n14, spatialReference: i7, view: a8, maxResults: u4, sourceIndex: l7 } = e9, m8 = r4 && r4.zoomScale, d9 = r4 && r4.defaultZoomScale;
  if (!n14.text.trim())
    return Promise.resolve(null);
  const g5 = !n14.key && r4.prefix ? r4.prefix : "", y6 = !n14.key && r4.suffix ? r4.suffix : "", x3 = `${g5}${n14.text}${y6}`, v6 = new c5(), { apiKey: S5, url: w5 } = r4, h6 = a8 && a8.scale, I3 = j5(r4, a8), $4 = t7 && t7.signal;
  if (S5 && (v6.apiKey = S5), !w5)
    return Promise.resolve(null);
  r4.categories && (v6.categories = r4.categories), r4.locationType && (v6.locationType = r4.locationType), i7 && (v6.outSpatialReference = i7);
  const b5 = p5(a8, r4);
  b5 && (v6.location = b5), v6.maxLocations = u4, I3 && (v6.searchExtent = e2(I3)), r4.countryCode && (v6.countryCode = r4.countryCode);
  const { key: K3 } = n14, P2 = `${K3}`;
  return K3 && (v6.magicKey = P2), v6.address = {}, v6.address[r4.singleLineFieldName || f3] = x3, r4.outFields && (v6.outFields = r4.outFields), d4(w5, v6, { signal: $4 }).then((e10) => L4(e10, { key: P2, scale: h6, sourceIndex: l7, view: a8, zoomScale: m8, defaultZoomScale: d9 }));
}
function $2(e9, o7) {
  return { text: e9.text, key: e9.magicKey, sourceIndex: o7 };
}
function b3(e9, o7) {
  return e9.map((e10) => $2(e10, o7));
}
function K(o7, s9) {
  const { key: n14, scale: i7, sourceIndex: c10, view: a8, zoomScale: u4, defaultZoomScale: f5 } = s9, { attributes: d9, extent: g5, location: p10, address: y6 } = o7, x3 = new g({ geometry: p10, attributes: d9 }), v6 = g5 || p10, S5 = a5(v6, a8, i7), w5 = "number" == typeof u4 ? p2(S5, a8, u4) : "number" == typeof f5 && "point" === v6.type ? p2(S5, a8, f5) : S5, h6 = p10 ? `${p10.x},${p10.y}` : "", j7 = y6 || h6, I3 = x3.clone();
  return r(w5) && (I3.geometry = v.fromExtent(w5)), { extent: w5, feature: x3, target: I3, key: n14, name: j7, sourceIndex: c10 };
}
function L4(e9, o7) {
  return e9.filter(Boolean).map((e10) => K(e10, o7));
}

// node_modules/@arcgis/core/widgets/Search/LocatorSearchSource.js
var a7;
var p6 = "esri.widgets.Search.LocatorSearchSource";
var n11 = a7 = class extends i2 {
  constructor(e9) {
    super(e9), this.apiKey = null, this.categories = null, this.countryCode = null, this.defaultZoomScale = null, this.localSearchDisabled = false, this.locationType = null, this.name = "", this.placeholder = "", this.searchTemplate = "", this.singleLineFieldName = null, this.suggestionsEnabled = null, this.url = null, this.zoomScale = null, this.getResults = (e10, t7) => g3({ source: this, ...e10 }, t7), this.getSuggestions = (e10, t7) => y3({ source: this, ...e10 }, t7);
  }
  clone() {
    return new a7({ apiKey: this.apiKey, autoNavigate: this.autoNavigate, filter: this.filter, maxResults: this.maxResults, maxSuggestions: this.maxSuggestions, minSuggestCharacters: this.minSuggestCharacters, outFields: this.outFields ? m(this.outFields) : null, placeholder: this.placeholder, popupEnabled: this.popupEnabled, prefix: this.prefix, resultGraphicEnabled: this.resultGraphicEnabled, resultSymbol: this.resultSymbol ? this.resultSymbol.clone() : null, suggestionsEnabled: this.suggestionsEnabled, suffix: this.suffix, withinViewEnabled: this.withinViewEnabled, categories: this.categories ? m(this.categories) : null, countryCode: this.countryCode, locationType: this.locationType, searchTemplate: this.searchTemplate, singleLineFieldName: this.singleLineFieldName, zoomScale: this.zoomScale });
  }
};
e([d()], n11.prototype, "apiKey", void 0), e([d()], n11.prototype, "categories", void 0), e([d()], n11.prototype, "countryCode", void 0), e([d({ json: { write: true } })], n11.prototype, "defaultZoomScale", void 0), e([d()], n11.prototype, "localSearchDisabled", void 0), e([d()], n11.prototype, "locationType", void 0), e([d({ json: { write: true } })], n11.prototype, "name", void 0), e([d({ json: { write: true } })], n11.prototype, "placeholder", void 0), e([d()], n11.prototype, "searchTemplate", void 0), e([d({ json: { write: true } })], n11.prototype, "singleLineFieldName", void 0), e([d({ json: { read: { source: "suggest" }, write: { target: "suggest" } } })], n11.prototype, "suggestionsEnabled", void 0), e([d({ json: { write: true } })], n11.prototype, "url", void 0), e([d({ json: { write: true } })], n11.prototype, "zoomScale", void 0), n11 = a7 = e([n(p6)], n11);
var c7 = n11;

// node_modules/@arcgis/core/rest/geometryService/units.js
var _ = new s({ MGRS: "mgrs", USNG: "usng", UTM: "utm", GeoRef: "geo-ref", GARS: "gars", DMS: "dms", DDM: "ddm", DD: "dd" });

// node_modules/@arcgis/core/rest/operations/generalize.js
var i5 = new s({ 109006: "centimeters", 9102: "decimal-degrees", 109005: "decimeters", 9002: "feet", 109009: "inches", 9036: "kilometers", 9001: "meters", 9035: "miles", 109007: "millimeters", 109012: "nautical-miles", 9096: "yards" });

// node_modules/@arcgis/core/rest/support/GeneralizeParameters.js
var p7 = class extends l {
  constructor(r4) {
    super(r4), this.deviationUnit = null, this.geometries = null, this.maxDeviation = null;
  }
};
e([d({ type: String, json: { write: true } })], p7.prototype, "deviationUnit", void 0), e([d({ json: { read: { reader: (r4) => r4 ? r4.map((r5) => d2(r5)) : null }, write: { writer: (r4, o7) => {
  o7.geometries = r4.map((r5) => r5.toJSON());
} } } })], p7.prototype, "geometries", void 0), e([d({ type: Number, json: { write: true } })], p7.prototype, "maxDeviation", void 0), p7 = e([n("esri.rest.support.GeneralizeParameters")], p7), p7.from = b(p7);

// node_modules/@arcgis/core/rest/operations/lengths.js
var n12 = new s({ preserveShape: "preserve-shape" });

// node_modules/@arcgis/core/rest/support/LengthsParameters.js
var l5 = class extends l {
  constructor(o7) {
    super(o7), this.calculationType = null, this.geodesic = null, this.lengthUnit = null, this.polylines = null;
  }
};
e([d({ type: String, json: { write: true } })], l5.prototype, "calculationType", void 0), e([d({ type: Boolean, json: { write: true } })], l5.prototype, "geodesic", void 0), e([d({ json: { write: true } })], l5.prototype, "lengthUnit", void 0), e([d({ type: [m2], json: { read: { reader: (o7) => o7 ? o7.map((o8) => d2(o8)) : null }, write: { writer: (o7, r4) => {
  r4.polylines = o7.map((o8) => o8.toJSON());
} } } })], l5.prototype, "polylines", void 0), l5 = e([n("esri.rest.support.LengthsParameters")], l5), l5.from = b(l5);

// node_modules/@arcgis/core/rest/operations/offset.js
var o6 = new s({ esriGeometryOffsetBevelled: "bevelled", esriGeometryOffsetMitered: "mitered", esriGeometryOffsetRounded: "rounded" });
var s8 = new s({ 9001: "meters", 9002: "feet", 9036: "kilometers", 9093: "miles", 109012: "nautical-miles", 109001: "yards" });

// node_modules/@arcgis/core/rest/support/OffsetParameters.js
var i6 = class extends l {
  constructor(o7) {
    super(o7), this.bevelRatio = null, this.geometries = null, this.offsetDistance = null, this.offsetHow = null, this.offsetUnit = null;
  }
};
e([d({ type: Number, json: { write: true } })], i6.prototype, "bevelRatio", void 0), e([d({ json: { read: { reader: (o7) => o7 ? o7.map((o8) => d2(o8)) : null }, write: { writer: (o7, t7) => {
  t7.geometries = o7.map((o8) => o8.toJSON());
} } } })], i6.prototype, "geometries", void 0), e([d({ type: Number, json: { write: true } })], i6.prototype, "offsetDistance", void 0), e([d({ type: String, json: { write: true } })], i6.prototype, "offsetHow", void 0), e([d({ type: String, json: { write: true } })], i6.prototype, "offsetUnit", void 0), i6 = e([n("esri.rest.support.OffsetParameters")], i6), i6.from = b(i6);

// node_modules/@arcgis/core/rest/operations/relation.js
var t5 = new s({ esriGeometryRelationCross: "cross", esriGeometryRelationDisjoint: "disjoint", esriGeometryRelationIn: "in", esriGeometryRelationInteriorIntersection: "interior-intersection", esriGeometryRelationIntersection: "intersection", esriGeometryRelationLineCoincidence: "line-coincidence", esriGeometryRelationLineTouch: "line-touch", esriGeometryRelationOverlap: "overlap", esriGeometryRelationPointTouch: "point-touch", esriGeometryRelationTouch: "touch", esriGeometryRelationWithin: "within", esriGeometryRelationRelation: "relation" });

// node_modules/@arcgis/core/rest/support/RelationParameters.js
var p8 = class extends l {
  constructor(r4) {
    super(r4), this.geometries1 = null, this.geometries2 = null, this.relation = null, this.relationParameter = null;
  }
};
e([d({ json: { read: { reader: (r4) => r4 ? r4.map((r5) => d2(r5)) : null }, write: { writer: (r4, e9) => {
  e9.geometries1 = r4.map((r5) => r5.toJSON());
} } } })], p8.prototype, "geometries1", void 0), e([d({ json: { read: { reader: (r4) => r4 ? r4.map((r5) => d2(r5)) : null }, write: { writer: (r4, e9) => {
  e9.geometries2 = r4.map((r5) => r5.toJSON());
} } } })], p8.prototype, "geometries2", void 0), e([d({ type: String, json: { write: true } })], p8.prototype, "relation", void 0), e([d({ type: String, json: { write: true } })], p8.prototype, "relationParameter", void 0), p8 = e([n("esri.rest.support.RelationParameters")], p8), p8.from = b(p8);

// node_modules/@arcgis/core/rest/operations/trimExtend.js
var t6 = new s({ 0: "default-curve-extension", 1: "relocate-ends", 2: "keep-end-attributes", 4: "no-end-attributes", 8: "no-extend-at-from", 16: "no-extend-at-to" });

// node_modules/@arcgis/core/rest/support/TrimExtendParameters.js
var m7 = class extends l {
  constructor(r4) {
    super(r4), this.extendHow = "default-curve-extension", this.polylines = null, this.trimExtendTo = null;
  }
};
e([d({ type: String, json: { write: true } })], m7.prototype, "extendHow", void 0), e([d({ type: [m2], json: { read: { reader: (r4) => r4 ? r4.map((r5) => d2(r5)) : null }, write: { writer: (r4, o7) => {
  o7.polylines = r4.map((r5) => r5.toJSON());
} } } })], m7.prototype, "polylines", void 0), e([d({ json: { read: { reader: (r4) => r4 ? d2(r4) : null }, write: { writer: (r4, o7) => {
  o7.trimExtendTo = r4.toJSON();
} } } })], m7.prototype, "trimExtendTo", void 0), m7 = e([n("esri.rest.support.TrimExtendParameters")], m7), m7.from = b(m7);

// node_modules/@arcgis/core/widgets/support/geolocationUtils.js
var c8 = s2.getLogger("esri.widgets.support.geolocationUtils");
var u3 = { maximumAge: 0, timeout: 15e3, enableHighAccuracy: true };
function p9() {
  const e9 = a("esri-geolocation");
  return e9 || c8.warn("geolocation-unsupported", "Geolocation unsupported."), e9;
}
function l6() {
  const e9 = window.isSecureContext;
  return e9 || c8.warn("insecure-context", "Geolocation requires a secure origin."), e9;
}
function g4() {
  return p9() && l6();
}
function j6(e9) {
  const r4 = 15e3;
  return e9 || (e9 = u3), new Promise((o7, i7) => {
    setTimeout(() => i7(new s3("geolocation:timeout", "getting the current geolocation position timed out")), r4), navigator.geolocation.getCurrentPosition(o7, i7, e9);
  });
}
function f4(e9, t7) {
  const { position: r4, view: o7 } = e9;
  return P(y4(d7(r4)), o7, t7);
}
function d7(e9) {
  const t7 = e9 && e9.coords || {}, r4 = { accuracy: t7.accuracy, altitude: t7.altitude, altitudeAccuracy: t7.altitudeAccuracy, heading: t7.heading, latitude: t7.latitude, longitude: t7.longitude, speed: t7.speed };
  return e9 ? { coords: r4, timestamp: e9.timestamp } : e9;
}
function y4(e9) {
  const t7 = e9 && e9.coords;
  return t7 ? new j({ longitude: t7.longitude, latitude: t7.latitude, z: t7.altitude || null, spatialReference: { wkid: 4326 } }) : null;
}
function P(e9, r4, o7) {
  if (!r4)
    return Promise.resolve(e9);
  const i7 = r4.spatialReference;
  return i7.isWGS84 ? Promise.resolve(e9) : i7.isWebMercator ? Promise.resolve(R(e9)) : w3(o7).then((r5) => {
    if (!r5)
      throw new s3("geometry-service:missing-url", "Geometry service URL is missing");
    const s9 = new a4({ geometries: [e9], outSpatialReference: i7 });
    return n6(r5, s9, o7).then((e10) => e10[0]);
  });
}
function w3(t7) {
  if (r2.geometryServiceUrl)
    return Promise.resolve(r2.geometryServiceUrl);
  const r4 = B.getDefault();
  return r4.load(t7).catch(() => {
  }).then(() => r4.get("helperServices.geometry.url"));
}

// node_modules/@arcgis/core/widgets/Search/SearchViewModel.js
function Q(e9, t7) {
  return e9.hasOwnProperty(t7) && null != e9[t7] && "" !== e9[t7];
}
var Z = () => h2("esri/widgets/Search/t9n/Search");
var q = "esri.widgets.Search.SearchViewModel";
var z2 = s2.getLogger(q);
var K2 = "highlight";
var W = j2.ofType({ key: (e9) => e9.layer ? "layer" : "locator", base: i2, typeMap: { layer: n7, locator: c7 } });
var X = k.WGS84;
var Y = "esri/images/search/search-symbol-32.png";
var $3 = /<(?:.|\s)*?>/g;
var ee = -1;
var te = class extends e6(n2.EventedMixin(y)) {
  constructor(e9) {
    super(e9), this._handles = new u(), this._gotoController = null, this._searching = null, this._createdFeatureLayers = [], this.autoNavigate = true, this.autoSelect = true, this.defaultPopupTemplate = null, this.defaultSources = new W(), this.defaultSymbols = { point: new n4({ url: a3(Y), size: 24, width: 24, height: 24 }), polyline: new m3({ color: [130, 130, 130, 1], width: 2 }), polygon: new S({ color: [235, 235, 235, 0.4], outline: { color: [130, 130, 130, 1], width: 2 } }) }, this.includeDefaultSources = true, this.maxInputLength = 128, this.maxResults = 6, this.maxSuggestions = 6, this.messages = null, this.minSuggestCharacters = 3, this.popupEnabled = true, this.popupTemplate = null, this.portal = B.getDefault(), this.resultCount = null, this.resultGraphicEnabled = true, this.resultGraphic = null, this.results = null, this.selectedSuggestion = null, this.searchAllEnabled = true, this.selectedResult = null, this.sources = new W(), this.suggestionDelay = 350, this.suggestionCount = null, this.suggestions = null, this.suggestionsEnabled = true, this.view = null;
  }
  initialize() {
    const e9 = async () => {
      const e10 = await Z();
      this.messages = e10, this.defaultPopupTemplate = new B2({ title: e10.searchResult, content: "{Match_addr}" });
    };
    e9(), this._handles.add([l2(() => [this.includeDefaultSources, this.view, this.portal], () => this._update(), h), s4(e9)]);
  }
  destroy() {
    this._destroyFeatureLayers(), this._abortGoTo(), this.clearGraphics(), this._handles.destroy(), this._handles = null;
  }
  get activeSource() {
    return this.allSources.getItemAt(this.activeSourceIndex) || null;
  }
  get activeSourceIndex() {
    return 1 === this.allSources.length || !this.searchAllEnabled ? 0 : ee;
  }
  set activeSourceIndex(e9) {
    void 0 !== e9 ? this._override("activeSourceIndex", e9) : this._clearOverride("activeSourceIndex");
  }
  get allPlaceholder() {
    var _a;
    return (_a = this.messages) == null ? void 0 : _a.allPlaceholder;
  }
  set allPlaceholder(e9) {
    e9 ? this._override("allPlaceholder", e9) : this._clearOverride("allPlaceholder");
  }
  get allSources() {
    const { sources: e9, defaultSources: t7, includeDefaultSources: r4 } = this, s9 = "function" == typeof r4 ? r4.call(null, { sources: e9, defaultSources: t7 }) : r4 ? t7.concat(e9) : e9, o7 = this._get("allSources") || new W();
    return o7.removeAll(), o7.addMany(s9.filter(Boolean)), o7;
  }
  get defaultSymbol() {
    return r3(z2, "defaultSymbol", { replacement: "defaultSymbols", version: "4.22" }), this._get("defaultSymbol");
  }
  set defaultSymbol(e9) {
    r3(z2, "defaultSymbol", { replacement: "defaultSymbols", version: "4.22" }), this._set("defaultSymbol", e9);
  }
  get locationEnabled() {
    return this._get("locationEnabled") || g4();
  }
  set locationEnabled(e9) {
    if (void 0 === e9)
      return void this._clearOverride("locationEnabled");
    const t7 = g4();
    if (e9 && !t7) {
      const e10 = new s3("locationEnabled:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      z2.error(e10);
    }
    this._override("locationEnabled", e9 && t7);
  }
  get placeholder() {
    const { allSources: e9, activeSourceIndex: t7, allPlaceholder: r4 } = this;
    if (t7 === ee)
      return r4;
    const s9 = e9.getItemAt(t7);
    return s9 ? s9.placeholder : "";
  }
  set searchTerm(e9) {
    this._set("searchTerm", e9 || ""), this.clearGraphics(), this.selectedSuggestion && this.selectedSuggestion.text !== e9 && this._set("selectedSuggestion", null), "" === e9 && this._clear();
  }
  get searchTerm() {
    return this._get("searchTerm") || "";
  }
  get state() {
    return this._searching ? "searching" : this.updating ? "loading" : 0 === this.allSources.length ? "disabled" : "ready";
  }
  get updating() {
    return null != this._updatingPromise;
  }
  clear() {
    this.searchTerm = "";
  }
  clearGraphics() {
    this._removeHighlight(), this._closePopup(), this.view && this.view.graphics.remove(this.resultGraphic), this._set("resultGraphic", null);
  }
  search(e9, t7) {
    this.emit("search-start"), this.clearGraphics();
    const r4 = this._createSuggestionForSearch(e9), s9 = this.when().then(() => this._getResultsFromSources(r4, t7).then((e10) => {
      var _a;
      if ((_a = e2(t7 == null ? void 0 : t7.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s10 = { activeSourceIndex: this.activeSourceIndex, searchTerm: r4.text, numResults: 0, numErrors: 0, errors: [], results: [] };
      this._formatResponse(s10, e10, r4);
      const o7 = this._getFirstResult(s10.results), i7 = (r4.location && o7 ? o7.name : r4.text).replace($3, "");
      return this._set("searchTerm", i7), (r4.key && "number" == typeof r4.sourceIndex || r4.location) && this._set("selectedSuggestion", r4), this._set("results", s10.results), this._set("resultCount", s10.results.reduce((e11, t8) => e11 + t8.results.length, 0)), this.emit("search-complete", s10), this._selectFirstResult(o7).then(() => s10);
    })).then((e10) => (this._clearSearching(), e10), (e10) => {
      throw this._clearSearching(), e10;
    });
    return this._searching = s9, s9;
  }
  searchNearby(e9) {
    if (!this.locationEnabled) {
      const e10 = new s3("searchNearby:geolocation-unsupported", "Geolocation API is unsupported.", { geolocation: navigator.geolocation });
      return z2.error(e10), Promise.reject(e10);
    }
    const t7 = j6().then((t8) => f4({ position: t8, view: this.view }, e9)).then((t8) => this.search(t8, e9));
    return this._searching = t7, t7.catch(() => {
    }).then(() => this._clearSearching()), t7;
  }
  select(e9) {
    if (this.clearGraphics(), !e9) {
      const t8 = new s3("select:missing-parameter", "Cannot select without a searchResult.", { searchResult: e9 });
      return z2.error(t8), Promise.reject(t8);
    }
    const { view: t7 } = this, r4 = Q(e9, "sourceIndex") ? e9.sourceIndex : this._getSourceIndexOfResult(e9), o7 = this.allSources.getItemAt(r4);
    if (!o7) {
      const e10 = new s3("select:missing-source", "Cannot select without a source.", { source: o7 });
      return z2.error(e10), Promise.reject(e10);
    }
    const i7 = o7 instanceof n7 ? this._getLayerSourcePopupTemplate(o7) : o7.popupTemplate, l7 = o7.resultSymbol || this._getDefaultSymbol(e9), a8 = Q(o7, "resultGraphicEnabled") ? o7.resultGraphicEnabled : this.resultGraphicEnabled, u4 = Q(o7, "autoNavigate") ? o7.autoNavigate : this.autoNavigate, c10 = Q(o7, "popupEnabled") ? o7.popupEnabled : this.popupEnabled, h6 = c10 ? i7 || this.popupTemplate || this.defaultPopupTemplate : null, { feature: p10 } = e9;
    if (!p10) {
      const e10 = new s3("select:missing-feature", "Cannot select without a feature.", { feature: p10 });
      return z2.error(e10), Promise.reject(e10);
    }
    const { attributes: g5, geometry: y6, layer: f5, sourceLayer: S5 } = p10, _2 = m5(y6), v6 = { layerViewQuery: this._getLayerView(p10), elevationQuery: t7 && r(_2) ? s7(_2, t7).catch(() => _2) : Promise.resolve(_2) };
    return E(v6).then((i8) => {
      const n14 = i8.layerViewQuery.value, m8 = i8.elevationQuery.value;
      l7 instanceof m4 && (l7.text = e9.name);
      const _3 = t7 && u4 ? e9.target || e9.extent : null;
      return (r(_3) ? this._goToSearchResult(_3) : Promise.resolve()).then(() => {
        var _a;
        const i9 = n14 ? p10 : new g({ geometry: y6, symbol: l7, attributes: g5, layer: f5, sourceLayer: S5, popupTemplate: h6 }), u5 = c10 && ((_a = this.view) == null ? void 0 : _a.popup), d9 = u5 && i9.getEffectivePopupTemplate(u5.defaultPopupTemplateEnabled);
        return d9 && t7.popup.open({ features: [i9], location: m8 }), n14 && e5(n14) && !d9 && this._highlightFeature({ graphic: i9, layerView: n14 }), !n14 && a8 && t7 && t7.graphics.push(i9), this._setResultFloor(e9), this._set("selectedResult", e9), this._set("resultGraphic", i9), this.emit("select-result", { result: e9, source: o7, sourceIndex: r4 }), e9;
      });
    });
  }
  suggest(e9, t7, r4) {
    const s9 = e9 || this.searchTerm;
    return this.emit("suggest-start", { searchTerm: s9 }), this._suggestTimer(t7, r4).then(() => this._suggestImmediate(s9, r4).then((e10) => (this._set("suggestions", e10.results), this._set("suggestionCount", e10.results.reduce((e11, t8) => e11 + t8.results.length, 0)), this.emit("suggest-complete", e10), e10)));
  }
  async when() {
    await j3(() => !this.updating);
  }
  async _update() {
    const { portal: e9, view: t7 } = this;
    if (this.includeDefaultSources) {
      const r4 = this._updatingPromise = E([e9 == null ? void 0 : e9.load(), t7 == null ? void 0 : t7.when()]);
      if (this.destroyed)
        return;
      if (await r4, r4 !== this._updatingPromise)
        return;
    }
    await j3(() => this.messages), this.destroyed || this._updateDefaultSources(), this._updatingPromise = null;
  }
  _clearSearching() {
    this._searching = null;
  }
  _convertHelperServices() {
    var _a, _b;
    const e9 = (_b = (_a = this.portal) == null ? void 0 : _a.helperServices) == null ? void 0 : _b.geocode;
    if (!e9)
      return [];
    return e9.map((e10) => {
      if (false === e10.placefinding)
        return;
      const t7 = r2.apiKey && S3(e10.url) ? { url: w2 } : null, s9 = c7.fromJSON({ ...e10, ...t7 }), o7 = s9.url;
      if (S3(o7) || v4(o7) || x2(o7)) {
        const e11 = s9.outFields || ["Addr_type", "Match_addr", "StAddr", "City"], t8 = s9.placeholder || this.messages.placeholder, r4 = "number" == typeof s9.defaultZoomScale ? s9.defaultZoomScale : 2500;
        s9.set({ singleLineFieldName: "SingleLine", outFields: e11, placeholder: t8, defaultZoomScale: r4 });
      }
      return s9.singleLineFieldName ? s9 : void 0;
    }).filter(Boolean);
  }
  _destroyFeatureLayers() {
    this._createdFeatureLayers.forEach((e9) => e9 == null ? void 0 : e9.destroy()), this._createdFeatureLayers = [];
  }
  _getLayerSources(e9, t7) {
    var _a;
    const r4 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s9 = r4.findLayerById(e10.id);
      if (!s9)
        return;
      const o7 = this._getLayerJSON(e10), i7 = n7.fromJSON(o7);
      return i7.placeholder = t7, this._getLayer(s9, o7).then((e11) => {
        i7.layer = e11;
      }), i7;
    }).filter(Boolean).toArray();
  }
  _getTableSources(e9, t7) {
    var _a;
    const r4 = (_a = this.view) == null ? void 0 : _a.map;
    return e9.map((e10) => {
      const s9 = r4.findTableById(e10.id);
      if (!s9)
        return;
      const o7 = this._getLayerJSON(e10), i7 = n7.fromJSON(o7);
      return i7.placeholder = t7, this._getLayer(s9, o7).then((e11) => {
        i7.layer = e11;
      }), i7;
    }).filter(Boolean).toArray();
  }
  _convertApplicationProperties() {
    var _a, _b, _c;
    const e9 = (_a = this.view) == null ? void 0 : _a.map, t7 = (_c = (_b = e9 == null ? void 0 : e9.applicationProperties) == null ? void 0 : _b.viewing) == null ? void 0 : _c.search;
    if (!t7)
      return [];
    const { enabled: r4, hintText: s9, layers: o7, tables: i7 } = t7;
    if (!r4)
      return [];
    return [...this._getLayerSources(o7, s9), ...this._getTableSources(i7, s9)];
  }
  async _getSubLayer(e9, t7) {
    if (await e9.load(), !e9.allSublayers)
      throw new Error();
    const r4 = e9.allSublayers.find((e10) => e10.id === t7.subLayer);
    if (!r4)
      throw new Error();
    const s9 = await r4.createFeatureLayer();
    return this._createdFeatureLayers.push(s9), s9;
  }
  async _getBuildingSubLayer(e9, t7) {
    await e9.load();
    const r4 = e9.allSublayers.find((e10) => e10.id === t7.subLayer);
    if ("building-component" !== (r4 == null ? void 0 : r4.type))
      throw new Error();
    if (await r4.load(), null == r4.associatedLayer)
      throw new Error();
    return await r4.associatedLayer.load(), r4;
  }
  _getLayer(e9, t7) {
    return "feature" === e9.type || "scene" === e9.type || "csv" === e9.type || "geojson" === e9.type || "ogc-feature" === e9.type ? Promise.resolve(e9) : "map-image" === e9.type ? this._getSubLayer(e9, t7).catch(() => {
      const t8 = new s3("search:create-featurelayer", "Could not create a FeatureLayer from the MapImageLayer", { layer: e9 });
      return z2.error(t8), null;
    }) : "building-scene" === e9.type ? this._getBuildingSubLayer(e9, t7) : Promise.resolve(null);
  }
  _getLayerJSON(e9) {
    return "function" == typeof e9.toJSON ? e9.toJSON() : e9;
  }
  _updateDefaultSources() {
    const { defaultSources: e9, includeDefaultSources: t7 } = this;
    this._destroyFeatureLayers(), e9.removeAll(), t7 && e9.addMany([...this._convertApplicationProperties(), ...this._convertHelperServices()]);
  }
  _abortGoTo() {
    this._gotoController && this._gotoController.abort(), this._gotoController = null;
  }
  _clear() {
    this._abortGoTo(), this._set("resultCount", null), this._set("results", null), this._set("suggestions", null), this._set("suggestionCount", null), this._set("selectedResult", null), this._set("selectedSuggestion", null), this.emit("search-clear");
  }
  _closePopup() {
    var _a;
    const e9 = (_a = this.view) == null ? void 0 : _a.popup, { resultGraphic: t7 } = this;
    if (!e9 || !t7)
      return;
    const { selectedFeature: r4 } = e9;
    r4 && r4 === t7 && e9.close();
  }
  _suggestTimer(e9, t7) {
    const r4 = null != e9 ? e9 : this.suggestionDelay;
    return L(r4, null, t7 && t7.signal);
  }
  _createLocationForSearch(e9) {
    return e9 instanceof g ? m5(e9.geometry) : e9 instanceof j ? e9 : Array.isArray(e9) && 2 === e9.length ? new j({ longitude: e9[0], latitude: e9[1] }) : null;
  }
  _createSuggestionForSearch(e9) {
    if (e9 && Q(e9, "key") && Q(e9, "text") && Q(e9, "sourceIndex"))
      return e9;
    const t7 = this._createLocationForSearch(e9), r4 = "string" == typeof e9 ? e9 : this.searchTerm, { selectedSuggestion: s9, selectedResult: o7 } = this, i7 = !e9 && s9 && o7, l7 = i7 && s9.key === o7.key && s9.sourceIndex === o7.sourceIndex, a8 = i7 && s9.location;
    return l7 || a8 ? s9 : { location: e2(t7), text: t7 ? "" : r4, sourceIndex: null, key: null };
  }
  _getFirstResult(e9) {
    let t7 = null;
    return e9 && e9.some((e10) => {
      const { results: r4 } = e10, s9 = r4[0], o7 = !!s9;
      return o7 && (t7 = s9), o7;
    }), t7;
  }
  _selectFirstResult(e9) {
    return this.autoSelect && e9 ? this.select(e9) : Promise.resolve(null);
  }
  _suggestImmediate(e9, t7) {
    return this.when().then(() => this._getSuggestionsFromSources(e9, t7)).then((r4) => {
      var _a;
      if ((_a = e2(t7 == null ? void 0 : t7.signal)) == null ? void 0 : _a.aborted)
        return null;
      const s9 = { activeSourceIndex: this.activeSourceIndex, searchTerm: e9, numResults: 0, numErrors: 0, errors: [], results: [] };
      return this._formatResponse(s9, r4), s9;
    });
  }
  _formatSourceResponse(e9, t7, r4) {
    const s9 = t7 && t7.value || [], o7 = t7 && t7.error, i7 = this.allSources.getItemAt(r4);
    if (o7) {
      const t8 = { sourceIndex: r4, source: i7, error: o7 };
      e9.errors.push(t8), z2.error(o7), e9.numErrors++;
    } else {
      const t8 = { sourceIndex: r4, source: i7, results: s9 };
      e9.results.push(t8), e9.numResults += s9.length;
    }
  }
  _formatResponse(e9, t7, r4) {
    if (t7)
      if (e9.activeSourceIndex === ee) {
        const s9 = r4 && Q(r4, "sourceIndex") && -1 !== r4.sourceIndex ? r4.sourceIndex : void 0;
        t7.forEach((t8, r5) => {
          const o7 = void 0 !== s9 ? s9 : r5;
          this._formatSourceResponse(e9, t8, o7);
        });
      } else
        this._formatSourceResponse(e9, t7[0], e9.activeSourceIndex);
  }
  _getResultsFromSources(e9, t7) {
    const { allSources: r4 } = this, s9 = !e9.location && Q(e9, "sourceIndex") ? e9.sourceIndex : this.activeSourceIndex, o7 = [];
    if (!r4.length) {
      const e10 = new s3("search:no-sources-defined", "At least one source is required.", { allSources: r4 });
      return z2.error(e10), Promise.reject(e10);
    }
    return s9 === ee ? r4.forEach((r5, s10) => {
      o7.push(this._getResultsFromSource(e9, s10, t7));
    }) : o7.push(this._getResultsFromSource(e9, s9, t7)), E(o7);
  }
  _getSuggestionsFromSources(e9, t7) {
    const { allSources: r4, activeSourceIndex: s9 } = this, o7 = [];
    if (!r4.length) {
      const e10 = new s3("suggest:no-sources-defined", "At least one source is required.", { allSources: r4 });
      return z2.error(e10), Promise.reject(e10);
    }
    return s9 === ee ? r4.forEach((r5, s10) => {
      o7.push(this._getSuggestionsFromSource(e9, s10, t7));
    }) : o7.push(this._getSuggestionsFromSource(e9, s9, t7)), E(o7);
  }
  _getResultsFromSource(e9, t7, r4) {
    var _a;
    const s9 = this.allSources.getItemAt(t7), { location: o7 = null } = e9, i7 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || X, l7 = Q(s9, "maxResults") ? s9.maxResults : this.maxResults, a8 = !!(s9 instanceof n7 && Q(s9, "exactMatch")) && s9.exactMatch, { view: n14 } = this;
    return s9.getResults({ view: n14, sourceIndex: t7, location: o7, suggestResult: e9, spatialReference: i7, exactMatch: a8, maxResults: l7 }, r4);
  }
  _getSuggestionsFromSource(e9, t7, r4) {
    var _a;
    const s9 = this.allSources.getItemAt(t7), o7 = Q(s9, "suggestionsEnabled") ? s9.suggestionsEnabled : this.suggestionsEnabled, i7 = e9.length, l7 = Q(s9, "minSuggestCharacters") ? s9.minSuggestCharacters : this.minSuggestCharacters;
    if (o7 && e9.trim() && i7 >= l7) {
      const o8 = ((_a = this.view) == null ? void 0 : _a.spatialReference) || X, i8 = Q(s9, "maxSuggestions") ? s9.maxSuggestions : this.maxSuggestions, { view: l8 } = this, a8 = !!(s9 instanceof n7 && Q(s9, "exactMatch")) && s9.exactMatch;
      return s9.getSuggestions({ view: l8, sourceIndex: t7, suggestTerm: e9, spatialReference: o8, maxSuggestions: i8, exactMatch: a8 }, r4);
    }
    return Promise.resolve(null);
  }
  _getLayerSourcePopupTemplate(e9) {
    const { layer: t7 } = e9;
    if (t7)
      return Q(e9, "popupTemplate") ? e9.popupTemplate : t7.popupTemplate;
  }
  _getSourceIndexOfResult(e9) {
    const t7 = this.results;
    let r4 = null;
    return t7.some((t8) => t8.results.some((s9) => s9 === e9 && (r4 = t8.sourceIndex, true))), r4;
  }
  async _goToSearchResult(e9) {
    const t7 = !!e9;
    this._abortGoTo();
    const r4 = new AbortController();
    this._gotoController = r4;
    const s9 = { target: { target: e9 }, options: { animate: t7, signal: r4.signal } };
    await this.callGoTo(s9), this._gotoController = null;
  }
  _getDefaultSymbol(e9) {
    var _a;
    const { defaultSymbols: t7 } = this, r4 = (_a = e9.feature) == null ? void 0 : _a.geometry;
    if (t(r4))
      return null;
    const s9 = this._get("defaultSymbol");
    if (s9 && ("point" === r4.type || "multipoint" === r4.type))
      return s9;
    switch (r4.type) {
      case "point":
      case "multipoint":
        return t7.point;
      case "polyline":
        return t7.polyline;
      case "extent":
      case "polygon":
        return t7.polygon;
      default:
        return null;
    }
  }
  _removeHighlight() {
    this._handles.remove(K2);
  }
  async _getLayerView(e9) {
    const { view: t7 } = this;
    if (!e9 || !t7 || "building-component" === e9.layer.type || "subtype-sublayer" === e9.layer.type)
      return null;
    const { layer: r4 } = e9;
    return await t7.when(), t7.whenLayerView(r4);
  }
  _highlightFeature(e9) {
    const { graphic: t7, layerView: r4 } = e9, { attributes: s9, layer: o7 } = t7, { objectIdField: i7 } = o7, l7 = s9 && s9[i7], a8 = r4.highlight(l7 || t7);
    this._handles.add(a8, K2);
  }
  _setResultFloor(e9) {
    var _a, _b, _c;
    const { view: t7 } = this, r4 = (_a = e9.feature) == null ? void 0 : _a.attributes, s9 = (_b = e9.feature) == null ? void 0 : _b.sourceLayer;
    if (s9 && "floorInfo" in s9 && ((_c = s9 == null ? void 0 : s9.floorInfo) == null ? void 0 : _c.floorField) && r4) {
      const e10 = r4[s9.floorInfo.floorField];
      t7.emit("select-result-floor", e10);
    }
  }
};
te.ALL_INDEX = ee, e([d()], te.prototype, "_searching", void 0), e([d()], te.prototype, "_updatingPromise", void 0), e([d({ readOnly: true, value: null })], te.prototype, "activeSource", null), e([d()], te.prototype, "activeSourceIndex", null), e([d()], te.prototype, "allPlaceholder", null), e([d({ readOnly: true })], te.prototype, "allSources", null), e([d()], te.prototype, "autoNavigate", void 0), e([d()], te.prototype, "autoSelect", void 0), e([d()], te.prototype, "defaultPopupTemplate", void 0), e([d({ readOnly: true })], te.prototype, "defaultSources", void 0), e([d()], te.prototype, "defaultSymbol", null), e([d()], te.prototype, "defaultSymbols", void 0), e([d()], te.prototype, "includeDefaultSources", void 0), e([d()], te.prototype, "locationEnabled", null), e([d()], te.prototype, "maxInputLength", void 0), e([d()], te.prototype, "maxResults", void 0), e([d()], te.prototype, "maxSuggestions", void 0), e([d()], te.prototype, "messages", void 0), e([d()], te.prototype, "minSuggestCharacters", void 0), e([d({ readOnly: true })], te.prototype, "placeholder", null), e([d()], te.prototype, "popupEnabled", void 0), e([d({ type: B2 })], te.prototype, "popupTemplate", void 0), e([d({ type: B })], te.prototype, "portal", void 0), e([d()], te.prototype, "resultCount", void 0), e([d()], te.prototype, "resultGraphicEnabled", void 0), e([d({ readOnly: true })], te.prototype, "resultGraphic", void 0), e([d({ readOnly: true })], te.prototype, "results", void 0), e([d({ readOnly: true })], te.prototype, "selectedSuggestion", void 0), e([d()], te.prototype, "searchAllEnabled", void 0), e([d({ readOnly: true })], te.prototype, "selectedResult", void 0), e([d()], te.prototype, "searchTerm", null), e([d({ type: W })], te.prototype, "sources", void 0), e([d({ readOnly: true })], te.prototype, "state", null), e([d()], te.prototype, "suggestionDelay", void 0), e([d()], te.prototype, "suggestionCount", void 0), e([d({ readOnly: true })], te.prototype, "suggestions", void 0), e([d()], te.prototype, "suggestionsEnabled", void 0), e([d({ readOnly: true })], te.prototype, "updating", null), e([d()], te.prototype, "view", void 0), e([d()], te.prototype, "clear", null), te = e([n(q)], te);
var re = te;

// node_modules/@arcgis/core/widgets/Search/SearchResultRenderer.js
var n13 = { base: "esri-search-result-renderer esri-widget", anchor: "esri-widget__anchor", showMoreResults: "esri-search-result-renderer__more-results--show-more-results", moreResults: "esri-search-result-renderer__more-results", moreResultsList: "esri-search-result-renderer__more-results-list", moreResultsHeader: "esri-search-result-renderer__more-results-header", moreResultsItem: "esri-search-result-renderer__more-results-item", moreResultsListHeader: "esri-search-result-renderer__more-results-list-header" };
var c9 = class extends O {
  constructor(e9, s9) {
    super(e9, s9), this.messages = null, this.showMoreResultsOpen = false, this.viewModel = null;
  }
  render() {
    const e9 = { [n13.showMoreResults]: this.showMoreResultsOpen };
    return n3("div", { class: n13.base }, n3("div", { key: "esri-search-renderer__container", class: this.classes(n13.moreResults, e9) }, this.renderSearchResultName(), this.renderMoreResults()));
  }
  renderMoreResults() {
    return n3("div", { key: "esri-search-renderer__more-results" }, this.renderMoreResultsButton(), this.renderMoreResultsLists());
  }
  renderSearchResultName() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, s9 = e9 && e9.name || "";
    return n3("div", { key: "esri-search-renderer__result-name", class: n13.moreResultsItem }, s9);
  }
  renderMoreResultsLists() {
    var _a;
    const e9 = (_a = this.viewModel) == null ? void 0 : _a.results, { resultCount: s9 } = this.viewModel;
    if (s9 < 2)
      return null;
    const r4 = e9.map((e10) => this.renderMoreResultsList(e10));
    return n3("div", { key: "esri-search-renderer__more-results-container", class: n13.moreResultsList }, r4);
  }
  renderMoreResultsButton() {
    const { messages: e9 } = this, { resultCount: s9 } = this.viewModel;
    return s9 < 2 ? null : n3("div", { key: "esri-search-renderer__more-results-button", class: n13.moreResultsItem }, n3("a", { class: n13.anchor, href: "#", bind: this, onclick: this._showMoreResultsClick, onkeydown: this._showMoreResultsClick }, this.showMoreResultsOpen ? e9.hideMoreResults : e9.showMoreResults));
  }
  renderMoreResultsHeader(e9, s9) {
    return n3("div", { key: `esri-search-result-renderer__header-${s9}`, class: n13.moreResultsListHeader }, e9);
  }
  renderMoreResultsList(e9) {
    var _a, _b;
    const { results: s9 } = e9, r4 = s9.length, t7 = !!r4, o7 = (_a = this.viewModel) == null ? void 0 : _a.selectedResult, l7 = 1 === r4 && s9[0] === o7, i7 = this._getSourceName(e9.source, e9.sourceIndex), n14 = ((_b = this.viewModel) == null ? void 0 : _b.results.length) > 1 && !l7 ? this.renderMoreResultsHeader(i7, e9.sourceIndex) : null, c10 = t7 && s9.map((e10, s10) => this.renderMoreResultsListItem(e10, s10)), d9 = t7 && !l7 ? n3("ul", { key: `esri-search-result-renderer__list-${e9.sourceIndex}` }, c10) : null;
    return t7 ? n3("div", { key: `esri-search-result-renderer__results-${e9.sourceIndex}` }, n14, d9) : null;
  }
  renderMoreResultsListItem(e9, s9) {
    return e9 !== this.get("viewModel.selectedResult") ? n3("li", { key: `esri-search-result-renderer__list-item-${s9}` }, n3("a", { class: n13.anchor, href: "#", tabindex: "0", bind: this, "data-result": e9, onclick: this._selectResultClick, onkeydown: this._selectResultClick }, e9.name)) : null;
  }
  _showMoreResultsClick(e9) {
    e9.preventDefault(), this.showMoreResultsOpen = !this.showMoreResultsOpen;
    const s9 = this.get("viewModel.view.popup");
    s9 && s9.reposition();
  }
  _selectResultClick(e9) {
    e9.preventDefault();
    const s9 = e9.currentTarget["data-result"];
    this.viewModel && this.viewModel.select(s9);
  }
  _getSourceName(e9, s9) {
    return s9 === re.ALL_INDEX ? this.messages.all : e9.name;
  }
};
e([d(), e3("esri/widgets/Search/t9n/Search")], c9.prototype, "messages", void 0), e([d()], c9.prototype, "showMoreResultsOpen", void 0), e([d()], c9.prototype, "viewModel", void 0), e([t2()], c9.prototype, "_showMoreResultsClick", null), e([t2()], c9.prototype, "_selectResultClick", null), c9 = e([n("esri.widgets.Search.SearchResultRenderer")], c9);
var d8 = c9;

// node_modules/@arcgis/core/widgets/Search.js
var S4 = { base: "esri-search esri-widget", loader: "esri-widget__loader", loaderText: "esri-widget__loader-text", loaderAnimation: "esri-widget__loader-animation", esriInput: "esri-input", hasMultipleSources: "esri-search--multiple-sources", isLoading: "esri-search--loading", isSearching: "esri-search--searching", showSuggestions: "esri-search--show-suggestions", showSources: "esri-search--sources", showWarning: "esri-search--warning", container: "esri-search__container", input: "esri-search__input", inputContainer: "esri-search__input-container", form: "esri-search__form", submitButton: "esri-search__submit-button", sourcesButton: "esri-search__sources-button", clearButton: "esri-search__clear-button", sourceName: "esri-search__source-name", suggestionsMenu: "esri-search__suggestions-menu", suggestionList: "esri-search__suggestions-list", suggestionListCurrentLocation: "esri-search__suggestions-list--current-location", sourcesMenu: "esri-search__sources-menu", source: "esri-search__source", warningMenu: "esri-search__warning-menu", warningMenuBody: "esri-search__warning-body", warningMenuHeader: "esri-search__warning-header", warningMenuText: "esri-search__warning-text", noValueText: "esri-search__no-value-text", esriWidgetDisabled: "esri-widget--disabled", button: "esri-widget--button", fallbackText: "esri-icon-font-fallback-text", header: "esri-widget__heading", locate: "esri-icon-locate-circled", menu: "esri-menu", menuList: "esri-menu__list", menuItem: "esri-menu__list-item", menuItemActive: "esri-menu__list-item--active", menuItemFocus: "esri-menu__list-item--focus", menuHeader: "esri-menu__header", loadingIcon: "esri-icon-loading-indicator esri-rotating", searchIcon: "esri-icon-search", dropdownIcon: "esri-icon-down-arrow esri-search__sources-button--down", dropupIcon: "esri-icon-up-arrow esri-search__sources-button--up", clearIcon: "esri-icon-close", noticeIcon: "esri-icon-notice-triangle", widgetIcon: "esri-icon-search", disabled: "esri-disabled" };
var w4 = /<[a-z/][\s\S]*>/i;
var b4 = class extends O {
  constructor(e9, t7) {
    super(e9, t7), this._activeMenuItemIndex = -1, this._handles = new u(), this._inputNode = null, this._menuItemCount = 0, this._sourceMenuButtonNode = null, this._sourceListNode = null, this._suggestionListNode = null, this._searchResultRenderer = new d8(), this._locateFailed = null, this._container = null, this.activeMenu = "none", this.activeSource = null, this.activeSourceIndex = null, this.allPlaceholder = null, this.allSources = null, this.autoNavigate = null, this.autoSelect = null, this.defaultSources = null, this.disabled = false, this.goToOverride = null, this.iconClass = S4.widgetIcon, this.includeDefaultSources = null, this.label = void 0, this.locationEnabled = null, this.maxResults = null, this.maxSuggestions = null, this.messages = null, this.messagesCommon = null, this.minSuggestCharacters = null, this.popupEnabled = null, this.popupTemplate = null, this.portal = null, this.resultGraphic = null, this.resultGraphicEnabled = null, this.results = null, this.searchAllEnabled = null, this.searchTerm = null, this.selectedResult = null, this.sources = null, this.suggestions = null, this.suggestionsEnabled = null, this.view = null, this.viewModel = new re(), this._clearActiveMenu = () => {
      this.activeMenu = "none";
    }, this._removeActiveMenu = (e10) => {
      var _a;
      const t8 = e10.relatedTarget;
      t8 && ((_a = this._container) == null ? void 0 : _a.contains(t8)) || this._clearActiveMenu();
    }, this.own([l2(() => this.searchTerm, (e10) => {
      (e10 && "warning" === this.activeMenu || !e10 && !this.get("viewModel.selectedSuggestion.location")) && this._clearActiveMenu();
    }), a2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.allSources;
    }, "change", () => this._watchSourceChanges()), l2(() => this.activeMenu, () => this._resetActiveMenuItemIndex(), h), l2(() => {
      var _a;
      return (_a = this.viewModel) == null ? void 0 : _a.defaultPopupTemplate;
    }, (e10) => {
      e10 && (e10.content = this._renderSearchResultsContent.bind(this));
    }, h)]);
  }
  destroy() {
    this._handles.destroy(), this._handles = null, this._cancelSuggest(), this._cancelSearch(), this._searchResultRenderer && (this._searchResultRenderer.viewModel = null, this._searchResultRenderer.destroy(), this._searchResultRenderer = null);
  }
  get displayedSearchTerm() {
    return `${this.viewModel.searchTerm}`.trim();
  }
  get inputId() {
    return this._buildId("input");
  }
  get suggestionsMenuId() {
    return this._buildId("suggest-menu");
  }
  get sourceMenuId() {
    return this._buildId("source-menu");
  }
  get sourceMenuButtonId() {
    return this._buildId("source-menu-button");
  }
  clear() {
  }
  focus() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.focus(), this.emit("search-focus");
  }
  blur() {
    var _a;
    (_a = this._inputNode) == null ? void 0 : _a.blur(), this.emit("search-blur");
  }
  search(e9) {
    this._clearActiveMenu(), this._cancelSuggest(), this._cancelSearch();
    const t7 = new AbortController(), { signal: s9 } = t7;
    return this._searchController = t7, this.viewModel.search(e9, { signal: s9 }).catch((e10) => {
      if (this._searchController === t7)
        return this._clearActiveMenu(), this._searchController = null, e10;
    }).then((e10) => {
      if (this._searchController === t7)
        return this.activeMenu = e10.numResults ? "none" : "warning", this._searchController = null, e10;
    });
  }
  suggest(e9) {
    this._cancelSuggest();
    const t7 = new AbortController(), { signal: s9 } = t7;
    return this._suggestController = t7, this.viewModel.suggest(e9, null, { signal: s9 }).then((e10) => {
      if (this._suggestController === t7)
        return this._suggestController = null, e10.numResults && this._openSuggestionMenu(), this._scrollToTopSuggestion(), e10;
    }).catch(() => {
      if (this._suggestController === t7)
        return this._suggestController = null, null;
    });
  }
  render() {
    const { state: e9 } = this.viewModel, t7 = { [S4.disabled]: "disabled" === e9, [S4.esriWidgetDisabled]: this.disabled };
    return n3("div", { class: this.classes(S4.base, t7) }, "loading" === e9 ? this.renderLoader() : this.renderContainer());
  }
  renderSubmitButton() {
    const { messages: e9, disabled: t7 } = this;
    return n3("button", { "aria-label": e9.searchButtonTitle, bind: this, disabled: t7, class: this.classes(S4.submitButton, S4.button), key: "esri-search__submit-button", onclick: this._handleSearchButtonClick, title: e9.searchButtonTitle, type: "button" }, n3("span", { "aria-hidden": "true", class: S4.searchIcon }));
  }
  renderWarningMenu() {
    return n3("div", { key: "esri-search__error-menu", class: this.classes(S4.menu, S4.warningMenu) }, n3("div", { class: S4.warningMenuBody }, this.renderWarning()));
  }
  renderSourceMenuButton() {
    const { messages: e9, activeMenu: t7, sourceMenuId: s9, sourceMenuButtonId: i7, disabled: r4 } = this, { activeSourceIndex: n14, allSources: o7 } = this.viewModel;
    return o7.length > 1 ? n3("button", { id: i7, key: "esri-search__source-menu-button", bind: this, disabled: r4, "aria-label": e9.searchIn, title: e9.searchIn, "aria-haspopup": "true", "aria-expanded": ("source" === t7).toString(), "aria-controls": s9, class: this.classes(S4.sourcesButton, S4.button), onclick: this._handleSourcesMenuToggleClick, onfocus: this._handleSourcesMenuToggleFocus, afterCreate: v2, "data-node-ref": "_sourceMenuButtonNode", type: "button" }, n3("span", { "aria-hidden": "true", class: S4.dropdownIcon }), n3("span", { "aria-hidden": "true", class: S4.dropupIcon }), n3("span", { class: S4.sourceName }, this._getSourceName(n14))) : null;
  }
  renderSourcesList() {
    const { allSources: e9, searchAllEnabled: t7 } = this.viewModel, { _activeMenuItemIndex: s9, activeMenu: i7, sourceMenuId: r4, sourceMenuButtonId: n14 } = this, o7 = "source" === i7 && s9 > -1 ? this._buildId("source-item", s9) : null;
    return e9.length > 1 ? n3("ul", { "aria-activedescendant": o7, "aria-labelledby": n14, id: r4, role: "menu", bind: this, afterCreate: v2, onkeydown: this._handleSourceMenuKeydown, onkeyup: this._handleSourceMenuKeyup, "data-node-ref": "_sourceListNode", class: S4.menuList, tabIndex: -1 }, t7 ? this.renderSource(re.ALL_INDEX) : null, e9.map((e10, t8) => this.renderSource(t8)).toArray()) : null;
  }
  renderSourcesMenu() {
    const { allSources: e9 } = this.viewModel;
    return e9.length > 1 ? n3("div", { key: "esri-search__source-menu", class: this.classes(S4.menu, S4.sourcesMenu) }, this.renderSourcesList()) : null;
  }
  renderLoader() {
    const { messages: e9, messagesCommon: t7, disabled: s9 } = this;
    return n3("div", { class: S4.loader, key: "base-loader", tabIndex: s9 ? -1 : null }, n3("span", { "aria-hidden": "true", class: S4.loaderAnimation }), n3("span", { class: S4.fallbackText }, e9.searchButtonTitle), n3("span", { class: S4.loaderText }, t7.loading));
  }
  renderContainer() {
    const { allSources: e9, state: t7 } = this.viewModel, { activeMenu: s9 } = this, i7 = { [S4.hasMultipleSources]: e9.length > 1, [S4.isLoading]: "loading" === t7, [S4.isSearching]: "searching" === t7, [S4.showWarning]: "warning" === s9, [S4.showSources]: "source" === s9, [S4.showSuggestions]: "suggestion" === s9 };
    return n3("div", { tabIndex: -1, afterCreate: (e10) => {
      this._container = e10, e10.addEventListener("focusout", this._removeActiveMenu);
    }, afterRemoved: (e10) => {
      e10.removeEventListener("focusout", this._removeActiveMenu);
    }, class: this.classes(i7, S4.container), key: "base-container" }, this.renderSourceMenuButton(), this.renderSourcesMenu(), this.renderInputContainer(), this.renderSubmitButton(), this.renderWarningMenu());
  }
  renderClearButton() {
    return this.searchTerm ? n3("button", { bind: this, disabled: this.disabled, class: this.classes(S4.clearButton, S4.button), key: "esri-search__clear-button", onclick: this._handleClearButtonClick, onfocus: this._clearActiveMenu, title: this.messages.clearButtonTitle, type: "button" }, n3("span", { "aria-hidden": "true", class: S4.clearIcon })) : null;
  }
  renderLocationGroup() {
    const { messages: e9, locationEnabled: t7, displayedSearchTerm: s9 } = this, i7 = t7 && !s9, r4 = "suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex;
    return i7 ? n3("ul", { role: "group", key: "esri-search__suggestion-list-current-location", class: this.classes(S4.menuList, S4.suggestionList, S4.suggestionListCurrentLocation) }, n3("li", { bind: this, "data-current-location-item": true, onclick: this._handleUseCurrentLocationClick, id: this._buildId("suggestion-item", 0), "aria-selected": ("suggestion" === this.activeMenu && 0 === this._activeMenuItemIndex).toString(), role: "option", class: this.classes(S4.menuItem, r4 ? S4.menuItemFocus : null) }, n3("span", { "aria-hidden": "true", class: S4.locate }), " ", e9.useCurrentLocation)) : null;
  }
  renderInput() {
    const { activeMenu: e9, locationEnabled: t7, displayedSearchTerm: s9, messages: i7, suggestionsMenuId: r4, inputId: n14, _activeMenuItemIndex: o7, disabled: a8 } = this, { maxInputLength: u4, placeholder: l7, searchTerm: c10, suggestionCount: d9 } = this.viewModel, h6 = !(!(t7 && !s9) && !d9), p10 = "suggestion" === e9 && o7 > -1 ? this._buildId("suggestion-item", o7) : null;
    return n3("input", { "aria-activedescendant": p10, "aria-autocomplete": "list", "aria-expanded": (h6 && "suggestion" === e9).toString(), "aria-controls": h6 ? r4 : null, "aria-haspopup": "listbox", "aria-label": i7.searchButtonTitle, bind: this, disabled: a8, placeholder: l7, maxlength: u4, autocomplete: "off", type: "text", class: this.classes(S4.esriInput, S4.input), value: c10, id: n14, role: "combobox", onkeyup: this._handleInputKeyup, onclick: this._openSuggestionMenu, oninput: this._handleInputPaste, onpaste: this._handleInputPaste, afterCreate: v2, "data-node-ref": "_inputNode", onfocus: this.focus, onblur: this.blur, title: c10 ? "" : l7 });
  }
  renderForm() {
    return n3("form", { key: "esri-search__form", bind: this, disabled: this.disabled, class: S4.form, onsubmit: this._formSubmit, role: "search" }, this.renderInput());
  }
  renderSuggestList(e9) {
    const { sourceIndex: t7 } = e9, s9 = e9.results.length, i7 = e9.results;
    return s9 ? n3("ul", { role: "group", key: `esri-search__suggestion-list-${t7}`, class: this.classes(S4.menuList, S4.suggestionList) }, i7.map((e10) => this.renderSuggestion(e10, this._menuItemCount++))) : null;
  }
  renderSuggestionsGroup() {
    const { suggestions: e9 } = this.viewModel;
    return e9 ? e9.map((e10) => [this.renderSuggestionHeader(e10), this.renderSuggestList(e10)]) : null;
  }
  renderSuggestionsMenu() {
    const { displayedSearchTerm: e9, locationEnabled: t7, suggestionsMenuId: s9, inputId: i7 } = this, { suggestionCount: r4 } = this.viewModel, n14 = t7 && !e9 || r4;
    return this._menuItemCount = 0, n14 ? n3("div", { id: s9, key: "esri-search__suggestions-menu", class: this.classes(S4.menu, S4.suggestionsMenu), role: "listbox", "aria-labelledby": i7, bind: this, afterCreate: v2, "data-node-ref": "_suggestionListNode" }, this.renderLocationGroup(), this.renderSuggestionsGroup()) : null;
  }
  renderInputContainer() {
    return n3("div", { key: "esri-search__input-container", class: S4.inputContainer }, this.renderForm(), this.renderSuggestionsMenu(), this.renderClearButton());
  }
  renderSuggestionHeader(e9) {
    const { allSources: t7, activeSourceIndex: s9 } = this.viewModel, { sourceIndex: i7 } = e9, r4 = e9.results.length, n14 = t7.length > 1 && s9 === re.ALL_INDEX;
    return r4 && n14 ? n3("div", { key: `esri-search__suggestion-header-${i7}`, class: S4.menuHeader }, this._getSourceName(i7)) : null;
  }
  renderSuggestion(e9, t7) {
    const { _activeMenuItemIndex: s9, messages: i7 } = this, { searchTerm: r4 } = this.viewModel;
    if (r4) {
      const { text: n14 } = e9, o7 = n14 || i7.untitledResult, a8 = w4.test(o7), u4 = [];
      if (a8)
        u4.push(n3("div", { innerHTML: o7 }));
      else {
        const e10 = this._splitResult(o7, r4), t8 = r4.toLowerCase();
        e10.forEach((e11, s10) => {
          e11 && e11.length && (e11.toLowerCase() === t8 ? u4.push(n3("strong", { key: s10 }, e11)) : u4.push(e11));
        });
      }
      const l7 = "suggestion" === this.activeMenu && s9 === t7;
      return n3("li", { bind: this, id: this._buildId("suggestion-item", t7), "aria-selected": ("suggestion" === this.activeMenu && this._activeMenuItemIndex === t7).toString(), onclick: this._handleSuggestionClick, key: `esri-search__suggestion_${t7}`, "data-suggestion": e9, role: "option", class: this.classes(S4.menuItem, l7 ? S4.menuItemFocus : null) }, u4);
    }
  }
  renderSource(e9) {
    const { activeSourceIndex: t7, searchAllEnabled: s9 } = this.viewModel, i7 = { [S4.menuItemActive]: e9 === t7, [S4.menuItemFocus]: "source" === this.activeMenu && e9 === (s9 ? this._activeMenuItemIndex - 1 : this._activeMenuItemIndex) }, r4 = s9 ? e9 + 1 : e9;
    return n3("li", { bind: this, key: `esri-search__source-${e9}`, id: this._buildId("source-item", r4), "aria-checked": (e9 === t7).toString(), onclick: this._handleSourceClick, "data-source-index": e9, role: "menuitemradio", class: this.classes(S4.source, S4.menuItem, i7) }, this._getSourceName(e9));
  }
  renderNoResultsWarning(e9) {
    const { messages: t7 } = this, s9 = e9 ? s5(t7.noResultsFoundForValue, { value: `"${e9}"` }) : t7.noResultsFound;
    return n3("div", { key: "esri-search__no_results" }, n3("div", { class: S4.warningMenuHeader }, t7.noResults), n3("div", { class: S4.warningMenuText }, s9));
  }
  renderEmptySearchWarning() {
    const { messages: e9 } = this;
    return n3("div", { key: "esri-search__empty-search" }, n3("span", { "aria-hidden": "true", class: S4.noticeIcon }), n3("span", { class: S4.noValueText }, e9.emptyValue));
  }
  renderLocateWarning() {
    const { messages: e9 } = this;
    return n3("div", { key: "esri-search__locate-error" }, n3("span", { "aria-hidden": "true", class: S4.noticeIcon }), n3("span", { class: S4.noValueText }, e9.locateError));
  }
  renderWarning() {
    var _a;
    const { displayedSearchTerm: e9, _locateFailed: t7 } = this, { viewModel: s9 } = this;
    return t7 ? this.renderLocateWarning() : ((_a = s9.selectedSuggestion) == null ? void 0 : _a.location) || e9 ? this.renderNoResultsWarning(e9) : this.renderEmptySearchWarning();
  }
  _resetActiveMenuItemIndex() {
    this._activeMenuItemIndex = -1;
  }
  _buildId(e9, t7) {
    return `${this.id}-${e9}${void 0 === t7 ? "" : `-${t7}`}`;
  }
  _watchSourceChanges() {
    const { _handles: e9, viewModel: { allSources: t7 } } = this, s9 = "sources";
    e9.remove(s9), t7.forEach((t8) => e9.add(l2(() => t8.name, () => this.scheduleRender()), s9));
  }
  _handleSourcesMenuToggleFocus() {
    "source" !== this.activeMenu && this._clearActiveMenu();
  }
  _handleSourcesMenuToggleClick() {
    var _a;
    const e9 = "source" === this.activeMenu;
    this.activeMenu = e9 ? "none" : "source", this.renderNow(), "source" === this.activeMenu && ((_a = this._sourceListNode) == null ? void 0 : _a.focus());
  }
  _handleClearButtonClick() {
    this.viewModel.clear(), this._focus();
  }
  _handleSearchButtonClick() {
    this.search();
  }
  _handleSuggestionClick(e9) {
    const t7 = e9.currentTarget["data-suggestion"];
    t7 && (this._focus(), this.search(t7));
  }
  _handleUseCurrentLocationClick() {
    this._useCurrentLocation();
  }
  _useCurrentLocation() {
    this._focus("none"), this._cancelSuggest(), this._cancelSearch();
    const e9 = new AbortController(), { signal: t7 } = e9;
    this._searchController = e9, this.viewModel.searchNearby({ signal: t7 }).then((e10) => {
      this.activeMenu = e10.numResults ? "none" : "warning";
    }).catch(() => {
      this._locateFailed = true, this.activeMenu = "warning";
    }).then(() => {
      this._searchController = null;
    });
  }
  _handleSourceClick(e9) {
    this._setSourceFromMenuItem(e9.currentTarget);
  }
  _setSourceFromMenuItem(e9) {
    var _a;
    if (!e9)
      return;
    const t7 = e9["data-source-index"];
    this.viewModel.activeSourceIndex = t7, this._clearActiveMenu(), (_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus();
  }
  _cancelSuggest() {
    this._suggestController && (this._suggestController.abort(), this._suggestController = null);
  }
  _cancelSearch() {
    this._searchController && (this._searchController.abort(), this._searchController = null), this._locateFailed = false;
  }
  _handleInputKeyup(e9) {
    var _a;
    const s9 = i(e9);
    if (e9.ctrlKey || e9.metaKey || "Copy" === s9 || "ArrowLeft" === s9 || "ArrowRight" === s9 || "Shift" === s9)
      return;
    if ("Tab" === s9 || "Escape" === s9 || e9.shiftKey && "Tab" === s9)
      return this._cancelSuggest(), void ("Escape" === s9 && this._clearActiveMenu());
    const i7 = "Home" === s9 || "End" === s9 || "ArrowUp" === s9 || "ArrowDown" === s9;
    if ("Enter" === s9 && this._activeMenuItemIndex < 0)
      return void this._cancelSuggest();
    const r4 = (_a = this._suggestionListNode) == null ? void 0 : _a.getElementsByTagName("li");
    if (r4 == null ? void 0 : r4.length) {
      if ("suggestion" !== this.activeMenu && this._openSuggestionMenu(), i7)
        return e9.preventDefault(), this._cancelSuggest(), void this._handleItemNavigation(s9, r4, this._suggestionListNode);
      const t7 = r4[this._activeMenuItemIndex];
      if ("Enter" === s9 && t7) {
        const e10 = t7["data-suggestion"];
        return void (e10 ? (this._focus(), this.search(e10)) : t7["data-current-location-item"] && this._useCurrentLocation());
      }
    }
    this.viewModel.searchTerm && this.suggest();
  }
  _handleItemNavigation(e9, t7, s9) {
    const i7 = this._activeMenuItemIndex;
    "Home" === e9 && (this._activeMenuItemIndex = 0), "End" === e9 && (this._activeMenuItemIndex = t7.length - 1), "ArrowUp" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex <= 0 ? t7.length - 1 : this._activeMenuItemIndex - 1), "ArrowDown" === e9 && (this._activeMenuItemIndex = this._activeMenuItemIndex === t7.length - 1 ? 0 : this._activeMenuItemIndex + 1), i7 !== this._activeMenuItemIndex && A(t7[this._activeMenuItemIndex], s9);
  }
  _scrollToTopSuggestion() {
    this._suggestionListNode && (this._suggestionListNode.scrollTop = 0);
  }
  _openSuggestionMenu() {
    this.activeMenu = "suggestion";
  }
  _handleInputPaste(e9) {
    const t7 = e9.target;
    this.viewModel.searchTerm !== t7.value && (this.viewModel.searchTerm = t7.value), this.viewModel.searchTerm && this.suggest();
  }
  _handleSourceMenuKeydown(e9) {
    const s9 = i(e9);
    if (k2(s9)) {
      e9.preventDefault();
      const t7 = this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];
      this._setSourceFromMenuItem(t7);
    } else
      "ArrowUp" !== s9 && "ArrowDown" !== s9 && "End" !== s9 && "Home" !== s9 || e9.preventDefault();
  }
  _handleSourceMenuKeyup(e9) {
    var _a, _b;
    const s9 = i(e9), i7 = "ArrowUp" === s9 || "ArrowDown" === s9 || "End" === s9 || "Home" === s9;
    if (i7 && e9.preventDefault(), "Escape" === s9)
      return this._clearActiveMenu(), void ((_a = this._sourceMenuButtonNode) == null ? void 0 : _a.focus());
    const r4 = (_b = this._sourceListNode) == null ? void 0 : _b.getElementsByTagName("li");
    return r4 && 0 !== r4.length && i7 ? ("source" !== this.activeMenu && (this.activeMenu = "source"), void this._handleItemNavigation(s9, r4, this._sourceListNode.parentElement)) : void 0;
  }
  _focus(e9) {
    this.focus(), e9 && (this.activeMenu = e9);
  }
  _formSubmit(e9) {
    e9.preventDefault(), -1 === this._activeMenuItemIndex && this.search();
  }
  _getSourceName(e9) {
    const { messages: t7 } = this, s9 = this.viewModel, { allSources: i7 } = s9, r4 = i7.getItemAt(e9);
    return e9 === re.ALL_INDEX ? t7.all : r4 && r4.name || t7.untitledSource;
  }
  _splitResult(e9, t7) {
    const s9 = o(t7);
    return e9.replace(new RegExp(`(^|)(${s9})(|$)`, "ig"), "$1|$2|$3").split("|");
  }
  _renderSearchResultsContent() {
    return this._searchResultRenderer.showMoreResultsOpen = false, this._searchResultRenderer.viewModel = this.viewModel, this._searchResultRenderer;
  }
};
e([d()], b4.prototype, "_activeMenuItemIndex", void 0), e([d()], b4.prototype, "displayedSearchTerm", null), e([d({ readOnly: true })], b4.prototype, "inputId", null), e([d({ readOnly: true })], b4.prototype, "suggestionsMenuId", null), e([d({ readOnly: true })], b4.prototype, "sourceMenuId", null), e([d({ readOnly: true })], b4.prototype, "sourceMenuButtonId", null), e([d()], b4.prototype, "activeMenu", void 0), e([o2("viewModel.activeSource")], b4.prototype, "activeSource", void 0), e([o2("viewModel.activeSourceIndex")], b4.prototype, "activeSourceIndex", void 0), e([o2("viewModel.allPlaceholder")], b4.prototype, "allPlaceholder", void 0), e([o2("viewModel.allSources")], b4.prototype, "allSources", void 0), e([o2("viewModel.autoNavigate")], b4.prototype, "autoNavigate", void 0), e([o2("viewModel.autoSelect")], b4.prototype, "autoSelect", void 0), e([o2("viewModel.defaultSources")], b4.prototype, "defaultSources", void 0), e([d()], b4.prototype, "disabled", void 0), e([o2("viewModel.goToOverride")], b4.prototype, "goToOverride", void 0), e([d()], b4.prototype, "iconClass", void 0), e([o2("viewModel.includeDefaultSources")], b4.prototype, "includeDefaultSources", void 0), e([d({ aliasOf: { source: "messages.widgetLabel", overridable: true } })], b4.prototype, "label", void 0), e([o2("viewModel.locationEnabled")], b4.prototype, "locationEnabled", void 0), e([o2("viewModel.maxResults")], b4.prototype, "maxResults", void 0), e([o2("viewModel.maxSuggestions")], b4.prototype, "maxSuggestions", void 0), e([d(), e3("esri/widgets/Search/t9n/Search")], b4.prototype, "messages", void 0), e([d(), e3("esri/t9n/common")], b4.prototype, "messagesCommon", void 0), e([o2("viewModel.minSuggestCharacters")], b4.prototype, "minSuggestCharacters", void 0), e([o2("viewModel.popupEnabled")], b4.prototype, "popupEnabled", void 0), e([o2("viewModel.popupTemplate")], b4.prototype, "popupTemplate", void 0), e([o2("viewModel.portal")], b4.prototype, "portal", void 0), e([o2("viewModel.resultGraphic")], b4.prototype, "resultGraphic", void 0), e([o2("viewModel.resultGraphicEnabled")], b4.prototype, "resultGraphicEnabled", void 0), e([o2("viewModel.results")], b4.prototype, "results", void 0), e([o2("viewModel.searchAllEnabled")], b4.prototype, "searchAllEnabled", void 0), e([o2("viewModel.searchTerm")], b4.prototype, "searchTerm", void 0), e([o2("viewModel.selectedResult")], b4.prototype, "selectedResult", void 0), e([o2("viewModel.sources")], b4.prototype, "sources", void 0), e([o2("viewModel.suggestions")], b4.prototype, "suggestions", void 0), e([o2("viewModel.suggestionsEnabled")], b4.prototype, "suggestionsEnabled", void 0), e([o2("viewModel.view")], b4.prototype, "view", void 0), e([t3(["search-complete", "search-clear", "search-start", "select-result", "suggest-start", "suggest-complete"]), d({ type: re })], b4.prototype, "viewModel", void 0), e([o2("viewModel.clear")], b4.prototype, "clear", null), b4 = e([n("esri.widgets.Search")], b4);
var y5 = b4;
export {
  y5 as default
};
//# sourceMappingURL=@arcgis_core_widgets_Search.js.map
