{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{isSome as s}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{unpackFieldNames as o,populateMissingFields as p}from\"../../../../layers/support/fieldUtils.js\";import{getFetchPopupTemplate as a,getRequiredFields as i}from\"../../../layers/support/popupUtils.js\";const c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new r(\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return a(s,e)?void 0:new r(\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)throw t;const c=s(r)?r.clientGraphics:null;if(!c||0===c.length)return[];const u=\"scene\"===this.layer.type&&s(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=o(this.layer.fieldsIndex,await i(u,a(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)p(n,s,l)?y.push(s):h.push(s);return 0===y.length?h:this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=e([t(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};export{c as PopupSceneLayerView};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAIgoB,IAAM,IAAE,CAAAA,OAAG;AAAC,MAAI,IAAE,cAAcA,GAAC;AAAA,IAAC,4BAA4BC,IAAE;AAAC,YAAK,EAAC,OAAMC,GAAC,IAAE,MAAK,EAAC,cAAa,EAAC,IAAEA;AAAE,UAAG,CAAC;AAAE,eAAO,IAAI,EAAE,uCAAsC,uBAAsB,EAAC,OAAMA,GAAC,CAAC;AAAE,aAAOA,GAAEA,IAAED,EAAC,IAAE,SAAO,IAAI,EAAE,uCAAsC,0CAAyC,EAAC,OAAMC,GAAC,CAAC;AAAA,IAAC;AAAA,IAAC,MAAM,0BAA0BD,IAAE;AAAA,IAAC;AAAA,IAAC,MAAM,mBAAmBA,IAAEE,IAAE;AAAC,YAAM,IAAE,KAAK,4BAA4BA,EAAC;AAAE,UAAG;AAAE,cAAM;AAAE,YAAMH,KAAE,EAAEG,EAAC,IAAEA,GAAE,iBAAe;AAAK,UAAG,CAACH,MAAG,MAAIA,GAAE;AAAO,eAAM,CAAC;AAAE,YAAMI,KAAE,YAAU,KAAK,MAAM,QAAM,EAAE,KAAK,MAAM,eAAe,IAAE,KAAK,MAAM,kBAAgB,KAAK,OAAMC,KAAE,EAAE,KAAK,MAAM,aAAY,MAAM,EAAED,IAAEF,GAAE,KAAK,OAAMC,EAAC,CAAC,CAAC;AAAE,YAAM,KAAK,0BAA0BE,EAAC;AAAE,YAAM,IAAE,oBAAI,OAAI,IAAE,CAAC,GAAE,IAAE,CAAC;AAAE,iBAAUH,MAAKF;AAAE,WAAEK,IAAEH,IAAE,CAAC,IAAE,EAAE,KAAKA,EAAC,IAAE,EAAE,KAAKA,EAAC;AAAE,aAAO,MAAI,EAAE,SAAO,IAAE,KAAK,sBAAsB,GAAE,CAAC,GAAG,CAAC,CAAC,EAAE,MAAO,MAAI,CAAE,EAAE,KAAM,CAAAD,OAAG,EAAE,OAAOA,EAAC,CAAE;AAAA,IAAC;AAAA,EAAC;AAAE,SAAO,IAAE,EAAE,CAAC,EAAE,kDAAkD,CAAC,GAAE,CAAC,GAAE;AAAC;",
  "names": ["c", "e", "s", "r", "u", "n"]
}
