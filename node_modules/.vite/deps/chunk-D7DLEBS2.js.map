{
  "version": 3,
  "sources": ["../../@arcgis/core/support/arcadeOnDemand.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport\"../geometry.js\";import{isSome as e}from\"../core/maybe.js\";import r from\"../geometry/SpatialReference.js\";let t;function a(){return t||(t=(async()=>{const e=await import(\"./arcadeUtils.js\");return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),t}const s=(e,r,t)=>o.create(e,r,t,null,[\"$feature\"]),i=(e,r,t)=>o.create(e,r,t,null,[\"$feature\",\"$view\"]),c=i,n=(e,r,t,a)=>o.create(e,r,t,a,[\"$feature\",\"$view\"]);class o{constructor(e,r,t,a,s,i,c,n){this.script=e,this.evaluate=s;const o=Array.isArray(c)?c:c.fields;this.fields=o,this._syntaxTree=a,this._arcade=r,this._arcadeDictionary=t,this._arcadeFeature=i,this._spatialReference=n,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,\"scale\")}static async create(t,s,i,c,n,l){const{arcade:u,Feature:p,Dictionary:y}=await a(),f=r.fromJSON(s),m=u.parseScript(t,l),h=n.reduce(((e,r)=>({...e,[r]:null})),{});let d=null;e(c)&&(d=new y(c),d.immutable=!0,h.$config=null);const _=u.scriptUsesGeometryEngine(m)&&u.enableGeometrySupport(),F=u.scriptUsesFeatureSet(m)&&u.enableFeatureSetSupport(),w=u.scriptIsAsync(m)&&u.enableAsyncSupport(),S={vars:h,spatialReference:f,useAsync:!!w},b=new y;b.immutable=!1,b.setField(\"scale\",0);const $=u.compileScript(m,S),x=e=>(\"$view\"in e&&e.$view&&(b.setField(\"scale\",e.$view.scale),e.$view=b),d&&(e.$config=d),$({vars:e,spatialReference:f}));return await Promise.all([_,F,w]),new o(t,u,y,m,x,new p,i,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}export{o as ArcadeExpression,n as createDictionaryExpression,s as createLabelExpression,i as createRendererExpression,c as createVVExpression,a as loadArcade};\n"],
  "mappings": "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",
  "names": ["r", "t", "r", "t", "a", "s", "i", "n", "o"]
}
