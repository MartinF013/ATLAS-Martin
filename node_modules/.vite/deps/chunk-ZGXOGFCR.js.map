{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/coordinateSystem.js", "../../@arcgis/core/views/3d/support/RenderCoordsHelper.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{c as t}from\"../../chunks/mat4.js\";import{s as n,e,c as o,n as r,f as u}from\"../../chunks/vec3.js\";import{c as i}from\"../../chunks/vec3f64.js\";import{getSphericalPCPF as a,getReferenceEllipsoid as s}from\"../projectionEllipsoid.js\";import c from\"../SpatialReference.js\";import{Axis as l}from\"./Axis.js\";import{f,b as p}from\"../../chunks/boundedPlane.js\";import{f as v,s as m}from\"../../chunks/sphere.js\";function h(t){const{value:n,operations:e}=t;return{operations:e,value:e.create(n)}}function j(t,n,e){return t.operations.setExtent(t.value,n,e.value),e}function d(t){return{operations:t,value:t.create()}}function A(t,n,e=d(t)){return e.operations=t,t.copy(n,e.value),e}function k(t){return A(m,v(0,0,0,s(t).radius))}const x=2**50;function y(){return A(p,f([0,0,0],[x,0,0],[0,x,0]))}function P(t,n){return B.operations=t,B.value=n,B}function R(t,n,e){return t.operations.axisAt(t.value,n,l.Z,e)}function S(t,n,e,o){return t.operations.axisAt(t.value,n,e,o)}function b(t,n,e){return t.operations.intersectRay(t.value,n,e)}function C(t,n){return t.operations.intersectRay(t.value,n,null)}function E(t,n,e){return t.operations.closestPoint(t.value,n,e)}function g(t,n,e){return t.operations.intersectRayClosestSilhouette(t.value,n,e)}function G(t,n,e){return t.operations.closestPointOnSilhouette(t.value,n,e)}function O(t,n){return t.operations.distanceToSilhouette(t.value,n)}function T(t,n){return t.operations.altitudeAt(t.value,n)}function Z(t,n,e,o){return t.operations.setAltitudeAt(t.value,n,e,o)}function q(e,o,r,u){return o!==u&&t(u,o),n(z,u[12],u[13],u[14]),Z(e,z,r,z),u[12]=z[0],u[13]=z[1],u[14]=z[2],u}function w(t,n,e){return t.operations.elevate(t.value,n,e.value)}const z=i(),B={operations:null,value:null};function D(t,n,o,r,u){return u[0]=e(t,n),u[1]=e(t,o),u[2]=e(t,r),u}function F(t,n,e,i,a){o(e,t),o(I,n),r(I,I),u(i,I,e),u(a,i,e)}function H(t,n){return t?a(n):n.isGeographic?c.PlateCarree:n}const I=i();export{T as altitudeAt,S as axisAt,E as closestPoint,G as closestPointOnSilhouette,F as coordinateSystemFromOneAxisAndNormalVector,h as create,d as createFromOperations,k as createGlobal,y as createLocal,O as distanceToSilhouette,w as elevate,A as fromValues,b as intersectRay,g as intersectRayClosestSilhouette,C as intersectsRay,R as normalAt,H as renderSRFromViewSR,Z as setAltitudeAt,q as setAltitudeOfTransformation,j as setExtent,D as vectorCoordinates,P as wrap};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as e}from\"../../../core/unitUtils.js\";import{s as r}from\"../../../chunks/mat4.js\";import{c as o}from\"../../../chunks/vec3.js\";import{projectPointToVector as s,projectVectorToVector as i,projectVectorToDehydratedPoint as n,projectVectorToPoint as a}from\"../../../geometry/projection.js\";import c from\"../../../geometry/SpatialReference.js\";import{Axis as m}from\"../../../geometry/support/Axis.js\";import{create as l,setExtent as d,altitudeAt as p,setAltitudeAt as u,setAltitudeOfTransformation as h,normalAt as f,axisAt as y,elevate as S,intersectRayClosestSilhouette as g,intersectRay as j,createGlobal as R,createLocal as w,renderSRFromViewSR as A}from\"../../../geometry/support/coordinateSystem.js\";import{intersectRay as M}from\"../../../geometry/support/plane.js\";import{sv3d as _}from\"../../../geometry/support/vectorStacks.js\";import{isDehydratedPoint as b}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";import{ViewingMode as P}from\"../../ViewingMode.js\";import{isSpatialReferenceSupported as v}from\"../../support/spatialReferenceSupport.js\";class x{constructor(t,e,r,o){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=r,this.coordinateSystem=o,this._coordinateSystem=l(o)}set extent(t){t&&d(this.coordinateSystem,t,this.coordinateSystem)}getAltitude(t){return p(this.coordinateSystem,t)}setAltitude(t,e,r=t){return u(this.coordinateSystem,r,e,t)}setAltitudeOfTransformation(t,e){h(this.coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return f(this.coordinateSystem,t,e)}worldBasisAtPosition(t,e,r){return y(this.coordinateSystem,t,e,r)}basisMatrixAtPosition(t,e){const o=this.worldBasisAtPosition(t,m.X,_.get()),s=this.worldBasisAtPosition(t,m.Y,_.get()),i=this.worldBasisAtPosition(t,m.Z,_.get());return r(e,o[0],o[1],o[2],0,s[0],s[1],s[2],0,i[0],i[1],i[2],0,0,0,0,1),e}intersectManifoldClosestSilhouette(t,e,r){return S(this.coordinateSystem,e,this._coordinateSystem),g(this._coordinateSystem,t,r),r}intersectManifold(t,e,r){S(this.coordinateSystem,e,this._coordinateSystem);const s=_.get();return j(this._coordinateSystem,t,s)?o(r,s):null}intersectInfiniteManifold(t,e,r){if(this.viewingMode===P.Global)return this.intersectManifold(t,e,r);S(this.coordinateSystem,e,this._coordinateSystem);const s=this._coordinateSystem.value,i=_.get();return M(s.plane,t,i)?o(r,i):null}toRenderCoords(t,e,r){return b(t)?s(t,e,this.spatialReference):i(t,e,r,this.spatialReference)}fromRenderCoords(e,r,o=null){return b(r)?(t(o)&&(r.spatialReference=o),n(e,this.spatialReference,r)):r instanceof c?a(e,this.spatialReference,r):i(e,this.spatialReference,r,o)?r:null}static create(t,r){switch(t){case P.Local:return new x(P.Local,r,e(r),w());case P.Global:return new x(P.Global,r,1,R(r))}}static renderUnitScaleFactor(t,e){return B(t)/B(e)}}function B(t){if(v(t,P.Global))return 1;const r=A(!1,t);return e(r)}export{x as RenderCoordsHelper};\n"],
  "mappings": "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",
  "names": ["t", "n", "k", "t", "n", "o", "t", "n", "t", "n", "o", "q", "r", "z", "D", "t", "n", "o", "r", "z", "x", "t", "r", "o", "q", "n", "s", "k"]
}
