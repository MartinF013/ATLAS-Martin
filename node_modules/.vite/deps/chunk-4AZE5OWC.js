import {
  a as a2
} from "./chunk-CQSGZXR7.js";
import {
  a
} from "./chunk-2QOWZFCU.js";
import {
  s2 as s
} from "./chunk-HFTNOKM2.js";
import {
  m,
  t
} from "./chunk-G5JBUC5N.js";
import {
  r
} from "./chunk-CBQWMOBK.js";

// node_modules/@arcgis/core/webdoc/support/writeUtils.js
var l = /* @__PURE__ */ new Set(["bing-maps", "imagery", "imagery-tile", "map-image", "open-street-map", "tile", "unknown", "unsupported", "vector-tile", "web-tile", "wms", "wmts"]);
var a3 = /* @__PURE__ */ new Set(["csv", "feature", "geo-rss", "geojson", "group", "imagery", "imagery-tile", "kml", "map-image", "map-notes", "ogc-feature", "route", "tile", "unknown", "unsupported", "vector-tile", "web-tile", "wfs", "wms", "wmts"]);
function p(e) {
  return "basemap" === e.layerContainerType ? l : "operational-layers" === e.layerContainerType ? a3 : null;
}
function c(e, t2) {
  if (t2.restrictedWebMapWriting) {
    const r2 = p(t2);
    return !r(r2) || r2.has(e.type) && !a2(e);
  }
  return true;
}
function u(e, t2) {
  if (a2(e)) {
    const n = t("featureCollection.layers", t2), i = n && n[0] && n[0].layerDefinition;
    i && d(e, i);
  } else if ("stream" === e.type) {
    d(e, t2.layerDefinition = t2.layerDefinition || {});
  } else
    "group" !== e.type && d(e, t2);
}
function d(e, t2) {
  "maxScale" in e && (t2.maxScale = a(e.maxScale)), "minScale" in e && (t2.minScale = a(e.minScale));
}
function f(e, t2) {
  if (u(e, t2), "blendMode" in e && (t2.blendMode = e.blendMode, "normal" === t2.blendMode && delete t2.blendMode), t2.opacity = a(e.opacity), t2.title = e.title || "Layer", t2.visibility = e.visible, "legendEnabled" in e && "wmts" !== e.type)
    if (a2(e)) {
      const n = t2.featureCollection;
      n && (n.showLegend = e.legendEnabled);
    } else
      t2.showLegend = e.legendEnabled;
}
function y(r2, i, o) {
  if (!("write" in r2) || !r2.write)
    return o && o.messages && o.messages.push(new s("layer:unsupported", `Layers (${r2.title}, ${r2.id}) of type '${r2.declaredClass}' cannot be persisted`, { layer: r2 })), null;
  if (c(r2, o)) {
    const e = {};
    return r2.write(e, o) ? e : null;
  }
  return r(i) && f(r2, i = m(i)), i;
}

export {
  y
};
//# sourceMappingURL=chunk-4AZE5OWC.js.map
