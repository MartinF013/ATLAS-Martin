{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/InstanceParameters.js", "../../@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nclass s{constructor(){this.visible=!0}}export{s as InstanceParameters};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{unwrapOr as t,isNone as r,isSome as i}from\"../../../../core/maybe.js\";import{generateUID as s}from\"../../../../core/uid.js\";import{c as a}from\"../../../../chunks/mat4.js\";import{c as n,I as e}from\"../../../../chunks/mat4f64.js\";import{m as o}from\"../../../../chunks/vec3.js\";import{c as h}from\"../../../../chunks/vec4f64.js\";import{maxScale as m}from\"../../support/mathUtils.js\";import{Object3DState as c}from\"./basicInterfaces.js\";import{computeAttachmentOriginTriangles as d}from\"./geometryDataUtils.js\";import{InstanceParameters as f}from\"./InstanceParameters.js\";import{Object3DStateID as u}from\"./Object3DStateID.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";import{addObject3DStateID as l,removeObject3DStateID as p}from\"../materials/renderers/utils.js\";class T{constructor(r,i,a={}){this.data=r,this.material=i,this.boundingSphere=h(),this.instanceParameters=new f,this._transformation=n(),this._shaderTransformationDirty=!0,this.layerUid=t(a.layerUid,null),this.graphicUid=t(a.graphicUid,null),this.id=a.id?a.id:s(),this.boundingInfo=t(a.boundingInfo,null),this.calculateShaderTransformation=t(a.calculateShaderTransformation,null),this.castShadow=!!a.castShadow&&a.castShadow}get transformation(){return this._transformation}updateTransformation(t){t(this._transformation),this._shaderTransformationDirty=!0,this.computeBoundingSphere(this._transformation,this.boundingSphere)}shaderTransformationChanged(){this._shaderTransformationDirty=!0}computeBoundingSphere(t,i,s=m(t)){r(this.boundingInfo)||(o(i,this.boundingInfo.getCenter(),t),i[3]=this.boundingInfo.getBSRadius()*s)}get hasShaderTransformation(){return i(this.calculateShaderTransformation)}get primitiveType(){return this.data.primitiveType}getShaderTransformation(){return r(this.calculateShaderTransformation)?t(this.transformation,e):(this._shaderTransformationDirty&&(this._shaderTransformation||(this._shaderTransformation=n()),a(this._shaderTransformation,this.calculateShaderTransformation(t(this.transformation,e))),this._shaderTransformationDirty=!1),this._shaderTransformation)}computeAttachmentOrigin(t){if(this.material.computeAttachmentOrigin)return!!this.material.computeAttachmentOrigin(this,t)&&(i(this._transformation)&&o(t,t,this._transformation),!0);const r=this.indices.get(g.POSITION),s=this.vertexAttributes.get(g.POSITION);return!!d(s,r,t)&&(i(this._transformation)&&o(t,t,this._transformation),!0)}get indices(){return this.data.indices}get vertexAttributes(){return this.data.vertexAttributes}addHighlight(){const t=new u(c.Highlight),r=this.instanceParameters;return r.highlights=l(r.highlights,t),t}removeHighlight(t){const r=this.instanceParameters;r.highlights=p(r.highlights,t)}}class S extends T{}export{T as RenderGeometry,S as ValidatedRenderGeometry};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAM,IAAN,MAAO;AAAA,EAAC,cAAa;AAAC,SAAK,UAAQ;AAAA,EAAE;AAAC;;;ACAsuB,IAAM,IAAN,MAAO;AAAA,EAAC,YAAYA,IAAE,GAAE,IAAE,CAAC,GAAE;AAAC,SAAK,OAAKA,IAAE,KAAK,WAAS,GAAE,KAAK,iBAAe,EAAE,GAAE,KAAK,qBAAmB,IAAI,KAAE,KAAK,kBAAgBC,GAAE,GAAE,KAAK,6BAA2B,MAAG,KAAK,WAAS,EAAE,EAAE,UAAS,IAAI,GAAE,KAAK,aAAW,EAAE,EAAE,YAAW,IAAI,GAAE,KAAK,KAAG,EAAE,KAAG,EAAE,KAAG,EAAE,GAAE,KAAK,eAAa,EAAE,EAAE,cAAa,IAAI,GAAE,KAAK,gCAA8B,EAAE,EAAE,+BAA8B,IAAI,GAAE,KAAK,aAAW,CAAC,CAAC,EAAE,cAAY,EAAE;AAAA,EAAU;AAAA,EAAC,IAAI,iBAAgB;AAAC,WAAO,KAAK;AAAA,EAAe;AAAA,EAAC,qBAAqBC,IAAE;AAAC,IAAAA,GAAE,KAAK,eAAe,GAAE,KAAK,6BAA2B,MAAG,KAAK,sBAAsB,KAAK,iBAAgB,KAAK,cAAc;AAAA,EAAC;AAAA,EAAC,8BAA6B;AAAC,SAAK,6BAA2B;AAAA,EAAE;AAAA,EAAC,sBAAsBA,IAAE,GAAEC,KAAE,EAAED,EAAC,GAAE;AAAC,MAAE,KAAK,YAAY,MAAI,EAAE,GAAE,KAAK,aAAa,UAAU,GAAEA,EAAC,GAAE,EAAE,CAAC,IAAE,KAAK,aAAa,YAAY,IAAEC;AAAA,EAAE;AAAA,EAAC,IAAI,0BAAyB;AAAC,WAAO,EAAE,KAAK,6BAA6B;AAAA,EAAC;AAAA,EAAC,IAAI,gBAAe;AAAC,WAAO,KAAK,KAAK;AAAA,EAAa;AAAA,EAAC,0BAAyB;AAAC,WAAO,EAAE,KAAK,6BAA6B,IAAE,EAAE,KAAK,gBAAe,CAAC,KAAG,KAAK,+BAA6B,KAAK,0BAAwB,KAAK,wBAAsBF,GAAE,IAAGG,GAAE,KAAK,uBAAsB,KAAK,8BAA8B,EAAE,KAAK,gBAAe,CAAC,CAAC,CAAC,GAAE,KAAK,6BAA2B,QAAI,KAAK;AAAA,EAAsB;AAAA,EAAC,wBAAwBF,IAAE;AAAC,QAAG,KAAK,SAAS;AAAwB,aAAM,CAAC,CAAC,KAAK,SAAS,wBAAwB,MAAKA,EAAC,MAAI,EAAE,KAAK,eAAe,KAAG,EAAEA,IAAEA,IAAE,KAAK,eAAe,GAAE;AAAI,UAAMF,KAAE,KAAK,QAAQ,IAAI,EAAE,QAAQ,GAAEG,KAAE,KAAK,iBAAiB,IAAI,EAAE,QAAQ;AAAE,WAAM,CAAC,CAAC,EAAEA,IAAEH,IAAEE,EAAC,MAAI,EAAE,KAAK,eAAe,KAAG,EAAEA,IAAEA,IAAE,KAAK,eAAe,GAAE;AAAA,EAAG;AAAA,EAAC,IAAI,UAAS;AAAC,WAAO,KAAK,KAAK;AAAA,EAAO;AAAA,EAAC,IAAI,mBAAkB;AAAC,WAAO,KAAK,KAAK;AAAA,EAAgB;AAAA,EAAC,eAAc;AAAC,UAAMA,KAAE,IAAIF,GAAEK,GAAE,SAAS,GAAEL,KAAE,KAAK;AAAmB,WAAOA,GAAE,aAAWM,GAAEN,GAAE,YAAWE,EAAC,GAAEA;AAAA,EAAC;AAAA,EAAC,gBAAgBA,IAAE;AAAC,UAAMF,KAAE,KAAK;AAAmB,IAAAA,GAAE,aAAW,EAAEA,GAAE,YAAWE,EAAC;AAAA,EAAC;AAAC;",
  "names": ["r", "e", "t", "s", "n", "u", "c"]
}
