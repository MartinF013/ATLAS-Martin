{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{watch as r,initial as t}from\"../../../../core/reactiveUtils.js\";import{UpdatePolicy as o}from\"../../webgl-engine/lib/basicInterfaces.js\";import{ContentObjectType as i}from\"../../webgl-engine/lib/ContentObjectType.js\";import{Object3D as c}from\"../../webgl-engine/lib/Object3D.js\";import{Texture as a}from\"../../webgl-engine/lib/Texture.js\";import{WebGLLayer as h}from\"../../webgl-engine/lib/WebGLLayer.js\";class u{constructor(e){this.resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return e(this._resources)?this._resources.object:null}get resources(){return e(this._resources)?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this.resourceFactory.recreateGeometry)return void this.recreate();const e=this.resourceFactory.view._stage;if(s(this._resources)||!e)return;const r=this._resources.object;this._resources.external.forEach((s=>{s.type===i.Geometry&&e.remove(s)})),r.removeAllGeometries();const t=this.resourceFactory.recreateGeometry(this._resources.external,r,this._resources.layer);e.addMany(t)}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this.resourceFactory,s=e.view,i=s._stage;if(!i)return;const u=new h({isPickable:!1,updatePolicy:o.SYNC});i.add(u);const n=new c({castShadow:!1}),l=e.createResources(n,u);l.forEach((e=>{i.add(e),e instanceof a&&i.loadImmediate(e)})),i.add(n),u.add(n);const _=e.cameraChanged?r((()=>s.state.camera),(s=>e.cameraChanged(s)),t):null;this._resources={layer:u,object:n,external:l,cameraHandle:_},this._syncVisible()}_destroyResources(){if(s(this._resources))return;const e=this.resourceFactory.view._stage;e?.remove(this._resources.object),e?.remove(this._resources.layer),this._resources.external.forEach((s=>{e?.remove(s),\"dispose\"in s&&s.dispose()})),this._resources.object.dispose(),this._resources.cameraHandle&&this._resources.cameraHandle.remove(),this._resources=null}_syncVisible(){s(this._resources)||this._resources.object.setVisible(this._visible)}}export{u as VisualElementResources};\n"],
  "mappings": "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",
  "names": ["e", "r", "t", "u", "l", "s"]
}
