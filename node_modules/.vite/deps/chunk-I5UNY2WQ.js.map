{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";import{isSome as t}from\"../../../../../core/maybe.js\";const n=r.getLogger(\"esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder\");class s{constructor(){this.includedModules=new Map}include(e,r){if(this.includedModules.has(e)){const t=this.includedModules.get(e);if(t!==r){n.error(\"Trying to include shader module multiple times with different sets of options.\");const r=new Set;for(const n of Object.keys(t))t[n]!==e[n]&&r.add(n);for(const n of Object.keys(e))t[n]!==e[n]&&r.add(n);r.forEach((r=>console.error(`  ${r}: current ${t[r]} new ${e[r]}`)))}}else this.includedModules.set(e,r),e(this.builder,r)}}class i extends s{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new u,this.varyings=new m,this.extensions=new h,this.constants=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){const r=this.extensions.generateSource(e),t=this.attributes.generateSource(e),n=this.varyings.generateSource(),s=\"vertex\"===e?this.vertex:this.fragment,i=s.uniforms.generateSource(),o=s.code.generateSource(),a=\"vertex\"===e?_:l,c=this.constants.generateSource().concat(s.constants.generateSource());return`\\n${r.join(\"\\n\")}\\n\\n${a}\\n\\n${c.join(\"\\n\")}\\n\\n${i.join(\"\\n\")}\\n\\n${t.join(\"\\n\")}\\n\\n${n.join(\"\\n\")}\\n\\n${o.join(\"\\n\")}`}generateBind(e,r){const n=new Map;this.vertex.uniforms.entries.forEach((r=>{const s=r.bind[e];t(s)&&n.set(r.name,s)})),this.fragment.uniforms.entries.forEach((r=>{const s=r.bind[e];t(s)&&n.set(r.name,s)}));const s=Array.from(n.values()),i=s.length;return(e,t)=>{for(let n=0;n<i;++n)s[n](r,e,t)}}}class o{constructor(){this._entries=new Map}add(e){if(!Array.isArray(e))return this._add(e);for(const r of e)this._add(r)}_add(r){if(this._entries.has(r.name)&&!this._entries.get(r.name).equals(r))throw new e(`Duplicate uniform name ${r.name} for different uniform type`);this._entries.set(r.name,r)}generateSource(){return Array.from(this._entries.values()).map((e=>t(e.arraySize)?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class c extends s{constructor(){super(...arguments),this.uniforms=new o,this.code=new a,this.constants=new d}get builder(){return this}}class u{constructor(){this._entries=new Array}add(e,r){this._entries.push([e,r])}generateSource(e){return\"fragment\"===e?[]:this._entries.map((e=>`attribute ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Array}add(e,r){this._entries.push([e,r])}generateSource(){return this._entries.map((e=>`varying ${e[1]} ${e[0]};`))}}class h{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const r=\"vertex\"===e?h.ALLOWLIST_VERTEX:h.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>r.includes(e))).map((e=>`#extension ${e} : enable`))}}h.ALLOWLIST_FRAGMENT=[\"GL_EXT_shader_texture_lod\",\"GL_OES_standard_derivatives\"],h.ALLOWLIST_VERTEX=[];class d{constructor(){this._entries=new Set}add(e,r,t){let n=\"ERROR_CONSTRUCTOR_STRING\";switch(r){case\"float\":n=d._numberToFloatStr(t);break;case\"int\":n=d._numberToIntStr(t);break;case\"bool\":n=t.toString();break;case\"vec2\":n=`vec2(${d._numberToFloatStr(t[0])},                            ${d._numberToFloatStr(t[1])})`;break;case\"vec3\":n=`vec3(${d._numberToFloatStr(t[0])},                            ${d._numberToFloatStr(t[1])},                            ${d._numberToFloatStr(t[2])})`;break;case\"vec4\":n=`vec4(${d._numberToFloatStr(t[0])},                            ${d._numberToFloatStr(t[1])},                            ${d._numberToFloatStr(t[2])},                            ${d._numberToFloatStr(t[3])})`;break;case\"ivec2\":n=`ivec2(${d._numberToIntStr(t[0])},                             ${d._numberToIntStr(t[1])})`;break;case\"ivec3\":n=`ivec3(${d._numberToIntStr(t[0])},                             ${d._numberToIntStr(t[1])},                             ${d._numberToIntStr(t[2])})`;break;case\"ivec4\":n=`ivec4(${d._numberToIntStr(t[0])},                             ${d._numberToIntStr(t[1])},                             ${d._numberToIntStr(t[2])},                             ${d._numberToIntStr(t[3])})`;break;case\"mat2\":case\"mat3\":case\"mat4\":n=`${r}(${Array.prototype.map.call(t,(e=>d._numberToFloatStr(e))).join(\", \")})`}return this._entries.add(`const ${r} ${e} = ${n};`),this}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const l=\"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n  precision highp float;\\n  precision highp sampler2D;\\n#else\\n  precision mediump float;\\n  precision mediump sampler2D;\\n#endif\",_=\"precision highp float;\\nprecision highp sampler2D;\";export{a as Code,s as Includes,i as ShaderBuilder,c as Stage,o as Uniforms};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.Pass=0]=\"Pass\",a[a.Draw=1]=\"Draw\"}(a||(a={}));export{a as BindType};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../../core/maybe.js\";import{BindType as r}from\"../shaderTechnique/BindType.js\";class i{constructor(i,s,t,a,n=null){this.name=i,this.type=s,this.arraySize=n,this.bind={[r.Pass]:null,[r.Draw]:null},e(t)&&e(a)&&(this.bind[t]=a)}equals(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}export{i as Uniform};\n"],
  "mappings": "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",
  "names": ["s", "r", "n", "i", "o", "a", "c", "e", "a", "i", "s", "a", "n"]
}
