import {
  l as l2
} from "./chunk-ZDSMRGKC.js";
import {
  d,
  e as e2,
  t
} from "./chunk-I6H66HCE.js";
import "./chunk-4P4OV7G6.js";
import "./chunk-ZUDEVIXR.js";
import {
  b,
  j,
  w
} from "./chunk-RRFFPL7N.js";
import "./chunk-JYR7GBAU.js";
import "./chunk-IG4CY4XM.js";
import "./chunk-HB4HVKJV.js";
import "./chunk-CC32E45Q.js";
import "./chunk-UHJVTABQ.js";
import "./chunk-W66LN57L.js";
import "./chunk-F5A4XAOJ.js";
import "./chunk-QKRZMDWG.js";
import "./chunk-2AGPHSDM.js";
import "./chunk-JGSSQ5FR.js";
import "./chunk-5OEHY3VV.js";
import "./chunk-GRILTTJT.js";
import "./chunk-ASC3X65B.js";
import "./chunk-KVF4M6PZ.js";
import "./chunk-TADZYUVR.js";
import "./chunk-C5ULLWJ7.js";
import "./chunk-HFDYAQZS.js";
import "./chunk-HJHWUUQQ.js";
import "./chunk-TMBOFNWA.js";
import "./chunk-ZNEGSJWK.js";
import "./chunk-CF56UYH2.js";
import "./chunk-5TRUGQDM.js";
import "./chunk-PZG7CR4Y.js";
import "./chunk-2HDG7SIE.js";
import "./chunk-56RHM4A6.js";
import "./chunk-ACJD5XFJ.js";
import "./chunk-OO2JXX7L.js";
import "./chunk-6DWU2ZQF.js";
import "./chunk-Q3R7XFM5.js";
import "./chunk-JCPK2OXG.js";
import "./chunk-HVM5D6S5.js";
import "./chunk-JYHTO6QC.js";
import "./chunk-FTLBKDGL.js";
import "./chunk-5Z5455ZY.js";
import "./chunk-D7DLEBS2.js";
import "./chunk-TT2HIXWQ.js";
import "./chunk-OIPX3EDD.js";
import {
  e,
  u
} from "./chunk-NWRK6QLX.js";
import "./chunk-HPH3FMVB.js";
import "./chunk-Y7FSCP47.js";
import "./chunk-65A2N4LL.js";
import "./chunk-GVELBHGI.js";
import "./chunk-5N3FSR63.js";
import "./chunk-C4LU7RDX.js";
import "./chunk-EPCCNF3D.js";
import "./chunk-4PRVTUEZ.js";
import "./chunk-DMJWTK32.js";
import {
  l
} from "./chunk-FVPTCNCX.js";
import "./chunk-BPZGJQOB.js";
import "./chunk-ZOKX6UGH.js";
import "./chunk-PKZEO23A.js";
import "./chunk-43S7PUMG.js";
import "./chunk-AIRC226G.js";
import "./chunk-BNPOKP6A.js";
import "./chunk-CHNDTVQJ.js";
import "./chunk-VLCG72SW.js";
import "./chunk-Q72YFZUL.js";
import "./chunk-YPZEGNLG.js";
import "./chunk-3NMRL5CR.js";
import "./chunk-SN4RUQ4N.js";
import "./chunk-XRL56EGK.js";
import "./chunk-ZIHDQYKE.js";
import "./chunk-GSRNZQFV.js";
import "./chunk-ICD7AJSY.js";
import "./chunk-2QOWZFCU.js";
import "./chunk-IVBXK6OP.js";
import "./chunk-YAAIZ67O.js";
import "./chunk-5EQKHR4M.js";
import "./chunk-U3PSONS6.js";
import {
  s2 as s
} from "./chunk-HFTNOKM2.js";
import "./chunk-23NWA6WL.js";
import "./chunk-CVWDM4C7.js";
import "./chunk-G5JBUC5N.js";
import "./chunk-CBQWMOBK.js";
import "./chunk-AC2VUBZ6.js";

// node_modules/@arcgis/core/views/support/colorUtils.js
function e3(r2) {
  let { r: n, g: a, b: o, a: e4 } = r2;
  return e4 < 1 && (n = Math.round(e4 * n + 255 * (1 - e4)), a = Math.round(e4 * a + 255 * (1 - e4)), o = Math.round(e4 * o + 255 * (1 - e4))), new l({ r: n, g: a, b: o });
}
function u2(t2) {
  const { r: r2, g: n, b: a } = e3(t2);
  return 0.2126 * r2 + 0.7152 * n + 0.0722 * a;
}

// node_modules/@arcgis/core/symbols/support/previewSymbol2D.js
var h = "picture-fill";
var p = "picture-marker";
var d2 = "simple-fill";
var f = "simple-line";
var y = "simple-marker";
var v = "text";
var w2 = "Aa";
var g = t.size;
var b2 = t.maxSize;
var M = t.maxOutlineSize;
var k = t.lineWidth;
var x = 225;
var z = document.createElement("canvas");
function L(e4, t2) {
  const a = z.getContext("2d"), n = [];
  return t2 && (t2.weight && n.push(t2.weight), t2.size && n.push(t2.size + "px"), t2.family && n.push(t2.family)), a.font = n.join(" "), a.measureText(e4).width;
}
var j2 = 7.2 / 2.54;
var C = 72 / 2.54;
function S(e4) {
  if (0 === e4.length)
    return 0;
  if (e4.length > 2) {
    const t2 = e(1), a = parseFloat(e4);
    switch (e4.slice(-2)) {
      case "px":
        return a;
      case "pt":
        return a * t2;
      case "in":
        return 72 * a * t2;
      case "pc":
        return 12 * a * t2;
      case "mm":
        return a * j2 * t2;
      case "cm":
        return a * C * t2;
    }
  }
  return parseFloat(e4);
}
function F(e4) {
  const t2 = e4 == null ? void 0 : e4.size;
  return { width: null != t2 && "object" == typeof t2 && "width" in t2 ? u(t2.width) : null, height: null != t2 && "object" == typeof t2 && "height" in t2 ? u(t2.height) : null };
}
async function U(e4, t2) {
  const a = t2.fill, n = e4.color;
  if ("pattern" === (a == null ? void 0 : a.type) && n && e4.type !== h) {
    const e5 = await w(a.src, n.toCss(true));
    a.src = e5, t2.fill = a;
  }
}
function E(e4, t2) {
  return e4 > t2 ? "dark" : "light";
}
function Z(e4, t2) {
  var _a;
  const n = "number" == typeof (t2 == null ? void 0 : t2.size) ? t2 == null ? void 0 : t2.size : null, o = null != n ? u(n) : null, i = null != (t2 == null ? void 0 : t2.maxSize) ? u(t2.maxSize) : null, r2 = null != (t2 == null ? void 0 : t2.rotation) ? t2.rotation : "angle" in e4 ? e4.angle : null, m = b(e4);
  let u3 = j(e4);
  "dark" !== D(e4, 245) || (t2 == null ? void 0 : t2.ignoreWhiteSymbols) || (u3 = { color: "#bdc3c7", width: 0.75 });
  const x2 = { shape: null, fill: m, stroke: u3, offset: [0, 0] };
  (u3 == null ? void 0 : u3.width) && (u3.width = Math.min(u3.width, M));
  const z2 = (u3 == null ? void 0 : u3.width) || 0;
  let j3 = null != (t2 == null ? void 0 : t2.size) && (null == (t2 == null ? void 0 : t2.scale) || (t2 == null ? void 0 : t2.scale)), C2 = 0, U2 = 0, E2 = false;
  switch (e4.type) {
    case y: {
      const t3 = e4.style, n2 = Math.min(null != o ? o : u(e4.size), i || b2);
      switch (C2 = n2, U2 = n2, t3) {
        case "circle":
          x2.shape = { type: "circle", cx: 0, cy: 0, r: 0.5 * n2 }, j3 || (C2 += z2, U2 += z2);
          break;
        case "cross":
          x2.shape = { type: "path", path: [{ command: "M", values: [0, 0.5 * U2] }, { command: "L", values: [C2, 0.5 * U2] }, { command: "M", values: [0.5 * C2, 0] }, { command: "L", values: [0.5 * C2, U2] }] };
          break;
        case "diamond":
          x2.shape = { type: "path", path: [{ command: "M", values: [0, 0.5 * U2] }, { command: "L", values: [0.5 * C2, 0] }, { command: "L", values: [C2, 0.5 * U2] }, { command: "L", values: [0.5 * C2, U2] }, { command: "Z", values: [] }] }, j3 || (C2 += z2, U2 += z2);
          break;
        case "square":
          x2.shape = { type: "path", path: [{ command: "M", values: [0, 0] }, { command: "L", values: [C2, 0] }, { command: "L", values: [C2, U2] }, { command: "L", values: [0, U2] }, { command: "Z", values: [] }] }, j3 || (C2 += z2, U2 += z2), r2 && (E2 = true);
          break;
        case "triangle":
          x2.shape = { type: "path", path: [{ command: "M", values: [0.5 * C2, 0] }, { command: "L", values: [C2, U2] }, { command: "L", values: [0, U2] }, { command: "Z", values: [] }] }, j3 || (C2 += z2, U2 += z2), r2 && (E2 = true);
          break;
        case "x":
          x2.shape = { type: "path", path: [{ command: "M", values: [0, 0] }, { command: "L", values: [C2, U2] }, { command: "M", values: [C2, 0] }, { command: "L", values: [0, U2] }] }, r2 && (E2 = true);
          break;
        case "path":
          x2.shape = { type: "path", path: e4.path || "" }, j3 || (C2 += z2, U2 += z2), r2 && (E2 = true), j3 = true;
      }
      break;
    }
    case f: {
      const { width: e5, height: a } = F(t2), n2 = null != a ? a : Math.min(null != o ? o : z2, i || M), l3 = null != e5 ? e5 : k;
      u3.width = n2, C2 = l3, U2 = n2;
      const s2 = ((_a = x2 == null ? void 0 : x2.stroke) == null ? void 0 : _a.cap) || "butt", c = "round" === s2;
      j3 = true, x2.stroke.cap = "butt" === s2 ? "square" : s2, x2.shape = { type: "path", path: [{ command: "M", values: [c ? n2 / 2 : 0, U2 / 2] }, { command: "L", values: [c ? C2 - n2 / 2 : C2, U2 / 2] }] };
      break;
    }
    case h:
    case d2: {
      const e5 = "object" == typeof (t2 == null ? void 0 : t2.symbolConfig) && (t2 == null ? void 0 : t2.symbolConfig.isSquareFill), { width: a, height: n2 } = F(t2);
      C2 = e5 && null != a ? a : null != o ? o : g, U2 = e5 && null != n2 ? n2 : C2, j3 || (C2 += z2, U2 += z2), j3 = true, x2.shape = e5 ? { type: "path", path: [{ command: "M", values: [0, 0] }, { command: "L", values: [C2, 0] }, { command: "L", values: [C2, U2] }, { command: "L", values: [0, U2] }, { command: "L", values: [0, 0] }, { command: "Z", values: [] }] } : e2.fill[0];
      break;
    }
    case p: {
      let t3 = u(e4.width), n2 = u(e4.height);
      const l3 = null != o ? o : Math.max(t3, n2), s2 = t3 / n2;
      t3 = s2 <= 1 ? Math.ceil(l3 * s2) : l3, n2 = s2 <= 1 ? l3 : Math.ceil(l3 / s2), C2 = Math.min(t3, i || b2), U2 = Math.min(n2, i || b2), x2.shape = { type: "image", x: -Math.round(C2 / 2), y: -Math.round(U2 / 2), width: C2, height: U2, src: e4.url || "" }, r2 && (E2 = true);
      break;
    }
    case v: {
      const t3 = e4, n2 = t3.text || w2, l3 = t3.font, s2 = Math.min(null != o ? o : u(l3.size), i || b2), c = L(n2, { weight: l3.weight, size: s2, family: l3.family }), r3 = /[\uE600-\uE6FF]/.test(n2);
      C2 = r3 ? s2 : c, U2 = s2;
      let m2 = 0.25 * S((l3 ? s2 : 0).toString());
      r3 && (m2 += 5), x2.shape = { type: "text", text: n2, x: t3.xoffset || 0, y: t3.yoffset || m2, align: "middle", alignBaseline: t3.verticalAlignment, decoration: l3 && l3.decoration, rotated: t3.rotated, kerning: t3.kerning }, x2.font = l3 && { size: s2, style: l3.style, decoration: l3.decoration, weight: l3.weight, family: l3.family };
      break;
    }
  }
  return { shapeDescriptor: x2, size: [C2, U2], renderOptions: { node: t2 == null ? void 0 : t2.node, scale: j3, opacity: t2 == null ? void 0 : t2.opacity, rotation: r2, useRotationSize: E2, effectView: t2 == null ? void 0 : t2.effectView } };
}
async function q(e4, a) {
  const { shapeDescriptor: n, size: l3, renderOptions: s2 } = Z(e4, a);
  if (!n.shape)
    throw new s("symbolPreview: renderPreviewHTML2D", "symbol not supported.");
  await U(e4, n);
  const o = [[n]];
  if ("object" == typeof (a == null ? void 0 : a.symbolConfig) && (a == null ? void 0 : a.symbolConfig.applyColorModulation)) {
    const e5 = 0.6 * l3[0];
    o.unshift([{ ...n, offset: [-e5, 0], fill: d(n.fill, -0.3) }]), o.push([{ ...n, offset: [e5, 0], fill: d(n.fill, 0.3) }]), l3[0] += 2 * e5, s2.scale = false;
  }
  return l2(o, l3, s2);
}
function D(t2, a = x) {
  const n = b(t2), o = j(t2), i = !n || "type" in n ? null : new l(n), c = (o == null ? void 0 : o.color) ? new l(o == null ? void 0 : o.color) : null, r2 = i ? E(u2(i), a) : null, m = c ? E(u2(c), a) : null;
  return m ? r2 ? r2 === m ? r2 : a >= x ? "light" : "dark" : m : r2;
}
export {
  D as getContrastingBackgroundTheme,
  Z as getRenderSymbolParameters,
  q as previewSymbol2D
};
//# sourceMappingURL=previewSymbol2D-BUV6HKMY.js.map
