{
  "version": 3,
  "sources": ["../../@arcgis/core/rest/query/executeQuery.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport o from\"../../core/Error.js\";import t from\"../../core/has.js\";import{isSome as r,isNone as e}from\"../../core/maybe.js\";import{whenOrAbort as i}from\"../../core/promiseUtils.js\";import{DataLayerSource as n}from\"../../layers/support/source/DataLayerSource.js\";import{executeRawQueryJSON as a}from\"./executeQueryJSON.js\";import{executeRawQueryPBF as s}from\"./executeQueryPBF.js\";import f from\"../support/FeatureSet.js\";import u from\"../support/Query.js\";async function c(o,t,r,e){return m(o,t,r,e).then((o=>p(t,o,r,e)))}async function m(o,r,e,i){const n={...i},f=d(r,e),u=null!=r.outStatistics?.[0],c=t(\"featurelayer-pbf-statistics\"),m=!u||c;let p;if(\"pbf\"===e.format&&m)try{p=await s(o,f,n)}catch(y){if(\"query:parsing-pbf\"!==y.name)throw y;e.format=\"json\"}return\"json\"!==e.format&&m||(p=await a(o,f,n)),l(e.fieldsIndex,p.fields),p}function l(o,t){if(r(o)&&r(t))for(const r of t){const t=o.get(r.name);t&&Object.assign(r,t.toJSON())}}async function p(o,t,r,n){if(!y(o,r?.infoFor3D)||e(r.infoFor3D)||!t.features||!t.features.length)return f.fromJSON(t);const{meshFeatureSetFromJSON:a}=await i(import(\"../support/meshFeatureSet.js\"),n);return a(o,r.infoFor3D,t)}function d(t,i){let a=u.from(t);if(a.sourceSpatialReference=a.sourceSpatialReference||i?.sourceSpatialReference,(i.gdbVersion||i.dynamicDataSource)&&(a=a===t?a.clone():a,a.gdbVersion=t.gdbVersion||i.gdbVersion,a.dynamicDataSource=t.dynamicDataSource?n.from(t.dynamicDataSource):i.dynamicDataSource),r(i.infoFor3D)&&y(t,i?.infoFor3D)){a=a===t?a.clone():a,a.formatOf3DObjects=null;for(const o of i.infoFor3D.queryFormats){if(\"3D_glb\"===o.id){a.formatOf3DObjects=o.id;break}\"3D_gltf\"!==o.id||a.formatOf3DObjects||(a.formatOf3DObjects=o.id)}if(!a.formatOf3DObjects)throw new o(\"query:unsupported-3d-query-formats\",\"Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf\");if(e(a.outFields)||!a.outFields.includes(\"*\")){a=a===t?a.clone():a,e(a.outFields)&&(a.outFields=[]);const{originX:o,originY:r,originZ:n,translationX:s,translationY:f,translationZ:u,scaleX:c,scaleY:m,scaleZ:l,rotationX:p,rotationY:d,rotationZ:y,rotationDeg:D}=i.infoFor3D.transformFieldRoles;a.outFields.push(o,r,n,s,f,u,c,m,l,p,d,y,D)}}return a}function y(o,t){return r(t)&&o.returnGeometry&&\"xyFootprint\"!==o.multipatchOption&&!o.outStatistics}export{c as executeQuery,m as executeRawQuery,l as normalizeFields};\n"],
  "mappings": "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",
  "names": ["t", "r", "m", "o", "n", "u", "c", "p", "y", "a", "s", "l", "d"]
}
