{
  "version": 3,
  "sources": ["../../@arcgis/core/views/layers/ImageryLayerView.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isNone as t,isSome as o}from\"../../core/maybe.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import{combinedViewLayerTimeExtentProperty as a}from\"../../layers/support/commonProperties.js\";import n from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as u}from\"./support/popupUtils.js\";const m=m=>{let c=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(e,s){const{layer:p}=this;if(!e)throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:p});const{popupEnabled:a}=p,m=u(p,s);if(!a||t(m))throw new r(\"imagerylayerview:fetchPopupFeatures\",\"Missing required popupTemplate or popupEnabled\",{popupEnabled:a,popupTemplate:m});const c=await m.getRequiredFields(),l=new n;l.timeExtent=this.timeExtent,l.geometry=e,l.outFields=c,l.outSpatialReference=e.spatialReference;const y=this.view.resolution,h=\"2d\"===this.view.type?new i(y,y,this.view.spatialReference):new i(.5*y,.5*y,this.view.spatialReference),{returnTopmostRaster:w,showNoDataRecords:d}=m.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},f={returnDomainValues:!0,returnTopmostRaster:w,pixelSize:h,showNoDataRecords:d,signal:o(s)?s.signal:null};return p.queryVisibleRasters(l,f).then((e=>e))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([s()],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"suspended\",void 0),e([s(a)],c.prototype,\"timeExtent\",void 0),e([s()],c.prototype,\"view\",void 0),c=e([p(\"esri.views.layers.ImageryLayerView\")],c),c};export{m as default};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIioB,IAAM,IAAE,CAAAA,OAAG;AAAC,MAAI,IAAE,cAAcA,GAAC;AAAA,IAAC,cAAa;AAAC,YAAM,GAAG,SAAS,GAAE,KAAK,OAAK;AAAA,IAAI;AAAA,IAAC,MAAM,mBAAmBC,IAAEC,IAAE;AAAC,YAAK,EAAC,OAAM,EAAC,IAAE;AAAK,UAAG,CAACD;AAAE,cAAM,IAAI,EAAE,uCAAsC,iCAAgC,EAAC,OAAM,EAAC,CAAC;AAAE,YAAK,EAAC,cAAa,EAAC,IAAE,GAAED,KAAEE,GAAE,GAAEA,EAAC;AAAE,UAAG,CAAC,KAAG,EAAEF,EAAC;AAAE,cAAM,IAAI,EAAE,uCAAsC,kDAAiD,EAAC,cAAa,GAAE,eAAcA,GAAC,CAAC;AAAE,YAAMG,KAAE,MAAMH,GAAE,kBAAkB,GAAE,IAAE,IAAI;AAAE,QAAE,aAAW,KAAK,YAAW,EAAE,WAASC,IAAE,EAAE,YAAUE,IAAE,EAAE,sBAAoBF,GAAE;AAAiB,YAAM,IAAE,KAAK,KAAK,YAAW,IAAE,SAAO,KAAK,KAAK,OAAK,IAAI,EAAE,GAAE,GAAE,KAAK,KAAK,gBAAgB,IAAE,IAAI,EAAE,MAAG,GAAE,MAAG,GAAE,KAAK,KAAK,gBAAgB,GAAE,EAAC,qBAAoB,GAAE,mBAAkBG,GAAC,IAAEJ,GAAE,gBAAc,EAAC,qBAAoB,MAAG,mBAAkB,MAAE,GAAE,IAAE,EAAC,oBAAmB,MAAG,qBAAoB,GAAE,WAAU,GAAE,mBAAkBI,IAAE,QAAO,EAAEF,EAAC,IAAEA,GAAE,SAAO,KAAI;AAAE,aAAO,EAAE,oBAAoB,GAAE,CAAC,EAAE,KAAM,CAAAD,OAAGA,EAAE;AAAA,IAAC;AAAA,IAAC,YAAW;AAJ7jD;AAI8jD,aAAM,CAAC,CAAC,MAAM,UAAU,KAAG,GAAC,UAAK,eAAL,mBAAiB;AAAA,IAAO;AAAA,EAAC;AAAE,SAAO,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,SAAQ,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,aAAY,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,CAAC,GAAE,EAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAE,EAAE,WAAU,QAAO,MAAM,GAAE,IAAE,EAAE,CAAC,EAAE,oCAAoC,CAAC,GAAE,CAAC,GAAE;AAAC;",
  "names": ["m", "e", "s", "c", "d"]
}
