{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{isSome as t}from\"../../../../core/maybe.js\";import{watch as i}from\"../../../../core/reactiveUtils.js\";import{f as r,h as s}from\"../../../../chunks/mat4.js\";import{c as a}from\"../../../../chunks/mat4f64.js\";import{i as o,n as l,b as n,c as u,a as h}from\"../../../../chunks/vec3.js\";import{c}from\"../../../../chunks/vec3f64.js\";import{c as d}from\"../../../../chunks/vec4.js\";import{f as _}from\"../../../../chunks/vec4f32.js\";import{sv3d as m}from\"../../../../geometry/support/vectorStacks.js\";import{Object3DVisualElement as p}from\"./Object3DVisualElement.js\";import{Geometry as M}from\"../../webgl-engine/lib/Geometry.js\";import f from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as g}from\"../../webgl-engine/lib/Material.js\";import{VertexAttribute as O}from\"../../webgl-engine/lib/VertexAttribute.js\";import{ColorMaterial as y}from\"../../webgl-engine/materials/ColorMaterial.js\";import{RibbonLineMaterial as z}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class j extends p{constructor(t){super(t),this._handles=new e,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=c(),this._up=c(),this._right=c(),this._renderOccluded=g.OccludeAndTransparent,this._color=_(1,0,0,1),this._outlineColor=_(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=g.Opaque,this.applyProps(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){d(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){d(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:i}){this._maxSize=Math.min(o(t,e),o(t,i))/3,l(this._up,n(this._up,e,t)),l(this._right,n(this._right,i,t)),u(this._position,t),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new y(this.quadMaterialParameters),this._outlineMaterial=new z(this.outlineMaterialParameters),this._handles.add(i((()=>this.view.state.camera),(()=>this._updateTransform())))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(e){e(this._quadMaterial),e(this._outlineMaterial)}createGeometries(e){this._createQuadGeometry(e),this._createOutlineGeometry(e),this._updateTransform(e)}_createQuadGeometry(e){const t=this._quadGeometryData(this._up,this._right);e.addGeometry(t,this._quadMaterial)}_createOutlineGeometry(e){if(0===this._outlineSize)return;const t=h(m.get(),this._up,this._right),i=f.createPolylineGeometry([this._up,t,this._right]);e.addGeometry(i,this._outlineMaterial)}_updateTransform(e=this.object){const i=this.view.state.camera,a=this._size*i.computeScreenPixelSizeAt(this._position),o=Math.min(this._maxSize,a);r(b,this._position),s(b,b,[o,o,o]),t(e)&&(e.transformation=b)}_quadGeometryData(e,t){const i=h(m.get(),e,t);return new M([[O.POSITION,{size:3,data:[0,0,0,...t,...e,...i],exclusive:!0}]],[[O.POSITION,new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this.outlineMaterialParameters)}}const b=a();export{j as RightAngleQuadVisualElement};\n"],
  "mappings": "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",
  "names": ["n", "u", "r", "e", "i", "a", "x"]
}
