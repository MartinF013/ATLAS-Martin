{
  "version": 3,
  "sources": ["../../@arcgis/core/chunks/ImageMaterial.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../core/maybe.js\";import{O as r}from\"./vec2f64.js\";import{ShaderOutput as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\";import{SliceDraw as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{multipassTerrainTest as t}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{defaultMaskAlphaCutoff as s}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{ColorConversion as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as l}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2PassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as c}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as p}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as u}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{TransparencyPassType as m}from\"../views/3d/webgl-engine/lib/basicInterfaces.js\";import{VertexAttribute as v}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";function f(f){const w=new p;l(w,f),w.include(a),w.attributes.add(v.POSITION,\"vec3\"),w.attributes.add(v.UV0,\"vec2\"),w.varyings.add(\"vpos\",\"vec3\"),f.hasMultipassTerrain&&w.varyings.add(\"depth\",\"float\");const{vertex:h,fragment:b}=w;return h.uniforms.add(new n(\"textureCoordinateScaleFactor\",(o=>e(o.texture)&&e(o.texture.descriptor.textureCoordinateScaleFactor)?o.texture.descriptor.textureCoordinateScaleFactor:r))),h.code.add(c`\n    void main(void) {\n      vpos = position;\n      ${f.hasMultipassTerrain?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n      vTexCoord = uv0 * textureCoordinateScaleFactor;\n      gl_Position = transformPosition(proj, view, vpos);\n    }\n  `),w.include(i,f),w.include(t,f),b.uniforms.add([new u(\"tex\",(e=>e.texture)),new g(\"opacity\",(e=>e.opacity))]),w.varyings.add(\"vTexCoord\",\"vec2\"),f.output===o.Alpha?b.code.add(c`\n    void main() {\n      discardBySlice(vpos);\n      ${f.hasMultipassTerrain?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n      float alpha = texture2D(tex, vTexCoord).a * opacity;\n      if (alpha  < ${c.float(s)}) {\n        discard;\n      }\n\n      gl_FragColor = vec4(alpha);\n    }\n    `):(b.include(d),b.code.add(c`\n    void main() {\n      discardBySlice(vpos);\n      ${f.hasMultipassTerrain?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n      gl_FragColor = texture2D(tex, vTexCoord) * opacity;\n\n      if (gl_FragColor.a < ${c.float(s)}) {\n        discard;\n      }\n\n      gl_FragColor = highlightSlice(gl_FragColor, vpos);\n      ${f.transparencyPassType===m.Color?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n    }\n    `)),w}const w=Object.freeze(Object.defineProperty({__proto__:null,build:f},Symbol.toStringTag,{value:\"Module\"}));export{w as I,f as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAI05C,SAAS,EAAEA,IAAE;AAAC,QAAMC,KAAE,IAAIC;AAAE,IAAED,IAAED,EAAC,GAAEC,GAAE,QAAQE,EAAC,GAAEF,GAAE,WAAW,IAAI,EAAE,UAAS,MAAM,GAAEA,GAAE,WAAW,IAAI,EAAE,KAAI,MAAM,GAAEA,GAAE,SAAS,IAAI,QAAO,MAAM,GAAED,GAAE,uBAAqBC,GAAE,SAAS,IAAI,SAAQ,OAAO;AAAE,QAAK,EAAC,QAAO,GAAE,UAAS,EAAC,IAAEA;AAAE,SAAO,EAAE,SAAS,IAAI,IAAI,EAAE,gCAAgC,CAAAG,OAAG,EAAEA,GAAE,OAAO,KAAG,EAAEA,GAAE,QAAQ,WAAW,4BAA4B,IAAEA,GAAE,QAAQ,WAAW,+BAA6B,CAAE,CAAC,GAAE,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA,QAG3zDJ,GAAE,sBAAoB,wCAAsC;AAAA;AAAA;AAAA;AAAA,GAIjE,GAAEC,GAAE,QAAQ,GAAED,EAAC,GAAEC,GAAE,QAAQI,IAAEL,EAAC,GAAE,EAAE,SAAS,IAAI,CAAC,IAAI,EAAE,OAAO,CAAAM,OAAGA,GAAE,OAAQ,GAAE,IAAIF,GAAE,WAAW,CAAAE,OAAGA,GAAE,OAAQ,CAAC,CAAC,GAAEL,GAAE,SAAS,IAAI,aAAY,MAAM,GAAED,GAAE,WAAS,EAAE,QAAM,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA,QAG1KA,GAAE,sBAAoB,2CAAyC;AAAA;AAAA;AAAA,qBAGlD,EAAE,MAAMI,EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAMzB,KAAG,EAAE,QAAQE,EAAC,GAAE,EAAE,KAAK,IAAI;AAAA;AAAA;AAAA,QAGxBN,GAAE,sBAAoB,2CAAyC;AAAA;AAAA;AAAA,6BAG1C,EAAE,MAAMI,EAAC;AAAA;AAAA;AAAA;AAAA;AAAA,QAK9BJ,GAAE,yBAAuBO,GAAE,QAAM,mDAAiD;AAAA;AAAA,KAErF,IAAGN;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["f", "w", "i", "r", "o", "n", "e", "O"]
}
