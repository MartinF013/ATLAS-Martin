{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js", "../../@arcgis/core/chunks/SimpleAtmosphere.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{parameter as o,ShaderTechniqueConfiguration as r}from\"../webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js\";var n;!function(e){e[e.Cone=0]=\"Cone\",e[e.Cylinder=1]=\"Cylinder\",e[e.Underground=2]=\"Underground\",e[e.COUNT=3]=\"COUNT\"}(n||(n={}));class t extends r{constructor(){super(...arguments),this.geometry=n.Cone}}e([o({count:n.COUNT})],t.prototype,\"geometry\",void 0);export{n as SimpleAtmosphereGeometry,t as SimpleAtmosphereTechniqueConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{SimpleAtmosphereGeometry as e}from\"../views/3d/environment/SimpleAtmosphereTechniqueConfiguration.js\";import{Transform as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{Float2Uniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2Uniform.js\";import{Float3PassUniform as r}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float3Uniform as n}from\"../views/3d/webgl-engine/core/shaderModules/Float3Uniform.js\";import{FloatUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/FloatUniform.js\";import{NoParameters as s,glsl as a}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{Matrix4Uniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4Uniform.js\";import{ShaderBuilder as c}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{VertexAttribute as g}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";class f extends s{}function p(s){const f=new c,{vertex:p,fragment:v}=f;if(s.geometry===e.Underground)f.attributes.add(g.POSITION,\"vec2\"),f.varyings.add(\"color\",\"vec4\"),p.uniforms.add([new r(\"lightingMainDirection\",((e,o)=>o.lighting.lightingMainDirection)),new n(\"cameraPosition\"),new t(\"undergroundFadeAlpha\")]),p.code.add(a`void main(void) {\nfloat ndotl = dot(normalize(cameraPosition), lightingMainDirection);\nfloat lighting = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\ncolor = vec4(vec3(lighting), undergroundFadeAlpha);\ngl_Position = vec4(position.xy, 1.0, 1.0);\n}`),v.code.add(a`void main() {\ngl_FragColor = color;\n}`);else{f.include(o),f.attributes.add(g.POSITION,\"vec3\"),f.varyings.add(\"vtc\",\"vec2\"),f.varyings.add(\"falloff\",\"float\");const c=s.geometry===e.Cylinder;p.uniforms.add([new l(\"proj\",((e,o)=>o.camera.projectionMatrix)),new d(\"view\"),new r(\"lightingMainDirection\",((e,o)=>o.lighting.lightingMainDirection))]),c||(f.varyings.add(\"innerFactor\",\"float\"),p.uniforms.add(new n(\"silCircleCenter\")),p.uniforms.add(new n(\"silCircleV1\")),p.uniforms.add(new n(\"silCircleV2\")),p.uniforms.add(new i(\"texV\")),p.uniforms.add(new t(\"innerScale\")));const u=6.2831853,w=1/128;p.code.add(a`\n\t\tvoid main(void) {\n      ${c?a`\n      vec3 pos = position;\n      float ndotl = lightingMainDirection.z;\n      vtc = vec2(0.0, position.z + 0.05);`:a`\n      innerFactor = clamp(-position.z, 0.0, 1.0);\n      float scale = position.y * (1.0 + innerFactor * innerScale);\n      float phi = position.x * ${a.float(u*w)} + 1.0;\n      vec3 pos =  (silCircleCenter + sin(phi) * silCircleV1 + cos(phi) * silCircleV2) * scale;\n      float ndotl = dot(normalize(position.y > 0.0 ? pos: silCircleCenter), lightingMainDirection);\n      vtc.x = position.x  * ${a.float(w)};\n      vtc.y = texV.x * (1.0 - position.z) + texV.y * position.z;\n      `}\n      falloff = max(0.0, smoothstep(-1.0, 0.8, 2.0 * ndotl));\n\n\t\t  gl_Position = transformPosition(proj, view, pos);\n\t\t  gl_Position.z = gl_Position.w; // project atmosphere onto the far plane\n    }\n\t  `),v.uniforms.add(new m(\"tex\",(e=>e.texture))),c||v.uniforms.add(new t(\"altitudeFade\")),v.code.add(a`\n\t\tvoid main() {\n\t\t\tvec4 atmosphereColor = texture2D(tex, vtc) * falloff;\n      ${c?a`gl_FragColor = atmosphereColor;`:a`\n\t\t\tvec4 innerColor = vec4(atmosphereColor.rgb, 1.0 - altitudeFade);\n\t\t\tgl_FragColor = mix(atmosphereColor, innerColor, smoothstep(0.0, 1.0, innerFactor));\n      `}\n    }`)}return f}const v=Object.freeze(Object.defineProperty({__proto__:null,SimpleAtmospherePassParameters:f,build:p},Symbol.toStringTag,{value:\"Module\"}));export{f as S,v as a,p as b};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIoL,IAAIA;AAAE,CAAC,SAASC,IAAE;AAAC,EAAAA,GAAEA,GAAE,OAAK,CAAC,IAAE,QAAOA,GAAEA,GAAE,WAAS,CAAC,IAAE,YAAWA,GAAEA,GAAE,cAAY,CAAC,IAAE,eAAcA,GAAEA,GAAE,QAAM,CAAC,IAAE;AAAO,EAAED,OAAIA,KAAE,CAAC,EAAE;AAAE,IAAME,KAAN,cAAgBA,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,WAASF,GAAE;AAAA,EAAI;AAAC;AAAC,EAAE,CAACC,GAAE,EAAC,OAAMD,GAAE,MAAK,CAAC,CAAC,GAAEE,GAAE,WAAU,YAAW,MAAM;;;ACA+sB,IAAM,IAAN,cAAgB,EAAC;AAAC;AAAC,SAAS,EAAE,GAAE;AAAC,QAAMC,KAAE,IAAI,KAAE,EAAC,QAAOC,IAAE,UAASC,GAAC,IAAEF;AAAE,MAAG,EAAE,aAAWG,GAAE;AAAY,IAAAH,GAAE,WAAW,IAAI,EAAE,UAAS,MAAM,GAAEA,GAAE,SAAS,IAAI,SAAQ,MAAM,GAAEC,GAAE,SAAS,IAAI,CAAC,IAAIG,GAAE,yBAAyB,CAACA,IAAEC,OAAIA,GAAE,SAAS,qBAAsB,GAAE,IAAIA,GAAE,gBAAgB,GAAE,IAAIC,GAAE,sBAAsB,CAAC,CAAC,GAAEL,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,EAKt8C,GAAEC,GAAE,KAAK,IAAI;AAAA;AAAA,EAEb;AAAA,OAAM;AAAC,IAAAF,GAAE,QAAQ,CAAC,GAAEA,GAAE,WAAW,IAAI,EAAE,UAAS,MAAM,GAAEA,GAAE,SAAS,IAAI,OAAM,MAAM,GAAEA,GAAE,SAAS,IAAI,WAAU,OAAO;AAAE,UAAMO,KAAE,EAAE,aAAWJ,GAAE;AAAS,IAAAF,GAAE,SAAS,IAAI,CAAC,IAAIG,GAAE,QAAQ,CAACA,IAAEC,OAAIA,GAAE,OAAO,gBAAiB,GAAE,IAAI,EAAE,MAAM,GAAE,IAAID,GAAE,yBAAyB,CAACA,IAAEC,OAAIA,GAAE,SAAS,qBAAsB,CAAC,CAAC,GAAEE,OAAIP,GAAE,SAAS,IAAI,eAAc,OAAO,GAAEC,GAAE,SAAS,IAAI,IAAII,GAAE,iBAAiB,CAAC,GAAEJ,GAAE,SAAS,IAAI,IAAII,GAAE,aAAa,CAAC,GAAEJ,GAAE,SAAS,IAAI,IAAII,GAAE,aAAa,CAAC,GAAEJ,GAAE,SAAS,IAAI,IAAII,GAAE,MAAM,CAAC,GAAEJ,GAAE,SAAS,IAAI,IAAIK,GAAE,YAAY,CAAC;AAAG,UAAM,IAAE,WAAU,IAAE,IAAE;AAAI,IAAAL,GAAE,KAAK,IAAI;AAAA;AAAA,QAEhjBM,KAAE;AAAA;AAAA;AAAA,6CAGiC;AAAA;AAAA;AAAA,iCAGV,EAAE,MAAM,IAAE,CAAC;AAAA;AAAA;AAAA,8BAGd,EAAE,MAAM,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQnC,GAAEL,GAAE,SAAS,IAAI,IAAI,EAAE,OAAO,CAAAE,OAAGA,GAAE,OAAQ,CAAC,GAAEG,MAAGL,GAAE,SAAS,IAAI,IAAII,GAAE,cAAc,CAAC,GAAEJ,GAAE,KAAK,IAAI;AAAA;AAAA;AAAA,QAG9FK,KAAE,qCAAmC;AAAA;AAAA;AAAA;AAAA,MAIvC;AAAA,EAAC;AAAC,SAAOP;AAAC;AAAC,IAAM,IAAE,OAAO,OAAO,OAAO,eAAe,EAAC,WAAU,MAAK,gCAA+B,GAAE,OAAM,EAAC,GAAE,OAAO,aAAY,EAAC,OAAM,SAAQ,CAAC,CAAC;",
  "names": ["n", "e", "t", "f", "p", "v", "n", "e", "o", "r", "c"]
}
