import {
  l as l2
} from "./chunk-ZDSMRGKC.js";
import {
  t as t2
} from "./chunk-I6H66HCE.js";
import {
  M,
  N,
  j,
  j2,
  q,
  x2 as x
} from "./chunk-RRFFPL7N.js";
import {
  a
} from "./chunk-C7S44TP4.js";
import {
  m as m2
} from "./chunk-5TRUGQDM.js";
import {
  a as a2
} from "./chunk-D7DLEBS2.js";
import {
  L,
  S,
  m
} from "./chunk-OOZMA7DN.js";
import {
  l
} from "./chunk-FVPTCNCX.js";
import {
  r as r2
} from "./chunk-23NWA6WL.js";
import {
  s
} from "./chunk-CVWDM4C7.js";
import {
  e,
  r,
  t,
  u
} from "./chunk-CBQWMOBK.js";

// node_modules/@arcgis/core/symbols/support/symbolUtils.js
var y = null;
var p = [255, 255, 255];
function d(e4, t4) {
  return Math.floor(Math.random() * (t4 - e4 + 1) + e4);
}
function m3(e4, t4, l4) {
  const { backgroundColor: r7, outline: i4, dotSize: o4 } = e4, a5 = l4 && l4.swatchSize || t2.size, n4 = 0.8, c2 = Math.round(a5 * a5 / o4 ** 2 * n4), u5 = window.devicePixelRatio, f = document.createElement("canvas"), h2 = a5 * u5;
  f.width = h2, f.height = h2, f.style.width = f.width / u5 + "px", f.style.height = f.height / u5 + "px";
  const p2 = f.getContext("2d");
  if (r7 && (p2.fillStyle = r7.toCss(true), p2.fillRect(0, 0, h2, h2), p2.fill()), p2.fillStyle = t4.toCss(true), y && y.length / 2 === c2)
    for (let s5 = 0; s5 < 2 * c2; s5 += 2) {
      const e5 = y[s5], t5 = y[s5 + 1];
      p2.fillRect(e5, t5, o4 * u5, o4 * u5), p2.fill();
    }
  else {
    y = [];
    for (let e5 = 0; e5 < 2 * c2; e5 += 2) {
      const e6 = d(0, h2), t5 = d(0, h2);
      y.push(e6, t5), p2.fillRect(e6, t5, o4 * u5, o4 * u5), p2.fill();
    }
  }
  i4 && (i4.color && (p2.strokeStyle = i4.color.toCss(true)), p2.lineWidth = i4.width, p2.strokeRect(0, 0, h2, h2));
  const m4 = new Image(a5, a5);
  return m4.src = f.toDataURL(), m4;
}
function b(e4, t4 = {}) {
  const l4 = t4.radius || 40, r7 = 2 * Math.PI * l4, s5 = e4.length, a5 = r7 / s5, n4 = [], c2 = j(t4.outline);
  c2 && (c2.width *= 2), (c2 || t4.backgroundColor) && n4.push({ shape: { type: "circle", cx: l4, cy: l4, r: l4 }, fill: t4.backgroundColor, stroke: c2, offset: [0, 0] });
  const u5 = t4.values, f = u5 && u5.length === s5 && 100 === u5.reduce((e5, t5) => e5 + t5, 0), h2 = [0];
  for (let i4 = 0; i4 < s5; i4++) {
    const t5 = f ? u5[i4] * r7 / 100 : null;
    f && h2.push(t5 + h2[i4]), n4.push({ shape: { type: "circle", cx: l4, cy: l4, r: l4 / 2 }, fill: [0, 0, 0, 0], stroke: { width: l4, dashArray: `${t5 || a5} ${r7}`, dashoffset: "-" + (f ? h2[i4] / 2 : i4 * (a5 / 2)), color: e4[i4] }, offset: [0, 0] });
  }
  let y3 = null;
  const d3 = 2 * l4 + ((c2 == null ? void 0 : c2.width) || 0), m4 = t4.holePercentage;
  if (m4) {
    c2 && n4.push({ shape: { type: "circle", cx: l4, cy: l4, r: l4 * m4 }, fill: null, stroke: c2, offset: [0, 0] });
    const e5 = d3 / 2;
    y3 = [[{ shape: { type: "circle", cx: e5, cy: e5, r: e5 }, fill: p, stroke: c2 ? { ...c2, color: p } : null, offset: [0, 0] }, { shape: { type: "circle", cx: e5, cy: e5, r: l4 * m4 }, fill: [0, 0, 0], stroke: null, offset: [0, 0] }]];
  }
  return l2([n4], [d3, d3], { effectView: t4.effectList, ignoreStrokeWidth: true, masking: y3, rotation: -90 });
}
function g(e4, t4 = {}) {
  const l4 = 24, r7 = 75, i4 = "horizontal" === t4.align, s5 = i4 ? r7 : l4, o4 = i4 ? l4 : r7, { width: a5 = s5, height: n4 = o4, gradient: c2 = true } = t4, u5 = window.devicePixelRatio, f = a5 * u5, h2 = n4 * u5, y3 = document.createElement("canvas");
  y3.width = f, y3.height = h2, y3.style.width = `${a5}px`, y3.style.height = `${n4}px`;
  const p2 = y3.getContext("2d"), d3 = i4 ? f : 0, m4 = i4 ? 0 : h2;
  if (c2) {
    const t5 = p2.createLinearGradient(0, 0, d3, m4), l5 = e4.length, r8 = 1 === l5 ? 0 : 1 / (l5 - 1);
    e4.forEach((e5, l6) => t5.addColorStop(l6 * r8, e5.toString())), p2.fillStyle = t5, p2.fillRect(0, 0, f, h2);
  } else {
    const t5 = i4 ? f / e4.length : f, l5 = i4 ? h2 : h2 / e4.length;
    let r8 = 0, s6 = 0;
    for (const o5 of e4)
      p2.fillStyle = o5.toString(), p2.fillRect(r8, s6, t5, l5), r8 = i4 ? r8 + t5 : 0, s6 = i4 ? 0 : s6 + l5;
  }
  const b2 = document.createElement("div");
  return b2.style.width = `${a5}px`, b2.style.height = `${n4}px`, w(b2, t4 == null ? void 0 : t4.effectList), b2.appendChild(y3), b2;
}
function w(e4, t4) {
  if (!t4)
    return;
  e4.style.filter = q(t4);
  const l4 = t4.effects;
  if (l4) {
    for (const r7 of l4)
      if ("drop-shadow" === (r7 == null ? void 0 : r7.type)) {
        r7.offsetX < 0 ? e4.style.marginLeft = `${Math.abs(r7.offsetX)}px` : e4.style.marginRight = `${r7.offsetX}px`;
        break;
      }
  }
}
async function S2(e4, t4) {
  switch (e4.type) {
    case "web-style": {
      const { previewWebStyleSymbol: l4 } = await import("./previewWebStyleSymbol-WMGHRK6E.js");
      return l4(e4, S2, t4);
    }
    case "label-3d":
    case "line-3d":
    case "mesh-3d":
    case "point-3d":
    case "polygon-3d": {
      const { previewSymbol3D: l4 } = await import("./previewSymbol3D-GK6JNNLM.js");
      return l4(e4, t4);
    }
    case "simple-marker":
    case "simple-line":
    case "simple-fill":
    case "picture-marker":
    case "picture-fill":
    case "text": {
      const { previewSymbol2D: l4 } = await import("./previewSymbol2D-BUV6HKMY.js");
      return l4(e4, t4);
    }
    case "cim": {
      const { previewCIMSymbol: l4 } = await import("./previewCIMSymbol-2UNZXC6V.js");
      return l4(e4, t4);
    }
    default:
      return;
  }
}
function v(e4) {
  return e4 && "opacity" in e4 ? e4.opacity * v(e4.parent) : 1;
}
async function x2(i4, s5) {
  if (!i4)
    return;
  const o4 = i4.sourceLayer, a5 = (r(s5) && s5.useSourceLayer ? o4 : i4.layer) ?? o4, f = v(a5);
  if (r(i4.symbol) && (!r(s5) || true !== s5.ignoreGraphicSymbol)) {
    const t4 = "web-style" === i4.symbol.type ? await i4.symbol.fetchSymbol({ ...s5, cache: r(s5) ? s5.webStyleCache : null }) : i4.symbol.clone();
    return x(t4, null, f), t4;
  }
  const h2 = r(s5) && s5.renderer || a5 && "renderer" in a5 && a5.renderer;
  let y3 = h2 && "getSymbolAsync" in h2 ? await h2.getSymbolAsync(i4, s5) : null;
  if (!y3)
    return;
  if (y3 = "web-style" === y3.type ? await y3.fetchSymbol({ ...s5, cache: r(s5) ? s5.webStyleCache : null }) : y3.clone(), !("visualVariables" in h2) || !h2.visualVariables || !h2.visualVariables.length)
    return x(y3, null, f), y3;
  if ("arcadeRequiredForVisualVariables" in h2 && h2.arcadeRequiredForVisualVariables && (t(s5) || t(s5.arcade))) {
    const e4 = { ...e(s5) };
    e4.arcade = await a2(), s5 = e4;
  }
  const p2 = await import("./visualVariableUtils-UDLADD73.js"), d3 = [], m4 = [], b2 = [], g3 = [];
  for (const e4 of h2.visualVariables)
    switch (e4.type) {
      case "color":
        d3.push(e4);
        break;
      case "opacity":
        m4.push(e4);
        break;
      case "rotation":
        g3.push(e4);
        break;
      case "size":
        e4.target || b2.push(e4);
    }
  const w2 = !!d3.length && d3[d3.length - 1], S3 = w2 ? p2.getColor(w2, i4, s5) : null, x3 = !!m4.length && m4[m4.length - 1];
  let V = x3 ? p2.getOpacity(x3, i4, s5) : null;
  if (null != f && (V = null != V ? V * f : f), x(y3, S3, V), b2.length) {
    const e4 = p2.getAllSizes(b2, i4, s5);
    await M(y3, e4);
  }
  for (const e4 of g3)
    N(y3, p2.getRotationAngle(e4, i4, s5), e4.axis);
  return y3;
}

// node_modules/@arcgis/core/renderers/support/numberUtils.js
var n = /^-?(\d+)(\.(\d+))?$/i;
function e2(t4, n4) {
  return t4 - n4;
}
function r3(t4, n4) {
  let e4, r7;
  return e4 = Number(t4.toFixed(n4)), e4 < t4 ? r7 = e4 + 1 / 10 ** n4 : (r7 = e4, e4 -= 1 / 10 ** n4), e4 = Number(e4.toFixed(n4)), r7 = Number(r7.toFixed(n4)), [e4, r7];
}
function o(t4, n4, e4, r7, o4) {
  const i4 = l3(t4, n4, e4, r7), u5 = null == i4.previous || i4.previous <= o4, s5 = null == i4.next || i4.next <= o4;
  return u5 && s5 || i4.previous + i4.next <= 2 * o4;
}
function i(t4) {
  const e4 = String(t4), r7 = e4.match(n);
  if (r7 && r7[1])
    return { integer: r7[1].split("").length, fractional: r7[3] ? r7[3].split("").length : 0 };
  if (e4.toLowerCase().includes("e")) {
    const t5 = e4.split("e"), n4 = t5[0], r8 = t5[1];
    if (n4 && r8) {
      const t6 = Number(n4);
      let e5 = Number(r8);
      const o4 = e5 > 0;
      o4 || (e5 = Math.abs(e5));
      const l4 = i(t6);
      return o4 ? (l4.integer += e5, e5 > l4.fractional ? l4.fractional = 0 : l4.fractional -= e5) : (l4.fractional += e5, e5 > l4.integer ? l4.integer = 1 : l4.integer -= e5), l4;
    }
  }
  return { integer: 0, fractional: 0 };
}
function l3(t4, n4, e4, r7) {
  const o4 = { previous: null, next: null };
  if (null != e4) {
    const r8 = t4 - e4, i4 = n4 - e4 - r8;
    o4.previous = Math.floor(Math.abs(100 * i4 / r8));
  }
  if (null != r7) {
    const e5 = r7 - t4, i4 = r7 - n4 - e5;
    o4.next = Math.floor(Math.abs(100 * i4 / e5));
  }
  return o4;
}
function u2(t4, n4 = {}) {
  const l4 = t4.slice(0), { tolerance: u5 = 2, strictBounds: s5 = false, indexes: c2 = l4.map((t5, n5) => n5) } = n4;
  c2.sort(e2);
  for (let e4 = 0; e4 < c2.length; e4++) {
    const t5 = c2[e4], n5 = l4[t5], a5 = 0 === t5 ? null : l4[t5 - 1], f = t5 === l4.length - 1 ? null : l4[t5 + 1], m4 = i(n5).fractional;
    if (m4) {
      let i4, c3 = 0, g3 = false;
      for (; c3 <= m4 && !g3; ) {
        const t6 = r3(n5, c3);
        i4 = s5 && 0 === e4 ? t6[1] : t6[0], g3 = o(n5, i4, a5, f, u5), c3++;
      }
      g3 && (l4[t5] = i4);
    }
  }
  return l4;
}
var s2 = { maximumFractionDigits: 20 };
function c(n4) {
  return m(n4, s2);
}

// node_modules/@arcgis/core/widgets/Legend/support/utils.js
var s3 = "<";
var i2 = ">";
var r4 = S("short-date");
function o2(t4, l4, o4, e4) {
  let n4 = "";
  0 === l4 ? n4 = `${s3} ` : l4 === o4 && (n4 = `${i2} `);
  let u5 = null;
  return u5 = e4 ? L(t4, r4) : c(t4), n4 + u5;
}
var e3 = ["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=", "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];
async function n2(A) {
  if (!("visualVariables" in A) || !A.visualVariables)
    return null;
  const t4 = A.visualVariables.find((A2) => "color" === A2.type);
  if (!t4)
    return null;
  let a5 = null, l4 = null;
  if (t4.stops) {
    if (1 === t4.stops.length)
      return t4.stops[0].color;
    a5 = t4.stops[0].value, l4 = t4.stops[t4.stops.length - 1].value;
  }
  const s5 = a5 + (l4 - a5) / 2, { getColor: i4 } = await import("./visualVariableUtils-UDLADD73.js");
  return i4(t4, s5);
}
async function u3(A, t4) {
  const a5 = A.trailCap, s5 = A.trailWidth || 1, i4 = t4 || await n2(A) || A.color;
  return new m2({ cap: a5, color: i4, width: s5 });
}

// node_modules/@arcgis/core/widgets/Legend/support/colorRampUtils.js
var o3 = new l([64, 64, 64]);
function n3(l4, o4) {
  const n4 = [], r7 = l4.length - 1;
  return 5 === l4.length ? n4.push(0, 2, 4) : n4.push(0, r7), l4.map((l5, t4) => n4.includes(t4) ? o2(l5, t4, r7, o4) : null);
}
async function r5(l4, e4, o4) {
  let r7 = false, a5 = [], u5 = [];
  if (l4.stops) {
    const e5 = l4.stops;
    a5 = e5.map((l5) => l5.value), r7 = e5.some((l5) => !!l5.label), r7 && (u5 = e5.map((l5) => l5.label));
  }
  const s5 = a5[0], i4 = a5[a5.length - 1];
  if (null == s5 && null == i4)
    return null;
  const c2 = r7 ? null : n3(a5, o4);
  return (await Promise.all(a5.map(async (o5, n4) => ({ value: o5, color: "opacity" === l4.type ? await t3(o5, l4, e4) : (await import("./visualVariableUtils-UDLADD73.js")).getColor(l4, o5), label: r7 ? u5[n4] : c2[n4] })))).reverse();
}
async function t3(e4, n4, r7 = o3) {
  const t4 = new l(r7), a5 = (await import("./visualVariableUtils-UDLADD73.js")).getOpacity(n4, e4);
  return null != a5 && (t4.a = a5), t4;
}
function a3(l4) {
  let e4 = false, o4 = [], r7 = [];
  o4 = l4.map((l5) => l5.value), e4 = l4.some((l5) => !!l5.label), e4 && (r7 = l4.map((l5) => l5.label));
  const t4 = o4[0], a5 = o4[o4.length - 1];
  if (null == t4 && null == a5)
    return null;
  const s5 = e4 ? null : n3(o4, false);
  return o4.map((o5, n4) => ({ value: o5, color: u4(o5, l4), label: e4 ? r7[n4] : s5[n4] })).reverse();
}
function u4(e4, o4) {
  const { startIndex: n4, endIndex: r7, weight: t4 } = s4(e4, o4);
  if (n4 === r7)
    return o4[n4].color;
  const a5 = l.blendColors(o4[n4].color, o4[r7].color, t4);
  return new l(a5);
}
function s4(l4, e4) {
  let o4 = 0, n4 = e4.length - 1;
  return e4.some((e5, r7) => l4 < e5.value ? (n4 = r7, true) : (o4 = r7, false)), { startIndex: o4, endIndex: n4, weight: (l4 - e4[o4].value) / (e4[n4].value - e4[o4].value) };
}
function i3(e4, o4) {
  let n4 = [];
  if (e4 && "multipart" === e4.type)
    e4.colorRamps.reverse().forEach((r7, t4) => {
      0 === t4 ? n4.push({ value: o4.max, color: new l(r7.toColor), label: "high" }) : n4.push({ value: null, color: new l(r7.toColor), label: "" }), t4 === e4.colorRamps.length - 1 ? n4.push({ value: o4.min, color: new l(r7.fromColor), label: "low" }) : n4.push({ value: null, color: new l(r7.fromColor), label: "" });
    });
  else {
    let r7, t4;
    e4 && "algorithmic" === e4.type ? (r7 = e4.fromColor, t4 = e4.toColor) : (r7 = [0, 0, 0, 1], t4 = [255, 255, 255, 1]), n4 = [{ value: o4.max, color: new l(t4), label: "high" }, { value: o4.min, color: new l(r7), label: "low" }];
  }
  return n4;
}

// node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js
function r6(r7) {
  if (!r7.colorStops)
    return [];
  const e4 = [...r7.colorStops].filter((o4) => {
    var _a;
    return ((_a = o4.color) == null ? void 0 : _a.a) > 0;
  });
  let t4 = e4.length - 1;
  if (e4 && e4[0]) {
    const r8 = e4[t4];
    r8 && 1 !== r8.ratio && (e4.push(new a({ ratio: 1, color: r8.color })), t4++);
  }
  return e4.map((o4, e5) => {
    var _a, _b;
    let l4 = "";
    return 0 === e5 ? l4 = ((_a = r7.legendOptions) == null ? void 0 : _a.minLabel) || "low" : e5 === t4 && (l4 = ((_b = r7.legendOptions) == null ? void 0 : _b.maxLabel) || "high"), { color: o4.color, label: l4, ratio: o4.ratio };
  }).reverse();
}

// node_modules/@arcgis/core/renderers/support/utils.js
var d2 = s.getLogger("esri.renderers.support.utils");
var y2 = S("short-date");
function g2(e4, l4, t4) {
  r2(e4, l4, () => []).push(...t4);
}
async function h(l4) {
  var _a, _b;
  const n4 = /* @__PURE__ */ new Map();
  if ("visualVariables" in l4 && l4.visualVariables) {
    const e4 = l4.visualVariables.filter((e5) => "color" === e5.type);
    for (const l5 of e4) {
      const e5 = l5.field || l5.valueExpression, t4 = (await r5(l5)).map((e6) => e6.color);
      g2(n4, e5, t4);
    }
  }
  if ("heatmap" === l4.type) {
    const e4 = r6(l4).map((e5) => e5.color);
    g2(n4, l4.field, e4);
  } else if ("pie-chart" === l4.type) {
    for (const e4 of l4.attributes)
      g2(n4, e4.field, [e4.color]);
    g2(n4, null, [(_a = l4 == null ? void 0 : l4.othersCategory) == null ? void 0 : _a.color, j2(l4.backgroundFillSymbol, null)]);
  } else if ("dot-density" === l4.type) {
    for (const e4 of l4.attributes)
      g2(n4, e4.field, [e4.color]);
    g2(n4, null, [l4.backgroundColor]);
  } else if ("unique-value" === l4.type)
    if ("predominance" === ((_b = l4.authoringInfo) == null ? void 0 : _b.type))
      for (const e4 of l4.uniqueValueInfos)
        g2(n4, e4.value.toString(), [j2(e4.symbol, null)]);
    else {
      const e4 = l4.uniqueValueInfos.map((e5) => j2(e5.symbol, null)), { field: t4, field2: o4, field3: i4, valueExpression: a5 } = l4;
      (t4 || a5) && g2(n4, t4 || a5, e4), o4 && g2(n4, o4, e4), i4 && g2(n4, i4, e4);
    }
  else if ("class-breaks" === l4.type) {
    const e4 = l4.classBreakInfos.map((e5) => j2(e5.symbol, null));
    g2(n4, l4.field || l4.valueExpression, e4);
  } else
    "simple" === l4.type && g2(n4, null, [j2(l4.symbol, null)]);
  return "defaultSymbol" in l4 && l4.defaultSymbol && g2(n4, null, [j2(l4.defaultSymbol, null)]), n4.forEach((l5, t4) => {
    const o4 = u(l5.filter(Boolean), (e4, l6) => JSON.stringify(e4) === JSON.stringify(l6));
    n4.set(t4, o4);
  }), n4;
}

export {
  i,
  l3 as l,
  u2 as u,
  s3 as s,
  i2,
  o2 as o,
  e3 as e,
  n2 as n,
  u3 as u2,
  r5 as r,
  a3 as a,
  u4 as u3,
  i3,
  r6 as r2,
  h,
  m3 as m,
  b,
  g,
  S2 as S,
  x2 as x
};
//# sourceMappingURL=chunk-CXIMLSDF.js.map
