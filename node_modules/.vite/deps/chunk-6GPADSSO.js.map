{
  "version": 3,
  "sources": ["../../@arcgis/core/layers/support/arcgisLayerUrl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as r}from\"../../core/maybe.js\";import{urlToObject as t,removeTrailingSlash as n,removeQueryParameters as s,join as u,Url as i,makeAbsolute as l}from\"../../core/urlUtils.js\";import{w as o}from\"../../chunks/persistableUrlUtils.js\";const c={mapserver:\"MapServer\",imageserver:\"ImageServer\",featureserver:\"FeatureServer\",sceneserver:\"SceneServer\",streamserver:\"StreamServer\",vectortileserver:\"VectorTileServer\"},a=Object.values(c),f=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/rest\\\\/services\\\\/(.+?)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),v=new RegExp(`^((?:https?:)?\\\\/\\\\/\\\\S+?\\\\/([^\\\\/\\\\n]+)\\\\/(${a.join(\"|\")}))(?:\\\\/(?:layers\\\\/)?(\\\\d+))?`,\"i\"),p=/(.*?)\\/(?:layers\\/)?(\\d+)\\/?$/i;function d(e){return!!f.test(e)}function m(r){if(e(r))return null;const n=t(r),s=n.path.match(f)||n.path.match(v);if(!s)return null;const[,u,i,l,o]=s,a=i.indexOf(\"/\");return{title:h(-1!==a?i.slice(a+1):i),serverType:c[l.toLowerCase()],sublayer:null!=o&&\"\"!==o?parseInt(o,10):null,url:{path:u}}}function w(e){const r=t(e).path.match(p);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function h(e){return(e=e.replace(/\\s*[/_]+\\s*/g,\" \"))[0].toUpperCase()+e.slice(1)}function y(e,t){const n=[];if(e){const t=m(e);r(t)&&t.title&&n.push(t.title)}if(t){const e=h(t);n.push(e)}if(2===n.length){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(\" - \")}function g(e){if(!e)return!1;const r=\".arcgis.com/\",t=\"//services\",n=\"//tiles\",s=\"//features\",u=(e=e.toLowerCase()).includes(r),i=e.includes(t)||e.includes(n)||e.includes(s);return u&&i}function C(e,r){return r&&e&&e.toLowerCase().includes(r.toLowerCase())}function S(e,r){return e?n(s(e,r)):e}function L(e){let{url:u}=e;if(!u)return{url:u};u=s(u,e.logger);const i=t(u),l=m(i.path);let o;if(r(l))null!=l.sublayer&&null==e.layer.layerId&&(o=l.sublayer),u=l.url.path;else if(e.nonStandardUrlAllowed){const e=w(i.path);r(e)&&(u=e.serviceUrl,o=e.sublayerId)}return{url:n(u),layerId:o}}function b(e,r,t,n,s){o(r,n,\"url\",s),n.url&&null!=e.layerId&&(n.url=u(n.url,t,e.layerId.toString()))}function I(e){if(!e)return!1;const r=e.toLowerCase(),t=r.includes(\"/services/\"),n=r.includes(\"/mapserver/wmsserver\"),s=r.includes(\"/imageserver/wmsserver\"),u=r.includes(\"/wmsserver\");return t&&(n||s||u)}function j(e){if(!e)return!1;const r=new i(l(e)).authority.toLowerCase();return\"server.arcgisonline.com\"===r||\"services.arcgisonline.com\"===r}function U(e){if(!e)return!1;return new i(l(e)).authority.toLowerCase().includes(\"arcgis.com\")}export{h as cleanTitle,U as isAGOLUrl,d as isArcGISUrl,g as isHostedAgolService,C as isHostedSecuredProxyService,j as isServerOrServicesAGOLUrl,I as isWmsServer,m as parse,w as parseNonStandardSublayerUrl,S as sanitizeUrl,L as sanitizeUrlWithLayerId,a as serverTypes,y as titleFromUrlAndName,b as writeUrlWithLayerId};\n"],
  "mappings": "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",
  "names": ["p", "r", "a", "y", "t", "e", "r", "e", "t", "j"]
}
