{
  "version": 3,
  "sources": ["../../@arcgis/core/geometry/support/meshUtils/projection.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport r from\"../../../core/Logger.js\";import{isNone as e}from\"../../../core/maybe.js\";import{a as o,i as t,f as n,t as f}from\"../../../chunks/mat3.js\";import{c as a}from\"../../../chunks/mat3f64.js\";import{c}from\"../../../chunks/mat4f64.js\";import{t as m,n as s}from\"../../../chunks/vec3.js\";import{c as i}from\"../../../chunks/vec3f64.js\";import{projectBuffer as y,computeTranslationToOriginAndRotation as p}from\"../../projection.js\";import{getSphericalPCPF as u}from\"../../projectionEllipsoid.js\";import{isCGCS2000 as P,isMars as T,isMoon as l}from\"../spatialReferenceUtils.js\";import{y2lat as A}from\"../webMercatorUtils.js\";import{BufferViewVec3f as F,BufferViewVec3f64 as d}from\"../buffer/BufferView.js\";import{t as E,a as C,n as _}from\"../../../chunks/vec32.js\";const g=r.getLogger(\"esri.geometry.support.meshUtils.normalProjection\");function j(r,e,o,t,n){return S(t)?(B(Y.TO_PCPF,F.fromTypedArray(r),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n)),n):(g.error(\"Cannot convert spatial reference to PCPF\"),n)}function h(r,e,o,t,n){return S(t)?(B(Y.FROM_PCPF,F.fromTypedArray(r),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n)),n):(g.error(\"Cannot convert to spatial reference from PCPF\"),n)}function M(r,e,o){return y(r,e,0,o,u(e),0,r.length/3),o}function O(r,e,o){return y(r,u(o),0,e,o,0,r.length/3),e}function R(r,o,t){if(e(r))return o;const n=d.fromTypedArray(r),f=d.fromTypedArray(o);return E(f,n,t),o}function v(r,n,f){if(e(r))return n;o(x,f);const a=F.fromTypedArray(r),c=F.fromTypedArray(n);return C(c,a,x),t(x)||_(c,c),n}function V(r,n,f){if(e(r))return n;o(x,f);const a=F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),c=F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT);if(C(c,a,x),t(x)||_(c,c),r!==n)for(let e=3;e<r.length;e+=4)n[e]=r[e];return n}function k(r,e,o,t,n){if(!S(t))return g.error(\"Cannot convert spatial reference to PCPF\"),n;B(Y.TO_PCPF,F.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function L(r,e,o,t,n){if(!S(t))return g.error(\"Cannot convert to spatial reference from PCPF\"),n;B(Y.FROM_PCPF,F.fromTypedArray(r,16),d.fromTypedArray(e),d.fromTypedArray(o),t,F.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function B(r,e,o,t,a,c){if(!e)return;const i=o.count,y=u(a);if(b(a))for(let s=0;s<i;s++)t.getVec(s,U),e.getVec(s,w),p(y,U,W,y),n(x,W),r===Y.FROM_PCPF&&f(x,x),m(w,w,x),c.setVec(s,w);else for(let u=0;u<i;u++){t.getVec(u,U),e.getVec(u,w),p(y,U,W,y),n(x,W);const a=A(o.get(u,1));let i=Math.cos(a);r===Y.TO_PCPF&&(i=1/i),x[0]*=i,x[1]*=i,x[2]*=i,x[3]*=i,x[4]*=i,x[5]*=i,r===Y.FROM_PCPF&&f(x,x),m(w,w,x),s(w,w),c.setVec(u,w)}return c}function S(r){return b(r)||N(r)}function b(r){return r.isWGS84||P(r)||T(r)||l(r)}function N(r){return r.isWebMercator}var Y;!function(r){r[r.TO_PCPF=0]=\"TO_PCPF\",r[r.FROM_PCPF=1]=\"FROM_PCPF\"}(Y||(Y={}));const U=i(),w=i(),W=c(),x=a();export{O as projectFromPCPF,h as projectNormalFromPCPF,j as projectNormalToPCPF,L as projectTangentFromPCPF,k as projectTangentToPCPF,M as projectToPCPF,v as transformNormal,R as transformPosition,V as transformTangent};\n"],
  "mappings": "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",
  "names": ["j", "r", "e", "o", "t", "n", "O", "a", "c", "z", "i", "s", "u"]
}
