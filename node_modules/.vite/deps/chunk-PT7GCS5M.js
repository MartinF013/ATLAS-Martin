import {
  w
} from "./chunk-ZO4P57E5.js";
import {
  i as i3,
  i2 as i4,
  o as o5
} from "./chunk-YLSPLHY5.js";
import {
  e as e2,
  e2 as e3,
  f,
  o as o3,
  o2 as o4,
  t
} from "./chunk-NXOQBIK7.js";
import {
  E as E3
} from "./chunk-ERNXFM5T.js";
import {
  i as i2
} from "./chunk-6ITXWFMK.js";
import {
  e as e4
} from "./chunk-SV4VP57N.js";
import {
  E as E2,
  S,
  _,
  i,
  l
} from "./chunk-5EXPMKQP.js";
import {
  W,
  a,
  c,
  h as h2,
  s
} from "./chunk-B7F3T673.js";
import {
  h
} from "./chunk-TTKSAULB.js";
import {
  o
} from "./chunk-TEJEYVH4.js";
import {
  R
} from "./chunk-FPMD6IB4.js";
import {
  d2 as d,
  o2,
  x
} from "./chunk-EEJIELE6.js";
import {
  E
} from "./chunk-Y55TYMBP.js";
import {
  O,
  n
} from "./chunk-MDCKEJ7B.js";
import {
  e
} from "./chunk-IVBXK6OP.js";

// node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
var _2 = class extends e2 {
  initializeProgram(e5) {
    const t3 = _2.shader.get().build(this.configuration);
    return new o3(e5.rctx, t3, E);
  }
  _setPipelineState(e5, r) {
    const i5 = this.configuration, s2 = e5 === O.NONE, o6 = e5 === O.FrontFace;
    return W({ blending: i5.output !== o.Color && i5.output !== o.Alpha || !i5.transparent ? null : s2 ? C : E2(e5), culling: h2(i5.cullFace), depthTest: { func: l(e5) }, depthWrite: s2 ? i5.writeDepth && a : S(e5), colorWrite: c, stencilWrite: i5.hasOccludees ? e3 : null, stencilTest: i5.hasOccludees ? r ? o4 : f : null, polygonOffset: s2 || o6 ? null : i(i5.enableOffset) });
  }
  initializePipeline() {
    return this._occludeePipelineState = this._setPipelineState(this.configuration.transparencyPassType, true), this._setPipelineState(this.configuration.transparencyPassType, false);
  }
  getPipelineState(e5, t3) {
    return t3 ? this._occludeePipelineState : super.getPipelineState(e5, t3);
  }
};
_2.shader = new t(w, () => import("./ImageMaterial.glsl-6KAWWAXF.js"));
var C = s(R.ONE, R.ONE_MINUS_SRC_ALPHA);
var w2 = class extends i2 {
  constructor() {
    super(...arguments), this.output = o.Color, this.cullFace = n.None, this.hasSlicePlane = false, this.transparent = false, this.enableOffset = true, this.writeDepth = true, this.hasOccludees = false, this.transparencyPassType = O.NONE, this.hasMultipassTerrain = false, this.cullAboveGround = false;
  }
};
e([e4({ count: o.COUNT })], w2.prototype, "output", void 0), e([e4({ count: n.COUNT })], w2.prototype, "cullFace", void 0), e([e4()], w2.prototype, "hasSlicePlane", void 0), e([e4()], w2.prototype, "transparent", void 0), e([e4()], w2.prototype, "enableOffset", void 0), e([e4()], w2.prototype, "writeDepth", void 0), e([e4()], w2.prototype, "hasOccludees", void 0), e([e4({ count: O.COUNT })], w2.prototype, "transparencyPassType", void 0), e([e4()], w2.prototype, "hasMultipassTerrain", void 0), e([e4()], w2.prototype, "cullAboveGround", void 0);

// node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
var m = class extends d {
  constructor(e5) {
    super(e5, new f2()), this.supportsEdges = true, this.techniqueConfig = new w2();
  }
  getConfiguration(e5, t3) {
    return this.techniqueConfig.output = e5, this.techniqueConfig.cullFace = this.parameters.cullFace, this.techniqueConfig.hasSlicePlane = this.parameters.hasSlicePlane, this.techniqueConfig.transparent = this.parameters.transparent, this.techniqueConfig.writeDepth = this.parameters.writeDepth, this.techniqueConfig.hasOccludees = this.parameters.hasOccludees, this.techniqueConfig.transparencyPassType = t3.transparencyPassType, this.techniqueConfig.enableOffset = t3.camera.relativeElevation < _, this.techniqueConfig.hasMultipassTerrain = t3.multipassTerrain.enabled, this.techniqueConfig.cullAboveGround = t3.multipassTerrain.cullAboveGround, this.techniqueConfig;
  }
  intersect(e5, t3, r, i5, s2, a2, n2) {
    x(e5, t3, i5, s2, a2, void 0, n2);
  }
  requiresSlot(t3, i5) {
    if (t3 === E3.DRAPED_MATERIAL)
      return true;
    if (i3(i5) === o.Highlight)
      return t3 === E3.OPAQUE_MATERIAL;
    return t3 === (this.parameters.transparent ? this.parameters.writeDepth ? E3.TRANSPARENT_MATERIAL : E3.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL : E3.OPAQUE_MATERIAL);
  }
  createGLMaterial(t3) {
    return t3.output === o.Color || t3.output === o.Alpha || t3.output === o.Highlight ? new d2(t3) : void 0;
  }
  createBufferWriter() {
    return new i4(o5);
  }
};
var d2 = class extends h {
  constructor(e5) {
    super({ ...e5, ...e5.material.parameters });
  }
  _updateParameters(e5) {
    return this.updateTexture(this._material.parameters.textureId), this._material.setParameters(this.textureBindParameters), this.ensureTechnique(_2, e5);
  }
  _updateOccludeeState(e5) {
    e5.hasOccludees !== this._material.parameters.hasOccludees && (this._material.setParameters({ hasOccludees: e5.hasOccludees }), this._updateParameters(e5));
  }
  beginSlot(t3) {
    return this._output !== o.Color && this._output !== o.Alpha || this._updateOccludeeState(t3), this._updateParameters(t3);
  }
};
var f2 = class extends o2 {
  constructor() {
    super(...arguments), this.transparent = false, this.writeDepth = true, this.hasSlicePlane = false, this.cullFace = n.None, this.hasOccludees = false, this.opacity = 1, this.textureId = null, this.initTextureTransparent = true;
  }
};

export {
  m
};
//# sourceMappingURL=chunk-PT7GCS5M.js.map
