{
  "version": 3,
  "sources": ["../../@arcgis/core/webdoc/support/writeUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{clone as t}from\"../../core/lang.js\";import{isSome as n}from\"../../core/maybe.js\";import{getDeepValue as r}from\"../../core/object.js\";import{numberToJSON as i}from\"../../core/accessorSupport/extensions/serializableProperty/writer.js\";import{isFeatureCollectionLayer as o}from\"../../layers/support/layerUtils.js\";const l=new Set([\"bing-maps\",\"imagery\",\"imagery-tile\",\"map-image\",\"open-street-map\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wms\",\"wmts\"]),a=new Set([\"csv\",\"feature\",\"geo-rss\",\"geojson\",\"group\",\"imagery\",\"imagery-tile\",\"kml\",\"map-image\",\"map-notes\",\"ogc-feature\",\"route\",\"tile\",\"unknown\",\"unsupported\",\"vector-tile\",\"web-tile\",\"wfs\",\"wms\",\"wmts\"]);function s(e){l.delete(e),a.delete(e)}function m(e){l.add(e),a.add(e)}function p(e){return\"basemap\"===e.layerContainerType?l:\"operational-layers\"===e.layerContainerType?a:null}function c(e,t){if(t.restrictedWebMapWriting){const r=p(t);return!n(r)||r.has(e.type)&&!o(e)}return!0}function u(e,t){if(o(e)){const n=r(\"featureCollection.layers\",t),i=n&&n[0]&&n[0].layerDefinition;i&&d(e,i)}else if(\"stream\"===e.type){d(e,t.layerDefinition=t.layerDefinition||{})}else\"group\"!==e.type&&d(e,t)}function d(e,t){\"maxScale\"in e&&(t.maxScale=i(e.maxScale)),\"minScale\"in e&&(t.minScale=i(e.minScale))}function f(e,t){if(u(e,t),\"blendMode\"in e&&(t.blendMode=e.blendMode,\"normal\"===t.blendMode&&delete t.blendMode),t.opacity=i(e.opacity),t.title=e.title||\"Layer\",t.visibility=e.visible,\"legendEnabled\"in e&&\"wmts\"!==e.type)if(o(e)){const n=t.featureCollection;n&&(n.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function y(r,i,o){if(!(\"write\"in r)||!r.write)return o&&o.messages&&o.messages.push(new e(\"layer:unsupported\",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(c(r,o)){const e={};return r.write(e,o)?e:null}return n(i)&&f(r,i=t(i)),i}export{m as disableRestrictedWriting,s as enableRestrictedWriting,y as getLayerJSON};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAIiW,IAAM,IAAE,oBAAI,IAAI,CAAC,aAAY,WAAU,gBAAe,aAAY,mBAAkB,QAAO,WAAU,eAAc,eAAc,YAAW,OAAM,MAAM,CAAC;AAAzJ,IAA2JA,KAAE,oBAAI,IAAI,CAAC,OAAM,WAAU,WAAU,WAAU,SAAQ,WAAU,gBAAe,OAAM,aAAY,aAAY,eAAc,SAAQ,QAAO,WAAU,eAAc,eAAc,YAAW,OAAM,OAAM,MAAM,CAAC;AAAwE,SAAS,EAAE,GAAE;AAAC,SAAM,cAAY,EAAE,qBAAmB,IAAE,yBAAuB,EAAE,qBAAmBC,KAAE;AAAI;AAAC,SAAS,EAAE,GAAEC,IAAE;AAAC,MAAGA,GAAE,yBAAwB;AAAC,UAAMC,KAAE,EAAED,EAAC;AAAE,WAAM,CAAC,EAAEC,EAAC,KAAGA,GAAE,IAAI,EAAE,IAAI,KAAG,CAACF,GAAE,CAAC;AAAA,EAAC;AAAC,SAAM;AAAE;AAAC,SAAS,EAAE,GAAEC,IAAE;AAAC,MAAGD,GAAE,CAAC,GAAE;AAAC,UAAM,IAAE,EAAE,4BAA2BC,EAAC,GAAE,IAAE,KAAG,EAAE,CAAC,KAAG,EAAE,CAAC,EAAE;AAAgB,SAAG,EAAE,GAAE,CAAC;AAAA,EAAC,WAAS,aAAW,EAAE,MAAK;AAAC,MAAE,GAAEA,GAAE,kBAAgBA,GAAE,mBAAiB,CAAC,CAAC;AAAA,EAAC;AAAK,gBAAU,EAAE,QAAM,EAAE,GAAEA,EAAC;AAAC;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,gBAAa,MAAIA,GAAE,WAAS,EAAE,EAAE,QAAQ,IAAG,cAAa,MAAIA,GAAE,WAAS,EAAE,EAAE,QAAQ;AAAE;AAAC,SAAS,EAAE,GAAEA,IAAE;AAAC,MAAG,EAAE,GAAEA,EAAC,GAAE,eAAc,MAAIA,GAAE,YAAU,EAAE,WAAU,aAAWA,GAAE,aAAW,OAAOA,GAAE,YAAWA,GAAE,UAAQ,EAAE,EAAE,OAAO,GAAEA,GAAE,QAAM,EAAE,SAAO,SAAQA,GAAE,aAAW,EAAE,SAAQ,mBAAkB,KAAG,WAAS,EAAE;AAAK,QAAGD,GAAE,CAAC,GAAE;AAAC,YAAM,IAAEC,GAAE;AAAkB,YAAI,EAAE,aAAW,EAAE;AAAA,IAAc;AAAM,MAAAA,GAAE,aAAW,EAAE;AAAa;AAAC,SAAS,EAAEC,IAAE,GAAE,GAAE;AAAC,MAAG,EAAE,WAAUA,OAAI,CAACA,GAAE;AAAM,WAAO,KAAG,EAAE,YAAU,EAAE,SAAS,KAAK,IAAI,EAAE,qBAAoB,WAAWA,GAAE,UAAUA,GAAE,gBAAgBA,GAAE,sCAAqC,EAAC,OAAMA,GAAC,CAAC,CAAC,GAAE;AAAK,MAAG,EAAEA,IAAE,CAAC,GAAE;AAAC,UAAM,IAAE,CAAC;AAAE,WAAOA,GAAE,MAAM,GAAE,CAAC,IAAE,IAAE;AAAA,EAAI;AAAC,SAAO,EAAE,CAAC,KAAG,EAAEA,IAAE,IAAE,EAAE,CAAC,CAAC,GAAE;AAAC;",
  "names": ["a", "a", "t", "r"]
}
