{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/terrain/tileUtils.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../core/maybe.js\";import n from\"../../../core/PooledArray.js\";class r{constructor(){this._queue=new n,this._last=null,this.remove=()=>{}}get done(){return 0===this._queue.length&&(!this._last||this._last.isLeaf)}resetOne(t){this._queue.clear(),this._queue.push(t),this._last=null}reset(e=null){this._queue.clear(),t(e)&&this._queue.pushArray(e),this._last=null}skipSubtree(){this._last=null}next(){return this._last&&!this._last.isLeaf&&this._queue.pushArray(this._last.children),this._last=this._queue.pop(),this._last}}class i{constructor(){this.q=new n}get done(){return 0===this.q.length}reset(t){if(this.q.clear(),!e(t)){this.q.pushArray(t);for(let t=0;t<this.q.length;++t){const e=this.q.data[t];e.isLeaf||this.q.pushArray(e.children)}}}next(){return this.q.pop()}}function s(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)l(t[n],e);else l(t,e)}function l(t,e){if(e(t),!t.isLeaf)for(const n of t.children)l(n,e)}function u(t,n,r){if(e(n)||e(n.fullExtent))return!1;const i=n.fullExtent,s=t.extent;if(r){if(s[0]<i.xmin||s[1]<i.ymin||s[2]>i.xmax||s[3]>i.ymax)return!1}else if(i.xmin>s[2]||i.ymin>s[3]||i.xmax<s[0]||i.ymax<s[1])return!1;const l=t.surface.tilingScheme.levels[t.level].scale;return!(n.minScale>0&&l>1.00000001*n.minScale)&&!(n.maxScale>0&&l<.99999999*n.maxScale)}function o(t,e){return t.lij[0]-e.lij[0]||t.lij[1]-e.lij[1]||t.lij[2]-e.lij[2]}function a(t,e){e.sort(((e,n)=>h(e,n,t)))}function h(t,e,n){const r=t.screenDepth,i=e.screenDepth;return r<i?-n:r>i?n:o(t,e)}function c(t,e){const n=new Map;t.forAll((t=>n.set(t.lij,t.distanceToSquared(e)))),t.sort(((t,e)=>n.get(t.lij)-n.get(e.lij)||o(t,e)))}function f(t,e,n){let r=1,i=0,s=0;for(;t!==e;)if(r*=.5,i*=.5,s*=.5,1&t.lij[2]&&(i+=.5),0==(1&t.lij[1])&&(s+=.5),null==(t=t.parent))throw new Error(\"tile was not a descendant of upsampleTile\");n.init(e,i,s,r)}function m(t){for(let e=0;e<t.length;e++){const n=t[e],r=n.parent;if(r)for(let t=0;t<4;t++){const e=r.children[t];if(e&&e!==n)return!0}}return!1}function p(t,e){if(!t||!e||t[0]===e[0])return!1;const n=t[0]<e[0],r=n?t:e,i=n?e:t,s=1<<i[0]-r[0];return Math.floor(i[1]/s)===r[1]&&Math.floor(i[2]/s)===r[2]}export{i as IteratorPostorder,r as IteratorPreorder,h as compareTiles,f as computeUpsampleInfo,u as fallsWithinLayer,m as hasLoadableSiblings,a as sortTiles,c as sortTilesByPOI,p as tilesAreRelated,s as traverseTilesPreorder};\n"],
  "mappings": "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",
  "names": ["r", "t", "t", "n", "r", "i", "e"]
}
