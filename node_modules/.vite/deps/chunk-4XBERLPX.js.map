{
  "version": 3,
  "sources": ["../../@arcgis/core/rest/support/FeatureSet.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{geometryTypes as t}from\"../../geometry.js\";import r from\"../../Graphic.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import{JSONSupport as s}from\"../../core/JSONSupport.js\";import{clone as i}from\"../../core/lang.js\";import{isSome as n,unwrap as a}from\"../../core/maybe.js\";import{property as p}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import{reader as l}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as m}from\"../../core/accessorSupport/decorators/writer.js\";import c from\"../../geometry/SpatialReference.js\";import{fromJSON as u,isPolygon as f}from\"../../geometry/support/jsonUtils.js\";import h from\"../../layers/support/Field.js\";var d;const g=new o({esriGeometryPoint:\"point\",esriGeometryMultipoint:\"multipoint\",esriGeometryPolyline:\"polyline\",esriGeometryPolygon:\"polygon\",esriGeometryEnvelope:\"extent\",mesh:\"mesh\",\"\":null});let j=d=class extends s{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const o=c.fromJSON(t.spatialReference),s=[];for(let i=0;i<e.length;i++){const t=e[i],a=r.fromJSON(t),p=t.geometry&&t.geometry.spatialReference;n(a.geometry)&&!p&&(a.geometry.spatialReference=o);const l=t.aggregateGeometries,y=a.aggregateGeometries;if(l&&n(y))for(const e in y){const t=y[e],r=l[e]?.spatialReference;n(t)&&!r&&(t.spatialReference=o)}s.push(a)}return s}writeGeometryType(e,t,r,o){if(e)return void g.write(e,t,r,o);const{features:s}=this;if(s)for(const i of s)if(i&&n(i.geometry))return void g.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=u(e);return!r&&t.spatialReference&&(o.spatialReference=c.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&n(o.geometry)&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new d(this.cloneProperties())}cloneProperties(){return i({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e&&e[r];o.geometry=t&&t.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,i=e=>Math.round((e-o)/t),n=e=>Math.round((s-e)/r),p=this.features,l=this._getQuantizationFunction(this.geometryType,i,n);for(let y=0,m=p.length;y<m;y++)l(a(p[y].geometry))||(p.splice(y,1),y--,m--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,a]}=r,p=e=>e*i+o,l=e=>s-e*a,y=this._getHydrationFunction(e,p,l);for(const{geometry:m}of t)n(m)&&y(m);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,a=e.length;n<a;n++){const a=e[n];if(n>0){const e=t(a[0]),n=r(a[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(a[0]),s=r(a[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return\"point\"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):\"polyline\"===e||\"polygon\"===e?e=>{const o=f(e)?e.rings:e.paths,s=[];for(let i=0,n=o.length;i<n;i++){const e=o[i],n=this._quantizePoints(e,t,r);n&&s.push(n)}return s.length>0?(f(e)?e.rings=s:e.paths=s,e):null}:\"multipoint\"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o.length>0?(e.points=o,e):null}:\"extent\"===e?e=>e:null}_getHydrationFunction(e,t,r){return\"point\"===e?e=>{e.x=t(e.x),e.y=r(e.y)}:\"polyline\"===e||\"polygon\"===e?e=>{const o=f(e)?e.rings:e.paths;let s,i;for(let n=0,a=o.length;n<a;n++){const e=o[n];for(let o=0,n=e.length;o<n;o++){const n=e[o];o>0?(s+=n[0],i+=n[1]):(s=n[0],i=n[1]),n[0]=t(s),n[1]=r(i)}}}:\"extent\"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:\"multipoint\"===e?e=>{const o=e.points;let s,i;for(let n=0,a=o.length;n<a;n++){const e=o[n];n>0?(s+=e[0],i+=e[1]):(s=e[0],i=e[1]),e[0]=t(s),e[1]=r(i)}}:void 0}};e([p({type:String,json:{write:!0}})],j.prototype,\"displayFieldName\",void 0),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j.prototype,\"exceededTransferLimit\",void 0),e([p({type:[r],json:{write:!0}})],j.prototype,\"features\",void 0),e([l(\"features\")],j.prototype,\"readFeatures\",null),e([p({type:[h],json:{write:!0}})],j.prototype,\"fields\",void 0),e([p({type:[\"point\",\"multipoint\",\"polyline\",\"polygon\",\"extent\",\"mesh\"],json:{read:{reader:g.read}}})],j.prototype,\"geometryType\",void 0),e([m(\"geometryType\")],j.prototype,\"writeGeometryType\",null),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j.prototype,\"hasM\",void 0),e([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],j.prototype,\"hasZ\",void 0),e([p({types:t,json:{write:!0}})],j.prototype,\"queryGeometry\",void 0),e([l(\"queryGeometry\")],j.prototype,\"readQueryGeometry\",null),e([p({type:c,json:{write:!0}})],j.prototype,\"spatialReference\",void 0),e([m(\"spatialReference\")],j.prototype,\"writeSpatialReference\",null),e([p({json:{write:!0}})],j.prototype,\"transform\",void 0),j=d=e([y(\"esri.rest.support.FeatureSet\")],j),j.prototype.toJSON.isDefaultToJSON=!0;const x=j;export{x as default};\n"],
  "mappings": "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",
  "names": ["d", "g", "e", "o", "s", "i", "t", "l", "y", "r", "n", "m", "a"]
}
