{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as t,isSome as e,isNone as s}from\"../../../../core/maybe.js\";import{isPromiseLike as i}from\"../../../../core/promiseUtils.js\";import{NoParameters as r}from\"../core/shaderModules/interfaces.js\";import{ResourceState as u}from\"./basicInterfaces.js\";import l from\"./GLMaterial.js\";class h extends l{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textureRepository=t.textureRep,this._textureId=t.textureId,this._acquire(t.textureId,(t=>this._texture=t)),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){this._texture=t(this._texture),this._textureNormal=t(this._textureNormal),this._textureEmissive=t(this._textureEmissive),this._textureOcclusion=t(this._textureOcclusion),this._textureMetallicRoughness=t(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?u.LOADED:u.LOADING}get textureBindParameters(){return new o(e(this._texture)?this._texture.glTexture:null,e(this._textureNormal)?this._textureNormal.glTexture:null,e(this._textureEmissive)?this._textureEmissive.glTexture:null,e(this._textureOcclusion)?this._textureOcclusion.glTexture:null,e(this._textureMetallicRoughness)?this._textureMetallicRoughness.glTexture:null)}updateTexture(e){(s(this._texture)||e!==this._texture.id)&&(this._texture=t(this._texture),this._textureId=e,this._acquire(this._textureId,(t=>this._texture=t)))}_acquire(e,r){if(s(e))return void r(null);const u=this._textureRepository.acquire(e);if(i(u))return++this._numLoading,void u.then((e=>{if(this._disposed)return t(e),void r(null);r(e)})).finally((()=>--this._numLoading));r(u)}}class o extends r{constructor(t=null,e=null,s=null,i=null,r=null){super(),this.texture=t,this.textureNormal=e,this.textureEmissive=s,this.textureOcclusion=i,this.textureMetallicRoughness=r}}export{h as GLTextureMaterial,o as GLTextureMaterialBindParameters};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAIyS,IAAM,IAAN,cAAgBA,GAAC;AAAA,EAAC,YAAYA,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,cAAY,GAAE,KAAK,YAAU,OAAG,KAAK,qBAAmBA,GAAE,YAAW,KAAK,aAAWA,GAAE,WAAU,KAAK,SAASA,GAAE,WAAW,CAAAA,OAAG,KAAK,WAASA,EAAE,GAAE,KAAK,SAASA,GAAE,iBAAiB,CAAAA,OAAG,KAAK,iBAAeA,EAAE,GAAE,KAAK,SAASA,GAAE,mBAAmB,CAAAA,OAAG,KAAK,mBAAiBA,EAAE,GAAE,KAAK,SAASA,GAAE,oBAAoB,CAAAA,OAAG,KAAK,oBAAkBA,EAAE,GAAE,KAAK,SAASA,GAAE,4BAA4B,CAAAA,OAAG,KAAK,4BAA0BA,EAAE;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,WAAS,EAAE,KAAK,QAAQ,GAAE,KAAK,iBAAe,EAAE,KAAK,cAAc,GAAE,KAAK,mBAAiB,EAAE,KAAK,gBAAgB,GAAE,KAAK,oBAAkB,EAAE,KAAK,iBAAiB,GAAE,KAAK,4BAA0B,EAAE,KAAK,yBAAyB,GAAE,KAAK,YAAU;AAAA,EAAE;AAAA,EAAC,gBAAgBA,IAAE;AAAC,WAAO,MAAI,KAAK,cAAY,EAAE,SAAO,EAAE;AAAA,EAAO;AAAA,EAAC,IAAI,wBAAuB;AAAC,WAAO,IAAI,EAAE,EAAE,KAAK,QAAQ,IAAE,KAAK,SAAS,YAAU,MAAK,EAAE,KAAK,cAAc,IAAE,KAAK,eAAe,YAAU,MAAK,EAAE,KAAK,gBAAgB,IAAE,KAAK,iBAAiB,YAAU,MAAK,EAAE,KAAK,iBAAiB,IAAE,KAAK,kBAAkB,YAAU,MAAK,EAAE,KAAK,yBAAyB,IAAE,KAAK,0BAA0B,YAAU,IAAI;AAAA,EAAC;AAAA,EAAC,cAAc,GAAE;AAAC,KAAC,EAAE,KAAK,QAAQ,KAAG,MAAI,KAAK,SAAS,QAAM,KAAK,WAAS,EAAE,KAAK,QAAQ,GAAE,KAAK,aAAW,GAAE,KAAK,SAAS,KAAK,YAAY,CAAAA,OAAG,KAAK,WAASA,EAAE;AAAA,EAAE;AAAA,EAAC,SAAS,GAAEC,IAAE;AAAC,QAAG,EAAE,CAAC;AAAE,aAAO,KAAKA,GAAE,IAAI;AAAE,UAAM,IAAE,KAAK,mBAAmB,QAAQ,CAAC;AAAE,QAAG,EAAE,CAAC;AAAE,aAAM,EAAE,KAAK,aAAY,KAAK,EAAE,KAAM,CAAAC,OAAG;AAAC,YAAG,KAAK;AAAU,iBAAO,EAAEA,EAAC,GAAE,KAAKD,GAAE,IAAI;AAAE,QAAAA,GAAEC,EAAC;AAAA,MAAC,CAAE,EAAE,QAAS,MAAI,EAAE,KAAK,WAAY;AAAE,IAAAD,GAAE,CAAC;AAAA,EAAC;AAAC;AAAC,IAAM,IAAN,cAAgBD,GAAC;AAAA,EAAC,YAAYA,KAAE,MAAK,IAAE,MAAK,IAAE,MAAKG,KAAE,MAAKF,KAAE,MAAK;AAAC,UAAM,GAAE,KAAK,UAAQD,IAAE,KAAK,gBAAc,GAAE,KAAK,kBAAgB,GAAE,KAAK,mBAAiBG,IAAE,KAAK,2BAAyBF;AAAA,EAAC;AAAC;",
  "names": ["t", "r", "e", "i"]
}
