import {
  p as p5,
  p3 as p6,
  r as r2
} from "./chunk-YPIBZ3CH.js";
import "./chunk-XLCZFN6R.js";
import "./chunk-OMNBM2E4.js";
import {
  l as l3
} from "./chunk-WKHS6QIX.js";
import {
  a as a2
} from "./chunk-6O7ZZEV7.js";
import {
  t
} from "./chunk-RFOZTYJH.js";
import "./chunk-J6DXGG2A.js";
import {
  p as p4
} from "./chunk-GKRQ3NBT.js";
import {
  j
} from "./chunk-OXRBYKVX.js";
import "./chunk-6O2ARNGD.js";
import "./chunk-YLU2PLJS.js";
import {
  o as o3
} from "./chunk-MZX3HN4G.js";
import {
  d as d2
} from "./chunk-T47JAOQZ.js";
import "./chunk-6GPADSSO.js";
import "./chunk-CQ47VEUP.js";
import "./chunk-FU5UMT3R.js";
import {
  b
} from "./chunk-GSFXXEAM.js";
import "./chunk-QZTJM4HG.js";
import {
  n as n2
} from "./chunk-RIWDMEW4.js";
import {
  n as n3,
  o as o2,
  p as p3
} from "./chunk-C7S44TP4.js";
import {
  P
} from "./chunk-KUWW4YJ7.js";
import "./chunk-P6I5J7W6.js";
import "./chunk-ORGMKDYR.js";
import "./chunk-F2DXUUYL.js";
import "./chunk-EGR3VVZG.js";
import "./chunk-F5A4XAOJ.js";
import "./chunk-4TDLPK3D.js";
import "./chunk-U7B2WKBH.js";
import "./chunk-T7SYNS2R.js";
import "./chunk-WODSLTZT.js";
import "./chunk-JMZLJZMP.js";
import {
  v
} from "./chunk-OG6CQEZJ.js";
import {
  c as c2
} from "./chunk-X5Z3DJQ4.js";
import {
  O
} from "./chunk-BUWXVMJU.js";
import {
  I,
  b as b2,
  c,
  f,
  l as l2,
  m,
  p
} from "./chunk-JT3LXQ47.js";
import "./chunk-P3QN5DXX.js";
import "./chunk-QKRZMDWG.js";
import "./chunk-TBT57L4K.js";
import {
  a
} from "./chunk-D3XXPCBB.js";
import {
  t as t2
} from "./chunk-OWBMOIIV.js";
import {
  b as b3
} from "./chunk-SIH2IMSA.js";
import "./chunk-2AGPHSDM.js";
import "./chunk-JGSSQ5FR.js";
import "./chunk-5OEHY3VV.js";
import {
  x
} from "./chunk-LJLQIETB.js";
import "./chunk-WKRVG5MO.js";
import "./chunk-GRILTTJT.js";
import "./chunk-ASC3X65B.js";
import "./chunk-KVF4M6PZ.js";
import {
  p as p2
} from "./chunk-IZCP5QP4.js";
import "./chunk-QFTOW2ST.js";
import "./chunk-I4USSDLI.js";
import "./chunk-VI3TTBSC.js";
import "./chunk-B42HXLDM.js";
import "./chunk-TVXPO7T5.js";
import "./chunk-2EZYA7VW.js";
import "./chunk-OEQ3EDRD.js";
import "./chunk-Z6EP2GTZ.js";
import "./chunk-P6G64ARX.js";
import "./chunk-GD6ALUPQ.js";
import "./chunk-RN2KRYDN.js";
import "./chunk-BLINZ65M.js";
import {
  M as M2
} from "./chunk-TADZYUVR.js";
import "./chunk-C5ULLWJ7.js";
import "./chunk-HFDYAQZS.js";
import "./chunk-HJHWUUQQ.js";
import "./chunk-TMBOFNWA.js";
import "./chunk-ZNEGSJWK.js";
import {
  B
} from "./chunk-EI4MOLML.js";
import "./chunk-4SBWV5M2.js";
import "./chunk-CF56UYH2.js";
import "./chunk-5TRUGQDM.js";
import "./chunk-PZG7CR4Y.js";
import "./chunk-2HDG7SIE.js";
import "./chunk-56RHM4A6.js";
import "./chunk-ACJD5XFJ.js";
import "./chunk-OO2JXX7L.js";
import "./chunk-6DWU2ZQF.js";
import "./chunk-Q3R7XFM5.js";
import "./chunk-JCPK2OXG.js";
import "./chunk-HVM5D6S5.js";
import "./chunk-JYHTO6QC.js";
import "./chunk-FTLBKDGL.js";
import {
  c as c3,
  m as m2
} from "./chunk-5Z5455ZY.js";
import "./chunk-D7DLEBS2.js";
import "./chunk-H7JF6Q7A.js";
import "./chunk-TT2HIXWQ.js";
import "./chunk-OIPX3EDD.js";
import "./chunk-NWRK6QLX.js";
import "./chunk-HPH3FMVB.js";
import "./chunk-OOZMA7DN.js";
import "./chunk-Y7FSCP47.js";
import {
  U
} from "./chunk-65A2N4LL.js";
import "./chunk-GVELBHGI.js";
import "./chunk-5N3FSR63.js";
import "./chunk-C4LU7RDX.js";
import {
  i
} from "./chunk-EPCCNF3D.js";
import "./chunk-4PRVTUEZ.js";
import "./chunk-DMJWTK32.js";
import "./chunk-FVPTCNCX.js";
import "./chunk-BPZGJQOB.js";
import "./chunk-ZOKX6UGH.js";
import "./chunk-PKZEO23A.js";
import "./chunk-43S7PUMG.js";
import "./chunk-AIRC226G.js";
import "./chunk-BNPOKP6A.js";
import "./chunk-CHNDTVQJ.js";
import "./chunk-VLCG72SW.js";
import {
  M
} from "./chunk-Q72YFZUL.js";
import "./chunk-YPZEGNLG.js";
import {
  k2 as k
} from "./chunk-3NMRL5CR.js";
import "./chunk-SN4RUQ4N.js";
import "./chunk-XRL56EGK.js";
import "./chunk-ZIHDQYKE.js";
import {
  o
} from "./chunk-GSRNZQFV.js";
import {
  l
} from "./chunk-ICD7AJSY.js";
import {
  d,
  n8 as n,
  s5 as s3
} from "./chunk-2QOWZFCU.js";
import {
  e
} from "./chunk-IVBXK6OP.js";
import "./chunk-YAAIZ67O.js";
import "./chunk-5EQKHR4M.js";
import {
  w
} from "./chunk-U3PSONS6.js";
import {
  s2
} from "./chunk-HFTNOKM2.js";
import {
  S
} from "./chunk-23NWA6WL.js";
import {
  s
} from "./chunk-CVWDM4C7.js";
import "./chunk-G5JBUC5N.js";
import {
  r
} from "./chunk-CBQWMOBK.js";
import "./chunk-AC2VUBZ6.js";

// node_modules/@arcgis/core/layers/support/PurgeOptions.js
var t3;
var i2 = t3 = class extends l {
  constructor() {
    super(...arguments), this.age = null, this.ageReceived = null, this.displayCount = null, this.maxObservations = 1;
  }
  clone() {
    return new t3({ age: this.age, ageReceived: this.ageReceived, displayCount: this.displayCount, maxObservations: this.maxObservations });
  }
};
e([d({ type: Number, json: { write: true } })], i2.prototype, "age", void 0), e([d({ type: Number, json: { write: true } })], i2.prototype, "ageReceived", void 0), e([d({ type: Number, json: { write: true } })], i2.prototype, "displayCount", void 0), e([d({ type: Number, json: { write: true } })], i2.prototype, "maxObservations", void 0), i2 = t3 = e([n("esri.layers.support.PurgeOptions")], i2);
var p7 = i2;

// node_modules/@arcgis/core/layers/StreamLayer.js
var X = s.getLogger("esri.layers.StreamLayer");
var Y = l3();
var Z = class extends p5(a(a2(t2(n2(p4(c2(v(O(o3(b3)))))))))) {
  constructor(...e2) {
    super(...e2), this.copyright = null, this.definitionExpression = null, this.displayField = null, this.elevationInfo = null, this.featureReduction = null, this.fields = null, this.fieldsIndex = null, this.geometryDefinition = null, this.geometryType = null, this.labelsVisible = true, this.labelingInfo = null, this.legendEnabled = true, this.maxReconnectionAttempts = 0, this.maxReconnectionInterval = 20, this.maxScale = 0, this.minScale = 0, this.objectIdField = null, this.operationalLayerType = "ArcGISStreamLayer", this.popupEnabled = true, this.popupTemplate = null, this.purgeOptions = new p7(), this.screenSizePerspectiveEnabled = true, this.sourceJSON = null, this.spatialReference = k.WGS84, this.type = "stream", this.url = null, this.updateInterval = 300, this.webSocketUrl = null;
  }
  normalizeCtorArgs(e2, r3) {
    return "string" == typeof e2 ? { url: e2, ...r3 } : e2;
  }
  load(e2) {
    if (!("WebSocket" in globalThis))
      return this.addResolvingPromise(Promise.reject(new s2("stream-layer:websocket-unsupported", "WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))), Promise.resolve(this);
    const r3 = r(e2) ? e2.signal : null;
    return this.addResolvingPromise(this.loadFromPortal({ supportedTypes: ["Stream Service", "Feed"] }, e2).catch(w).then(() => this._fetchService(r3))), Promise.resolve(this);
  }
  get defaultPopupTemplate() {
    return this.createPopupTemplate();
  }
  set renderer(e2) {
    c3(e2, this.fieldsIndex), this._set("renderer", e2);
  }
  readRenderer(e2, r3, s4) {
    const p8 = (r3 = r3.layerDefinition || r3).drawingInfo && r3.drawingInfo.renderer || void 0;
    if (p8) {
      const e3 = o2(p8, r3, s4) || void 0;
      return e3 || X.error("Failed to create renderer", { rendererDefinition: r3.drawingInfo.renderer, layer: this, context: s4 }), e3;
    }
    if (r3.defaultSymbol)
      return r3.types && r3.types.length ? new P({ defaultSymbol: $(r3.defaultSymbol, r3, s4), field: r3.typeIdField, uniqueValueInfos: r3.types.map((e3) => ({ id: e3.id, symbol: $(e3.symbol, e3, s4) })) }) : new p2({ symbol: $(r3.defaultSymbol, r3, s4) });
  }
  createPopupTemplate(e2) {
    return d2(this, e2);
  }
  createQuery() {
    const e2 = new b();
    return e2.returnGeometry = true, e2.outFields = ["*"], e2.where = this.definitionExpression || "1=1", e2;
  }
  getFieldDomain(e2, r3) {
    if (!this.fields)
      return null;
    let t4 = null;
    return this.fields.some((r4) => (r4.name === e2 && (t4 = r4.domain), !!t4)), t4;
  }
  getField(e2) {
    return this.fieldsIndex.get(e2);
  }
  serviceSupportsSpatialReference(e2) {
    return true;
  }
  async _fetchService(e2) {
    var _a;
    if (!!this.webSocketUrl) {
      if (!((_a = this.timeInfo) == null ? void 0 : _a.trackIdField))
        throw new s2("stream-layer:missing-metadata", "The stream layer trackIdField must be specified.");
      if (!this.objectIdField)
        throw new s2("stream-layer:missing-metadata", "The stream layer objectIdField must be specified.");
      if (!this.fields)
        throw new s2("stream-layer:missing-metadata", "The stream layer fields must be specified.");
      if (!this.geometryType)
        throw new s2("stream-layer:missing-metadata", "The stream layer geometryType must be specified.");
      this.url = this.webSocketUrl;
    } else if (!this.sourceJSON) {
      const { data: r3 } = await U(this.parsedUrl.path, { query: { f: "json", ...this.customParameters, ...this.parsedUrl.query }, responseType: "json", signal: e2 });
      this.sourceJSON = r3;
    }
    return this.sourceJSON = { ...this.sourceJSON ?? {}, objectIdField: "__esri_stream_id__" }, this.read(this.sourceJSON, { origin: "service", url: this.parsedUrl }), c3(this.renderer, this.fieldsIndex), m2(this.timeInfo, this.fieldsIndex), t(this, { origin: "service" });
  }
};
e([d({ type: String })], Z.prototype, "copyright", void 0), e([d({ readOnly: true })], Z.prototype, "defaultPopupTemplate", null), e([d({ type: String, json: { name: "layerDefinition.definitionExpression", write: { enabled: true, allowNull: true } } })], Z.prototype, "definitionExpression", void 0), e([d({ type: String })], Z.prototype, "displayField", void 0), e([d({ type: x })], Z.prototype, "elevationInfo", void 0), e([d(p6)], Z.prototype, "featureReduction", void 0), e([d(Y.fields)], Z.prototype, "fields", void 0), e([d(Y.fieldsIndex)], Z.prototype, "fieldsIndex", void 0), e([d({ type: M })], Z.prototype, "geometryDefinition", void 0), e([d({ type: i.apiValues, json: { read: { reader: i.read } } })], Z.prototype, "geometryType", void 0), e([d(m)], Z.prototype, "labelsVisible", void 0), e([d({ type: [j], json: { read: { source: "layerDefinition.drawingInfo.labelingInfo", reader: r2 }, write: { target: "layerDefinition.drawingInfo.labelingInfo" } } })], Z.prototype, "labelingInfo", void 0), e([d(c)], Z.prototype, "legendEnabled", void 0), e([d({ type: ["show", "hide"] })], Z.prototype, "listMode", void 0), e([d({ type: S })], Z.prototype, "maxReconnectionAttempts", void 0), e([d({ type: S })], Z.prototype, "maxReconnectionInterval", void 0), e([d(I)], Z.prototype, "maxScale", void 0), e([d(b2)], Z.prototype, "minScale", void 0), e([d({ type: String })], Z.prototype, "objectIdField", void 0), e([d({ value: "ArcGISStreamLayer", type: ["ArcGISStreamLayer"] })], Z.prototype, "operationalLayerType", void 0), e([d(p)], Z.prototype, "popupEnabled", void 0), e([d({ type: B, json: { read: { source: "popupInfo" }, write: { target: "popupInfo" } } })], Z.prototype, "popupTemplate", void 0), e([d({ type: p7 })], Z.prototype, "purgeOptions", void 0), e([d({ types: p3, json: { origins: { service: { write: { target: "drawingInfo.renderer", enabled: false } }, "web-scene": { name: "layerDefinition.drawingInfo.renderer", types: n3, write: true } }, write: { target: "layerDefinition.drawingInfo.renderer" } } })], Z.prototype, "renderer", null), e([o("service", "renderer", ["drawingInfo.renderer", "defaultSymbol"]), o("renderer", ["layerDefinition.drawingInfo.renderer", "layerDefinition.defaultSymbol"])], Z.prototype, "readRenderer", null), e([d(l2)], Z.prototype, "screenSizePerspectiveEnabled", void 0), e([d()], Z.prototype, "sourceJSON", void 0), e([d({ type: k, json: { origins: { service: { read: { source: "spatialReference" } } } } })], Z.prototype, "spatialReference", void 0), e([d({ json: { read: false } })], Z.prototype, "type", void 0), e([d(f)], Z.prototype, "url", void 0), e([d({ type: Number })], Z.prototype, "updateInterval", void 0), e([d({ type: String })], Z.prototype, "webSocketUrl", void 0), Z = e([n("esri.layers.StreamLayer")], Z);
var $ = s3({ types: M2 });
var ee = Z;
export {
  ee as default
};
//# sourceMappingURL=StreamLayer-4L4JIEY6.js.map
