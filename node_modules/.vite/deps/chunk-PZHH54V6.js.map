{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js", "../../@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../../../chunks/vec3.js\";import{c as r}from\"../../../../../../chunks/vec3f64.js\";import{ShaderOutput as i}from\"../ShaderOutputOptions.js\";import{DoublePrecision as o}from\"../util/DoublePrecision.glsl.js\";import{Float3DrawUniform as n}from\"../../shaderModules/Float3DrawUniform.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";import{Matrix4PassUniform as t}from\"../../shaderModules/Matrix4PassUniform.js\";import{VertexAttribute as s}from\"../../../lib/VertexAttribute.js\";import{encodeDoubleHi as c,encodeDoubleLo as d}from\"../../../../../webgl/doublePrecisionUtils.js\";function m(r,m){m.instanced&&m.instancedDoublePrecision&&(r.attributes.add(s.MODELORIGINHI,\"vec3\"),r.attributes.add(s.MODELORIGINLO,\"vec3\"),r.attributes.add(s.MODEL,\"mat3\"),r.attributes.add(s.MODELNORMAL,\"mat3\"));const u=r.vertex;m.instancedDoublePrecision&&(u.include(o,m),u.uniforms.add(new n(\"viewOriginHi\",((r,i)=>c(e(l,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),l)))),u.uniforms.add(new n(\"viewOriginLo\",((r,i)=>d(e(l,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]),l))))),u.code.add(a`\n    vec3 calculateVPos() {\n      ${m.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `),u.code.add(a`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${m.instancedDoublePrecision?a`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `),u.code.add(a`\n    vec3 dpNormal(vec4 _normal) {\n      ${m.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `),m.output===i.Normal&&(u.uniforms.add(new t(\"viewNormal\",((e,r)=>r.camera.viewInverseTransposeMatrix))),u.code.add(a`\n    vec3 dpNormalView(vec4 _normal) {\n      ${m.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `)),m.hasVertexTangents&&u.code.add(a`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${m.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `)}const l=r();export{m as InstancedDoublePrecision};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{IntegerPassUniform as r}from\"../../shaderModules/IntegerPassUniform.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as l}from\"../../../lib/VertexAttribute.js\";import{colorMixModes as d}from\"../../../materials/internal/MaterialUtil.js\";function i(i,t){t.hasSymbolColors?(i.include(o),i.attributes.add(l.SYMBOLCOLOR,\"vec4\"),i.varyings.add(\"colorMixMode\",\"mediump float\"),i.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`)):(i.fragment.uniforms.add(new r(\"colorMixMode\",(o=>d[o.colorMixMode]))),i.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`))}export{i as SymbolColor};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as o}from\"../ShaderOutputOptions.js\";import{SliceDraw as r}from\"../Slice.glsl.js\";import{Transform as e}from\"../Transform.glsl.js\";import{NormalAttribute as t,NormalAttributeType as i}from\"../attributes/NormalAttribute.glsl.js\";import{TextureCoordinateAttribute as a}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as l}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as s}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as d}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as n}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlphaPass as u}from\"../util/AlphaDiscard.glsl.js\";import{addProjViewLocalOrigin as m}from\"../util/View.glsl.js\";import{Float2PassUniform as p}from\"../../shaderModules/Float2PassUniform.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as v}from\"../../shaderModules/Texture2DPassUniform.js\";function f(f,h){const g=f.vertex.code,x=f.fragment.code,j=h.hasModelTransformation;h.output!==o.Depth&&h.output!==o.Shadow||(m(f,h),f.include(e,{linearDepth:!0,hasModelTransformation:j}),f.include(a,h),f.include(n,h),f.include(s,h),f.include(r,h),f.vertex.uniforms.add(new p(\"nearFar\",((o,r)=>r.camera.nearFar))),f.varyings.add(\"depth\",\"float\"),h.hasColorTexture&&f.fragment.uniforms.add(new v(\"tex\",(o=>o.texture))),g.add(c`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPositionWithDepth(proj, view, ${j?\"model,\":\"\"} vpos, nearFar, depth);\n        forwardTextureCoordinates();\n      }\n    `),f.include(u,h),x.add(c`\n      void main(void) {\n        discardBySlice(vpos);\n        ${h.hasColorTexture?c`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputDepth(depth);\n      }\n    `)),h.output===o.Normal&&(m(f,h),f.include(e,{linearDepth:!1,hasModelTransformation:j}),f.include(t,h),f.include(l,h),f.include(a,h),f.include(n,h),h.hasColorTexture&&f.fragment.uniforms.add(new v(\"tex\",(o=>o.texture))),f.varyings.add(\"vPositionView\",\"vec3\"),g.add(c`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        ${h.normalType===i.Attribute?c`\n        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, ${j?\"model,\":\"\"} vpos);\n        forwardTextureCoordinates();\n      }\n    `),f.include(r,h),f.include(u,h),x.add(c`\n      void main() {\n        discardBySlice(vpos);\n        ${h.hasColorTexture?c`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n\n        ${h.normalType===i.ScreenDerivative?c`\n            vec3 normal = screenDerivativeNormal(vPositionView);`:c`\n            vec3 normal = normalize(vNormalWorld);\n            if (gl_FrontFacing == false) normal = -normal;`}\n        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n      }\n    `)),h.output===o.Highlight&&(m(f,h),f.include(e,{linearDepth:!1,hasModelTransformation:j}),f.include(a,h),f.include(n,h),h.hasColorTexture&&f.fragment.uniforms.add(new v(\"tex\",(o=>o.texture))),g.add(c`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, ${j?\"model,\":\"\"} vpos);\n        forwardTextureCoordinates();\n      }\n    `),f.include(r,h),f.include(u,h),f.include(d),x.add(c`\n      void main() {\n        discardBySlice(vpos);\n        ${h.hasColorTexture?c`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputHighlight();\n      }\n    `))}export{f as DefaultMaterialAuxiliaryPasses};\n"],
  "mappings": "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",
  "names": ["e", "n", "r", "m", "u", "i", "o", "n", "e", "i", "e", "n", "o", "f", "o", "d", "r", "e", "n", "s"]
}
