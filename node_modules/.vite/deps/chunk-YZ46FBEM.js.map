{
  "version": 3,
  "sources": ["../../@arcgis/core/views/2d/engine/ImageryBitmapSource.js", "../../@arcgis/core/views/2d/engine/Bitmap.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../core/maybe.js\";class i{constructor(e,t,i){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=i}get width(){return e(this.pixelBlock)?this.pixelBlock.width:0}get height(){return e(this.pixelBlock)?this.pixelBlock.height:0}render(e){const i=this.pixelBlock;if(t(i))return;const l=this.filter({pixelBlock:i});if(t(l.pixelBlock))return;const r=l.pixelBlock.getAsRGBA(),o=e.createImageData(l.pixelBlock.width,l.pixelBlock.height);o.data.set(r),e.putImageData(o,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return t(e.pixelBlock)?null:{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}export{i as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{b as e,c as i,r as s,j as r,m as h}from\"../../../chunks/mat3.js\";import{c as n}from\"../../../chunks/mat3f32.js\";import{f as o}from\"../../../chunks/vec2f32.js\";import{DisplayObject as u}from\"./DisplayObject.js\";import a from\"./ImageryBitmapSource.js\";import{TextureType as d,PixelFormat as c,PixelType as l,TextureWrapMode as _}from\"../../webgl/enums.js\";import{Texture as x}from\"../../webgl/Texture.js\";function m(t){return t&&\"render\"in t}function g(t){return t&&!(\"render\"in t)}function p(t){const e=document.createElement(\"canvas\");return e.width=t.width,e.height=t.height,t.render(e.getContext(\"2d\")),e}function f(t,e,i){const s={target:d.TEXTURE_2D,pixelFormat:c.RGBA,internalFormat:c.RGBA,dataType:l.UNSIGNED_BYTE,wrapMode:_.CLAMP_TO_EDGE};return e&&i&&(s.width=e,s.height=i),new x(t,s)}class v extends u{constructor(t=null,e,i=!0){super(),this.requestRenderOnSourceChangedEnabled=i,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.blendFunction=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){this._source=t,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t.context)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}_createTransforms(){return{dvs:n()}}setTransform(t){const n=e(this.transforms.dvs),[u,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,c=d*this.width,l=d*this.height,_=Math.PI*this.rotation/180;i(n,n,o(u,a)),i(n,n,o(c/2,l/2)),s(n,n,-_),i(n,n,o(-c/2,-l/2)),r(n,n,o(c,l)),h(this.transforms.dvs,t.displayViewMat3,n)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}updateTexture(e){if(!this.stage)return this._texture?.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this.source?this._texture=f(e,this.sourceWidth,this.sourceHeight):this._texture=f(e));const i=this.source;if(i){if(this._texture.resize(this.sourceWidth,this.sourceHeight),m(i))if(i instanceof a){const e=i.getRenderedRasterPixels();this._texture.setData(t(e)?e.renderedRasterPixels:null)}else this._texture.setData(p(i));else g(i)&&this._texture.setData(i);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}export{v as Bitmap,m as isImageSource,p as rasterize};\n"],
  "mappings": "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",
  "names": ["i", "e", "t", "r", "t", "e", "i", "r", "u", "a", "M"]
}
