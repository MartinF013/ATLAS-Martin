{
  "version": 3,
  "sources": ["../../@arcgis/core/symbols/support/previewCIMSymbol.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{px2pt as e}from\"../../core/screenUtils.js\";import{CIMSymbolRasterizer as t}from\"../cim/CIMSymbolRasterizer.js\";import{getCIMSymbolSize as i,scaleCIMSymbolTo as l}from\"./cimSymbolUtils.js\";import{SymbolSizeDefaults as a}from\"./previewUtils.js\";import{renderSymbol as o}from\"./renderUtils.js\";const s=new t(null,!0),n=a.maxSize;async function r(t,a={}){const{size:r,maxSize:c,node:m,opacity:f}=a,p=a.cimOptions||a,{feature:y,fieldMap:h,geometryType:u,style:d}=p,g=i(t),w=\"number\"==typeof r?r:null,b=Math.min(null!=w?w:g,null!=c?c:e(n));b!==g&&(t=t.clone(),l(t,b,{preserveOutlineWidth:!0}));let M=3;t&&t.data&&t.data.symbol&&\"CIMPointSymbol\"!==t.data.symbol.type&&(M=1);const S=await s.rasterizeCIMSymbolAsync(t,y,h,u,{scaleFactor:M,style:d}),j=document.createElement(\"canvas\");j.width=S.imageData.width,j.height=S.imageData.height;j.getContext(\"2d\").putImageData(S.imageData,0,0);let x=j.width/M,z=j.height/M;if(null!=r&&(null==a?.scale||a?.scale)){const e=x/z;x=e<=1?Math.ceil(b*e):b,z=e<=1?b:Math.ceil(b/e)}const C=new Image(x,z);C.src=j.toDataURL(),null!=f&&(C.style.opacity=`${f}`);let D=C;if(null!=a.effectView){const e={shape:{type:\"image\",x:0,y:0,width:x,height:z,src:C.src},fill:null,stroke:null,offset:[0,0]};D=o([[e]],[x,z],{effectView:a.effectView})}return m&&m.appendChild(D),D}export{r as previewCIMSymbol};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAI0S,IAAM,IAAE,IAAI,EAAE,MAAK,IAAE;AAArB,IAAuB,IAAE,EAAE;AAAQ,eAAe,EAAEA,IAAE,IAAE,CAAC,GAAE;AAAC,QAAK,EAAC,MAAKC,IAAE,SAAQC,IAAE,MAAK,GAAE,SAAQ,EAAC,IAAE,GAAE,IAAE,EAAE,cAAY,GAAE,EAAC,SAAQ,GAAE,UAAS,GAAE,cAAa,GAAE,OAAM,EAAC,IAAE,GAAE,IAAE,EAAEF,EAAC,GAAE,IAAE,YAAU,OAAOC,KAAEA,KAAE,MAAK,IAAE,KAAK,IAAI,QAAM,IAAE,IAAE,GAAE,QAAMC,KAAEA,KAAE,EAAE,CAAC,CAAC;AAAE,QAAI,MAAIF,KAAEA,GAAE,MAAM,GAAE,EAAEA,IAAE,GAAE,EAAC,sBAAqB,KAAE,CAAC;AAAG,MAAI,IAAE;AAAE,EAAAA,MAAGA,GAAE,QAAMA,GAAE,KAAK,UAAQ,qBAAmBA,GAAE,KAAK,OAAO,SAAO,IAAE;AAAG,QAAM,IAAE,MAAM,EAAE,wBAAwBA,IAAE,GAAE,GAAE,GAAE,EAAC,aAAY,GAAE,OAAM,EAAC,CAAC,GAAE,IAAE,SAAS,cAAc,QAAQ;AAAE,IAAE,QAAM,EAAE,UAAU,OAAM,EAAE,SAAO,EAAE,UAAU;AAAO,IAAE,WAAW,IAAI,EAAE,aAAa,EAAE,WAAU,GAAE,CAAC;AAAE,MAAI,IAAE,EAAE,QAAM,GAAEG,KAAE,EAAE,SAAO;AAAE,MAAG,QAAMF,OAAI,SAAM,uBAAG,WAAO,uBAAG,SAAO;AAAC,UAAMG,KAAE,IAAED;AAAE,QAAEC,MAAG,IAAE,KAAK,KAAK,IAAEA,EAAC,IAAE,GAAED,KAAEC,MAAG,IAAE,IAAE,KAAK,KAAK,IAAEA,EAAC;AAAA,EAAC;AAAC,QAAM,IAAE,IAAI,MAAM,GAAED,EAAC;AAAE,IAAE,MAAI,EAAE,UAAU,GAAE,QAAM,MAAI,EAAE,MAAM,UAAQ,GAAG;AAAK,MAAI,IAAE;AAAE,MAAG,QAAM,EAAE,YAAW;AAAC,UAAMC,KAAE,EAAC,OAAM,EAAC,MAAK,SAAQ,GAAE,GAAE,GAAE,GAAE,OAAM,GAAE,QAAOD,IAAE,KAAI,EAAE,IAAG,GAAE,MAAK,MAAK,QAAO,MAAK,QAAO,CAAC,GAAE,CAAC,EAAC;AAAE,QAAE,EAAE,CAAC,CAACC,EAAC,CAAC,GAAE,CAAC,GAAED,EAAC,GAAE,EAAC,YAAW,EAAE,WAAU,CAAC;AAAA,EAAC;AAAC,SAAO,KAAG,EAAE,YAAY,CAAC,GAAE;AAAC;",
  "names": ["t", "r", "c", "z", "e"]
}
