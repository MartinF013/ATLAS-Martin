import {
  L,
  y
} from "./chunk-5Z5455ZY.js";
import {
  r,
  t
} from "./chunk-CBQWMOBK.js";

// node_modules/@arcgis/core/views/layers/support/popupUtils.js
async function d(l, d2 = l.popupTemplate) {
  if (t(d2))
    return [];
  const s2 = await d2.getRequiredFields(l.fieldsIndex), { lastEditInfoEnabled: i } = d2, { objectIdField: n, typeIdField: u, globalIdField: a, relationships: o } = l;
  if (s2.includes("*"))
    return ["*"];
  const r2 = i ? await L(l) : [], f = y(l.fieldsIndex, [...s2, ...r2]);
  return u && f.push(u), f && n && l.fieldsIndex.has(n) && !f.includes(n) && f.push(n), f && a && l.fieldsIndex.has(a) && !f.includes(a) && f.push(a), o && o.forEach((e) => {
    const { keyField: p } = e;
    f && p && l.fieldsIndex.has(p) && !f.includes(p) && f.push(p);
  }), f;
}
function s(e, p) {
  return e.popupTemplate ? e.popupTemplate : r(p) && p.defaultPopupTemplateEnabled && r(e.defaultPopupTemplate) ? e.defaultPopupTemplate : null;
}

export {
  d,
  s
};
//# sourceMappingURL=chunk-7S6G3GM7.js.map
