import {
  b
} from "./chunk-GSFXXEAM.js";
import {
  t
} from "./chunk-CBQWMOBK.js";

// node_modules/@arcgis/core/layers/support/featureQueryAll.js
async function t2(r, t3, o2) {
  t3 = t3.clone(), r.capabilities.query.supportsMaxRecordCountFactor && (t3.maxRecordCountFactor = u(r));
  const i = a(r), n = r.capabilities.query.supportsPagination;
  t3.start = 0, t3.num = i;
  let s = null;
  for (; ; ) {
    const a2 = await r.source.queryFeaturesJSON(t3, o2);
    if (t(s) ? s = a2 : s.features = s.features.concat(a2.features), s.exceededTransferLimit = a2.exceededTransferLimit, !n || !a2.exceededTransferLimit)
      break;
    t3.start += i;
  }
  return s;
}
function a(e) {
  return u(e) * o(e);
}
function o(e) {
  return e.capabilities.query.maxRecordCount || 2e3;
}
function u(e) {
  return e.capabilities.query.supportsMaxRecordCountFactor ? b.MAX_MAX_RECORD_COUNT_FACTOR : 1;
}

export {
  t2 as t,
  a
};
//# sourceMappingURL=chunk-E452MYWA.js.map
