{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js", "../../@arcgis/core/views/3d/layers/i3s/I3SIndex.js", "../../@arcgis/core/views/3d/layers/support/I3SLayerView.js", "../../@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js", "../../@arcgis/core/views/3d/layers/i3s/enums.js", "../../@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js", "../../@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js", "../../@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js", "../../@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js", "../../@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js", "../../@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js", "../../@arcgis/core/views/3d/support/GraphicsMap.js", "../../@arcgis/core/views/3d/layers/i3s/I3SAttributeOverrides.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{removeUnordered as t}from\"../../../../core/arrayUtils.js\";import{TaskPriority as e}from\"../../../support/Scheduler.js\";class r{constructor(t){this.referenceCount=0,this.callbacks=[],this.runIndex=0,this.handle=t.registerTask(e.I3S_CONTROLLER,this)}destroy(){this.handle&&(this.handle.remove(),this.handle=null)}get running(){for(const t of this.callbacks)if(t.needsUpdate())return!0;return!1}runTask(t){this._sort();const e=this.callbacks,r={numIndexLoading:0,numNodesLoading:0};for(let s=0;s<e.length&&!t.done;++s)e[s].priority=e[s].update(t,r),this.runIndex=s}_sort(){const t=this.callbacks;let e=t.length;for(let r=this.runIndex;r>0;r--){const s=t[r-1];let n=r;for(;n<t.length&&s.priority<=t[n].priority&&(n!==e||s.priority<t[n].priority);)t[n-1]=t[n],n++;t[n-1]=s,e=n-1}this.runIndex=0}add(t){this._sort(),t.priority=1/0,this.callbacks.unshift(t)}remove(e){t(this.callbacks,e),this.runIndex=this.callbacks.length,this._sort()}}const s=new Map;function n(t,e){let n=s.get(t);return null==n&&(n=new r(t),s.set(t,n)),n.add(e),{remove:()=>{if(null==n)return;n.remove(e);n.callbacks.length>0||(s.delete(t),n.destroy()),n=null}}}export{n as addTask};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t,unwrap as i}from\"../../../../core/maybe.js\";import s from\"../../../../core/PooledArray.js\";import{isAbortError as n}from\"../../../../core/promiseUtils.js\";import{l as r}from\"../../../../chunks/vec3.js\";import{b as o}from\"../../../../chunks/vec4f64.js\";import{LodMetric as a,NodeBase as d,Node as l,ElevationRange as h,NodeFilterImpact as u,NodeIMModificationImpact as c,NodeTraversalState as g}from\"./I3SNode.js\";import{addWraparound as m,invalidateMbs as _,invalidateObb as f}from\"./I3SUtil.js\";import{clone as v}from\"../../support/orientedBoundingBox.js\";class b{constructor(e,t,i,s,n){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=s,this.node=n,this.useAsHole=0,this.filterImpact=u.NotChecked}}class p{constructor(e,t,i,n,r,o,d,l,h,u,c,g,m,_){this.streamDataController=i,this.viewportQueries=n,this.logger=r,this.holeFilling=o,this._isLoaded=d,this._isReloading=l,this._isSelected=h,this._enable=u,this._needsUpdate=c,this._canRequest=g,this._computeVisibilityObb=m,this._computeNodeFiltering=_,this._dirty=!0,this._nodePages=[],this.nodeCount=0,this.nodesPerPage=0,this.rootIndex=0,this.lodMetric=a.None,this._lodConversion=e=>e,this.urlPrefix=\"\",this._loading=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._nodeTraversalState=new Map,this._version=I(0),this._visibilityCacheVersion=I(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missing=new s({deallocator:null}),this._prefetch=new s({deallocator:null}),this._updates=new N(this._missing),this._imModificationUncategorized=new s({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=[],this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this.logLayer=e,e.serviceUpdateTimeStamp&&e.serviceUpdateTimeStamp.lastUpdate&&(this.lastUpdate=`${e.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this.viewportQueries?this.viewportQueries.maxLodLevel:1,this._init(t)}_init(e){if(\"page\"===e.type){switch(this.urlPrefix=e.urlPrefix,this.nodesPerPage=e.pageSize,this.rootIndex=e.rootIndex,e.lodMetric){case\"maxScreenThreshold\":this.lodMetric=a.MaxScreenThreshold;break;case\"maxScreenThresholdSQ\":this.lodMetric=a.MaxScreenThreshold,this._lodConversion=V}this._addPage(S(this.rootIndex,this.nodesPerPage),e.rootPage),this._updateParentsAndLevel()}else if(\"node\"===e.type){this.urlPrefix=e.urlPrefix,this._nodePages.push({nodes:[],children:[],parents:[]}),this._makeRefNode(new d(e.rootNode.id,null),-1);const t=this._validateNode(e.rootNode.id,e.rootNode);t&&this._addNode(t,0)}}_loadPage(e){this._loading.add(e);const t=this.urlPrefix+e;this.streamDataController.request(t,\"json\").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((t=>{this._loading.delete(e),n(t)||(this._failedPages.add(e),this.logger.error(\"#loadPage()\",this.logLayer,`Error when loading page ${e}`,t))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loading.delete(t),e.madeProgress()}this._updateParentsAndLevel()}_addPage(e,t){for(let r=this._nodePages.length;r<e;r++)this._nodePages[r]=null;const i=[],s=[],n=t.nodes.map(((t,n)=>{const a=i.length,d=t.children?t.children.length:0;s.push(-1);for(let e=0;e<d;e++)i.push(t.children[e]);const h=`${t.index}`,u=v(t.obb),c=o([u.center[0],u.center[1],u.center[2],r(u.halfSize)]),g=t.mesh&&t.mesh.attribute,m=t.mesh&&t.mesh.geometry,_=t.mesh&&t.mesh.material,f={hasSharedResource:!1,hasFeatureData:!!m,attributes:g&&null!=g.resource?`${g.resource}`:null,geometry:m&&null!=m.resource?`${m.resource}`:null,texture:_&&null!=_.resource?`${_.resource}`:null,geometryDefinition:m?m.definition:-1,materialDefinition:_?_.definition:-1},p=new l(h,e*this.nodesPerPage+n,c,d,0,f,this.lastUpdate,this.lodMetric,this._lodConversion(t.lodThreshold),m?m.featureCount:null);return p.serviceObb=u,p.visibilityObb=this._computeVisibilityObb(p),p.vertexCount=m?m.vertexCount:0,new b(a,d,x(this._visibilityCacheVersion),null,p)}));this._nodePages[e]={nodes:n,children:i,parents:s},this.nodeCount+=n.length}_updateParentsAndLevel(){const t=new Array,i=(i,s,n)=>{const r=this._getPage(i);if(e(r)){const o=L(i,this.nodesPerPage);r.parents[o]=s;const a=r.nodes[o].node;e(a)&&(a.level=n,t.push(i))}};for(i(this.rootIndex,-1,0);t.length;){const s=t.pop(),n=this.getNode(s);if(e(n))for(let e=0;e<n.childCount;e++){i(this.getChildIndex(n.index,e),s,n.level+1),this._maxLevel=Math.max(this._maxLevel,n.level+1)}}}_getPage(e){return this._nodePages[S(e,this.nodesPerPage)]}_getNodeInternal(e){const i=this._getPage(e);return t(i)?null:i.nodes[L(e,this.nodesPerPage)]}_addNode(t,s){null!=t.children&&this.populateChildren(s,t.children);const n=this.getParent(s),r=e(n)?n.level+1:0;this._maxLevel=Math.max(this._maxLevel,t.children?r+1:r);const{lodMetric:a,maxError:d}=E(t.lodSelection),h=i(this._getNodeInternal(s));return h.node=new l(t.id,s,o(t.mbs),h.childCount,r,t.resources,t.version,a,d,t.numFeatures),t.obb&&(h.node.serviceObb=v(t.obb)),h.node.visibilityObb=this._computeVisibilityObb(h.node),e(h.ref)&&(null==h.ref.mbs&&(h.ref.mbs=t.mbs),h.node.renderMbs=h.ref.renderMbs,h.node.serviceObbInRenderSR=h.ref.serviceObbInRenderSR,h.ref.visibilityObb=h.node.visibilityObb),h.node}_makeRefNode(e,t){const i=this._nodePages[0],s=i.nodes.length;return i.nodes.push(new b(0,0,x(this._visibilityCacheVersion),e,null)),this.nodeCount++,i.parents.push(t),_(e.renderMbs),f(e.serviceObbInRenderSR),s}populateChildren(e,t){const s=i(this._getNodeInternal(e)),n=i(this._getPage(e));s.childOffset=n.children.length,s.childCount=t.length;for(let i=0;i<t.length;i++){const s=this._makeRefNode(t[i],e);n.children.push(s)}}getNode(t){const i=this._getNodeInternal(t);return e(i)?i.node:null}getIndexById(t){let i;return this._forAllNodes(((s,n)=>{(e(s.node)&&s.node.id===t||e(s.ref)&&s.ref.id===t)&&(i=n)})),i}getNodeById(e){const t=this.getIndexById(e);return t>=0?this.getNode(t):null}getChildIndex(e,i){const s=this._getPage(e);if(t(s))return-1;const n=s.nodes[L(e,this.nodesPerPage)];return s.children[n.childOffset+i]}getParentIndex(t){const i=this._getPage(t);return e(i)?i.parents[L(t,this.nodesPerPage)]:-1}getParent(e){return(e=this.getParentIndex(e))>=0?this.getNode(e):null}isLeaf(t){const i=this._getNodeInternal(t);return e(i)&&0===i.childCount}get rootNode(){return this.getNode(this.rootIndex)}get size(){return this.nodeCount}removeAllGeometryObbs(){this._forAllNodes((t=>{e(t.node)&&(t.node.geometryObb=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=I(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(t){const i=this._getNodeInternal(t);e(i)&&this.invalidateNodeVisibilityCacheInternal(i)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=x(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(t){const i=this._getNodeInternal(t);e(i)&&(P(i),this.invalidateNodeVisibilityCacheInternal(i))}updateElevationChanged(i){const s=this._getNodeInternal(i);if(t(s))return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(i);const n=e(s.node)?s.node:s.ref;if(t(n))return;const r=n.elevationRange;t(r)||(r.valid=!1)}invalidateGeometryVisibility(t){const i=this._getNodeInternal(t);e(i)&&e(i.node)&&(i.node.geometryObb=null,_(i.node.renderMbs),f(i.node.serviceObbInRenderSR))}invalidateVisibilityObbs(){t(this.rootNode)||this.traverse(this.rootNode,(e=>(e.visibilityObb=this._computeVisibilityObb(e),e.geometryObb=null,!0)))}_updateElevationRange(i){const s=this._getNodeInternal(i);if(t(s))return null;const n=e(s.node)?s.node:s.ref;if(t(n))return null;const r=n.elevationRange;if(e(r)&&r.valid)return r;const o=new h;let a=!1;for(let e=0;e<s.childCount;e++){const s=this._updateElevationRange(this.getChildIndex(i,e));t(s)?a=!0:(o.min=Math.min(o.min,s.min),o.max=Math.max(o.max,s.max))}if(0===s.childCount||a&&e(s.node)&&s.node.resources.geometry){const t=this.viewportQueries.getElevationRange(n);e(t)&&(o.min=Math.min(o.min,t.min),o.max=Math.max(o.max,t.max))}return e(r)&&r.min===o.min&&r.max===o.max?(r.valid=!0,r):(o.valid=!0,n.elevationRange=o,this.invalidateBoundingVolumeCache(i),o)}isNodeVisible(i){const s=this._getNodeInternal(i);if(t(s)||e(s.ref)&&!s.ref.mbs)return!0;if(this.needNodeElevationRange&&this._updateElevationRange(i),!w(s.visibilityCache,this._visibilityCacheVersion)){const i=s.node,n=e(i)&&(t(s.ref)||e(i.visibilityObb))?i:e(s.ref)?s.ref:null;if(this._layerHasFilter&&this._computeNodeFiltering&&(e(i)||e(s.ref))&&s.filterImpact===u.NotChecked){const t=e(i)?i.mbs:e(s.ref)?s.ref.mbs:null;s.filterImpact=null!=t?this._computeNodeFiltering(t):u.Unmodified}const r=e(i)&&s.filterImpact===u.Culled,o=!(e(i)&&i.imModificationImpact===c.Culled)&&(!n||this.viewportQueries.isNodeVisible(n))&&!r;return s.visibilityCache=C(o,this._visibilityCacheVersion),o}return M(s.visibilityCache)}isGeometryVisible(t){if(!this.isNodeVisible(t))return!1;const i=this._getNodeInternal(t);return!(e(i)&&e(i.node)&&e(i.node.geometryObb)&&(!this.layerHasModifications||i.node.imModificationImpact!==c.NotChecked))||this.viewportQueries.isGeometryVisible(i.node)}_traverseCoverage(s,n,r,o,a){const d=this._getPage(s);if(t(d)||0===n.childCount)return;const l=n.childOffset+n.childCount,h=new Array;for(let t=n.childOffset;t<l;++t){const i=d.children[t],s=this._getNodeInternal(i);e(s)&&e(s.node)&&this.isGeometryVisible(i)&&h.push(s)}o/=h.length;for(const e of h){const t=i(e.node).index;this._isLoaded(t)||this._isReloading(t)?(a.delta=Math.max(a.delta,r),a.coverage+=o):this._traverseCoverage(t,e,r+1,o,a)}}useNodeAsHole(e){if(\"off\"===this.holeFilling)return!1;const i=this._getNodeInternal(e);if(t(i))return!1;if(\"always\"===this.holeFilling)return!0;if(w(i.useAsHole,this._version))return M(i.useAsHole);const s={delta:0,coverage:0};this._traverseCoverage(e,i,0,1,s);const n=s.delta*s.coverage<=.5;return i.useAsHole=C(n,this._version),n}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=I(this._version)}imModificationsChanged(t){this.layerHasModifications=t,this._forAllNodes((({node:t})=>{e(t)&&(t.imModificationImpact=c.NotChecked,t.visibilityObb=this._computeVisibilityObb(t),t.hasModifications&&this.invalidateGeometryVisibility(t.index))})),this.invalidateVisibilityCache()}layerFilterChanged(t){this._layerHasFilter=t,this._forAllNodes((t=>{if(e(t)){t.filterImpact=u.NotChecked;const i=t.node;e(i)&&this.invalidateNodeVisibilityCache(i.index)}})),this.invalidateVisibilityCache()}update(s,n,r){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(n),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missing.clear(),this._prefetch.clear(),this._updates.reset(s),y.clear();let o=!0;const a=new O,d=new O,l=this._imModificationUncategorized;l.clear();const h=new Set,u=(u,g,m)=>{if(t(g)){let e=this._entryPriority(u);e===1/0&&(e=this._entryPriority(m));const t=S(u,this.nodesPerPage);return y.set(t,Math.max(e,y.get(t)||0)),this._loading.has(t)||this._failedPages.has(t)||this._missing.push(t),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const _=g.node;if(this._updateNodeFeatureEstimate(_,d),t(_)){const e=this._entryPriority(u);return this._loading.has(u)||this._failedNodes.has(u)||(this._missing.push(u),y.set(u,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const f=i(this._getPage(u));if(0===this._missing.length&&0===this.nodesPerPage)for(let t=0;t<g.childCount;t++){const i=f.children[g.childOffset+t],s=this._getNodeInternal(i);!e(s)||s.node||this._loading.has(i)||this._failedNodes.has(i)||(y.set(i,this._entryPriority(i)),this._prefetch.push(i))}if(_.failed||!_.resources.hasFeatureData)return void(o&&g.childCount>0&&this._isSelected(_)&&(o=!1));if(h.add(_.id),this._isLoaded(u)){if(a.known+=_.memory,++a.knownNodes,this._isSelected(_)?g.childCount>0&&(o=!1):(a.unremoved+=_.memory,o=!1),this._needsUpdate(_)){const e=this._entryPriority(u);y.set(u,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(u)}return}if(_.memory&&(a.known+=_.memory,++a.knownNodes),!this._isSelected(_))return void(this._isReloading(u)&&this._updates.remove.push(u));if(g.childCount>0&&(o=!1),_.memory?(a.missing+=_.memory,a.known+=_.memory,++a.knownNodes):++a.missingNodes,s.includes(_.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(u)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==_.index)));if(!n.done&&this._enable(_))return void n.madeProgress();const v=this._entryPriority(u);y.set(u,v),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,v),this._updates.add.push(u),this.layerHasModifications&&r&&e(_)&&_.imModificationImpact===c.NotChecked&&l.push(u)};this.traverseVisible(u);const g=this._updates.add;g.length>0&&this.layerHasModifications&&(l.length>0&&r(l),g.filterInPlace((e=>{const i=this._getNodeInternal(e),s=t(i)||t(i.node)||i.node.imModificationImpact!==c.Culled;return s||this.invalidateNodeVisibilityCache(e),s}))),this._unloadedMemoryEstimate=a.missing-a.unremoved,a.knownNodes>3&&a.missingNodes>0&&(this._unloadedMemoryEstimate+=a.known/a.knownNodes*a.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(d),this._featureEstimate.leavesReached=o,this._missing.sort(((e,t)=>e-t)),this._missing.filterInPlace(((e,t)=>t<1||this._missing.data[t-1]!==e)),this._missing.sort(((e,t)=>y.get(e)-y.get(t))),this._missing.length>0&&(this._maxUnloadedPrio=y.get(this._missing.back()),this._prefetch.clear()),this._updates.add.filterInPlace((e=>y.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>y.get(e)-y.get(t))),this._updates.update.sort(((e,t)=>y.get(e)-y.get(t))),this._indexMissing=this._loading.size+this._missing.length,this._dirty=this._indexMissing>0,y.clear()}checkFeatureTarget(e,t){const i=this.viewportQueries.updateScreenSpaceErrorBias(t);let s=t,n=t,r=i,o=10;for(;o--;){const i=new O;this._updateFeatureEstimate(s,i);if(this._computeFeatureEstimate(i)<=e){if(s>=t||i.missingNodes>0||0===o)break;r=s,s=.5*(s+n)}else n=s,s=.5*(s+r)}return this._version=I(this._version),this.viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,s)}_updateFeatureEstimate(t,i){this._version=I(this._version),this.viewportQueries.updateScreenSpaceErrorBias(t),this.traverseVisible(((t,s)=>this._updateNodeFeatureEstimate(e(s)&&s.node,i)))}_updateNodeFeatureEstimate(i,s){if(!(t(i)||i.failed||t(i.numFeatures)))return this._isLoaded(i.index)?(s.known+=i.numFeatures,++s.knownNodes,void(this._isSelected(i)||(s.unremoved+=i.numFeatures))):void(this._isSelected(i)&&(e(i.numFeatures)?(s.missing+=i.numFeatures,s.known+=i.numFeatures,++s.knownNodes):++s.missingNodes))}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missing)}prefetch(){return this._prefetch.sort(((e,t)=>y.get(e)-y.get(t))),this._load(this._prefetch)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();)0===this.nodesPerPage?this._loadNode(e.pop()):this._loadPage(e.pop());return!0}isLoading(){return this._indexMissing>0}getIndexLoading(){return this._loading.size}getIndexMissing(){return this._indexMissing}getUnloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}nodeTraversalState(e){if(t(e))return null;let i=this._nodeTraversalState.get(e.index);if(i&&w(i.version,this._version))return i;const s=this.viewportQueries.getLodLevel(e),n=this.viewportQueries.hasLOD(e);let r=!0;if(n){const t=this.getParentIndex(e.index);if(t>=0){const e=this._nodeTraversalState.get(t);r=e&&s>e.lodLevel}else r=s>0}else r=0===e.childCount;return i?(i.lodLevel=s,i.isChosen=r,i.version=C(!0,this._version),i):(i=new g(n,r,s,C(!0,this._version)),this._nodeTraversalState.set(e.index,i),i)}_loadNode(e){this._loading.add(e);const s=i(this._getNodeInternal(e)).ref;if(t(s))return void this._failedNodes.add(e);const r=s.id,o=this.urlPrefix+r,a=()=>{this._loading.delete(e),0===this._missing.length&&0===this._loading.size&&this.requestUpdate()};this.streamDataController.request(o,\"json\").then((t=>{a();const i=this._validateNode(r,t);if(null==i)return;i.obb&&this.invalidateNodeVisibilityCache(e);const s=this._addNode(i,e);this.nodeTraversalState(s)}),(t=>{a(),n(t)||(this.logger.error(\"#loadNode()\",this.logLayer,\"Error loading node: \"+o),this._failedNodes.add(e))}))}_validateNode(e,t){if(null==t||\"object\"!=typeof t||t.id!==e)return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node. Wrong type or wrong id \"${e}\"`),null;if(!Array.isArray(t.mbs))return this.logger.error(\"#validateNode()\",this.logLayer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&\"./shared\"!==t.sharedResource.href&&\"./shared/\"!==t.sharedResource.href&&this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid shared resource href on node \"${e}\"`),null==t.geometryData||Array.isArray(t.geometryData)&&1===t.geometryData.length&&\"./geometries/0\"===t.geometryData[0].href||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid geometry data on node \"${e}\"`),null==t.attributeData||Array.isArray(t.attributeData)&&!t.attributeData.some(((e,t)=>e.href!==`./attributes/f_${t}/0`))||this.logger.warn(\"#validateNode()\",this.logLayer,`Invalid attribute data on node \"${e}\"`),t.featureData&&t.featureData.length>1&&this.logger.warn(\"#validateNode()\",this.logLayer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const i=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,s=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:null,n=t=>{if(null==t)return null;const i=t=>this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node reference on node ${e}: ${t}`);if(\"number\"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if(\"string\"!=typeof t.id||!Array.isArray(t.mbs))return i(\"Missing or invalid id.\"),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!==\"../\"+t.id&&this.logger.error(\"#validateNode()\",this.logLayer,`Invalid node href on node \"${e}\"`);const s=t.hasOwnProperty(\"obb\")&&!this.ignoreServiceObb?t.obb:null,n=new d(`${t.id}`,t.mbs);return n.serviceObb=s,n.visibilityObb=this._computeVisibilityObb(n),n},r=Array.isArray(t.children)?t.children.map(n).filter((e=>null!=e)):null;return{id:e,mbs:t.mbs,obb:i,children:r,resources:{hasFeatureData:t.featureData&&t.featureData.length>0,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:null,texture:t.textureData&&t.textureData.length>0?e:null,geometry:null!=t.geometryData?e:null},version:\"string\"==typeof t.version?t.version:null,lodSelection:Array.isArray(t.lodSelection)?t.lodSelection:null,numFeatures:s}}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((t=>{e(t.node)&&(t.node.failed=!1)}))}_entryPriority(i){const s=this._getNodeInternal(i),n=this.getParentIndex(i);if(t(s)||n<0&&null==s.node)return n<0?1/0:this._entryPriority(n);let r=0;if(s.node&&n>=0){const e=this._nodeTraversalState.get(n);null!=e&&(r=e.lodLevel)}let o=this.progressiveLoadPenalty;for(let e=i;e>=0;e=this.getParentIndex(e))if(this._isLoaded(e)){o=0;break}const a=e(s.ref)?this.viewportQueries.distToPOI(s.ref):e(s.node)?this.viewportQueries.distToPOI(s.node):0;return-a-r*(a+this.progressiveLoadPenalty)+o}traverseVisible(e){const i=this._getNodeInternal(this.rootIndex);t(i)?e(this.rootIndex,null,null):this._traverseVisible(this.rootIndex,-1,i,e)}_traverseVisible(t,s,n,r){if(n.node&&0===n.childCount)return void(this.isGeometryVisible(t)&&r(t,n,s));if(!this.isNodeVisible(t))return;if(r(t,n,s),null==n.node)return;const o=this.nodeTraversalState(n.node);if(o.nodeHasLOD&&o.lodLevel===this._maxLodLevel)return;const a=i(this._getPage(t));for(let i=0;i<n.childCount;i++){const s=a.children[n.childOffset+i],o=this._getNodeInternal(s);e(o)?this._traverseVisible(s,t,o,r):r(s,null,t)}}traverse(e,t){t(e)&&this.traverseChildren(e,t)}traverseChildren(t,i){const s=t.index,n=this._getNodeInternal(s);e(n)&&this._traverseChildren(s,n,i)}_traverseChildren(i,s,n){const r=this._getPage(i);if(t(r))return;const o=s.childOffset+s.childCount;for(let t=s.childOffset;t<o;++t){const i=r.children[t],s=this._getNodeInternal(i);e(s)&&e(s.node)&&n(s.node)&&this._traverseChildren(i,s,n)}}updateChildrenLoaded(t,i){let s=this.getNode(t);for(;e(s);)s.childrenLoaded+=i,s=this.getParent(s.index)}checkChildrenLoadedInvariant(){if(t(this.rootNode))return!0;const e=[],i=t=>{let s=this._isLoaded(t.index)||this._isReloading(t.index)?1:0;return this.traverseChildren(t,(e=>(s+=i(e),!1))),t.childrenLoaded!==s&&e.push(t.index),s};return i(this.rootNode),e.length&&this.logger.error(\"childrenLoaded invariant broken at following nodes: \"+e.join(\",\")),e.length>0}updateStats(e){if(this._updates.add.length>0&&(e.nodes+=\" + \"+this._updates.add.length),(this._indexMissing||this._prefetch.length>0)&&(e.index+=\" + \"+this._indexMissing||this._prefetch.length),e.prio=this._maxProcessingPrio,this._featureEstimate.estimate){const t=this._featureEstimate.estimate-e.features;t>0?e.features+=\" + \"+t:t<0&&(e.features+=\" - \"+-t)}}getPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}updateElevationInfo(t,i){this.needNodeElevationRange=i&&t&&(\"relative-to-ground\"===t.mode||\"on-the-ground\"===t.mode),this._forAllNodes((t=>{P(t),e(t.node)&&(t.node.elevationRange=null),e(t.ref)&&(t.ref.elevationRange=null)})),this.viewportQueries.updateElevationInfo(t)}_forAllNodes(e){for(let t=0;t<this._nodePages.length;t++){const i=this._nodePages[t];if(i){const s=t*this.nodesPerPage;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],s+t)}}}get test(){return{addNode:(e,t)=>this._addNode(e,t)}}}const y=new Map;class N{constructor(e){this.missing=e,this.update=new s({deallocator:null}),this.add=new s({deallocator:null}),this.remove=new s({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function P(t){e(t.node)&&(_(t.node.renderMbs),f(t.node.serviceObbInRenderSR)),e(t.ref)&&(_(t.ref.renderMbs),f(t.ref.serviceObbInRenderSR))}function x(e){return m(e,-2)}function I(e){return m(e,2)}function C(e,t){return t+(e?1:0)}function w(e,t){return(-2&e)===t}function M(e){return 1==(1&e)}function S(e,t){return 0===t?0:e/t|0}function L(e,t){return 0===t?e:e%t}const R=[[\"maxScreenThreshold\",a.MaxScreenThreshold],[\"screenSpaceRelative\",a.ScreenSpaceRelative],[\"removedFeatureDiameter\",a.RemovedFeatureDiameter],[\"distanceRangeFromDefaultCamera\",a.DistanceRangeFromDefaultCamera]];function E(e){if(e)for(let t=0;t<e.length;t++)for(const i of R)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:a.None,maxError:0}}class O{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function V(e){return Math.sqrt(e*(4/Math.PI))}export{p as I3SIndex,E as selectErrorMetric};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nvar a;!function(a){a[a.FadeIn=0]=\"FadeIn\",a[a.FadeOut=1]=\"FadeOut\"}(a||(a={}));export{a as FadeDirection};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as i}from\"../../../../core/maybe.js\";import o from\"../../../../core/PooledArray.js\";import{NodeState as s}from\"./I3SNode.js\";import{FadeDirection as d}from\"../support/I3SLayerView.js\";class t{constructor(e){this.layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,o,s){this._maxLodLevel=s.maxLodLevel,this._index=o,this._isNodeInScaleBounds=e,this._removeNodes=i}shouldLoadNode(i){if(e(i))return!1;const o=this._index.nodeTraversalState(i);return!!this._isChosenMaxLOD(o)||!!o.isChosen&&this._childrenRequireLoading(i)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this.layerView.view.resourceController.memoryController.usedMemory,o=Math.max(0,Math.floor(10*(i-1)));r.clear(),this._lodGlobalHandling(this._index.rootNode,o,!1,this.layerView.nodeCrossfadingEnabled);const s=r.length;this._removeNodes(r,e);const d=r.length<s;return 0!==r.length&&(this._lodGlobalDirty=!0),r.clear(),d}_lodGlobalHandling(o,t,l,n){if(e(o))return!1;const a=o.index,h=this._index,u=this.layerView,c=h.nodeTraversalState(o),_=this._isChosenMaxLOD(c),x=!o.resources.hasFeatureData;if(_&&x)return o.childrenLoaded>0&&this._removeChildrenRecursive(o),!0;const L=u.isNodeLoaded(a);if(n&&L&&_){const e=!l&&this.hasNoVisibleChildren(o);u.fadeNode(a,d.FadeIn,!e)}const N=L&&(!u.isNodeFullyFadedIn||u.isNodeFullyFadedIn(a));if(L&&(u.updateNodeState(a,_?s.Leaf:s.Hole),_))return N&&this._removeChildrenRecursive(o),N;const m=o.childCount>0;let y=m;if(m)for(let e=0;e<o.childCount;e++){const o=h.getChildIndex(a,e),s=h.getNode(o);if(i(s)){!(!h.isGeometryVisible(o)||this._lodGlobalHandling(s,t,l||N,n))&&this._isNodeInScaleBounds(s)&&(y=!1)}else h.isNodeVisible(o)&&(y=!1)}const b=L&&!_&&(y||r.length<t);b&&r.push(a),!n||b||!L||l||y||u.fadeNode(a,d.FadeIn,!1);const f=!o.resources.hasFeatureData;return y||N&&!b||f}_removeChildrenRecursive(e){this._index.traverseChildren(e,(e=>((this.layerView.isNodeLoaded(e.index)||this.layerView.isNodeReloading(e.index))&&r.push(e.index),e.childrenLoaded>0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseChildren(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(this.layerView.isNodeLoaded(e.index)?(i=!1,!1):e.childrenLoaded>0))),i}_childrenRequireLoading(e){let i=!1,o=!0;return this._index.traverseChildren(e,(e=>{if(!o||!this._index.isNodeVisible(e.index))return!1;const s=this._index.nodeTraversalState(e);return this._isChosenMaxLOD(s)&&this._index.isGeometryVisible(e.index)&&(i=!0),this.layerView.isNodeLoaded(e.index)?(o=!1,!1):e.childrenLoaded>0})),o&&i}_isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const r=new o({deallocator:null});export{t as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nvar e,s;!function(e){e[e.KTX2=1]=\"KTX2\",e[e.Basis=2]=\"Basis\",e[e.DDS_S3TC=4]=\"DDS_S3TC\",e[e.PNG=8]=\"PNG\",e[e.JPG=16]=\"JPG\",e[e.KTX_ETC2=32]=\"KTX_ETC2\"}(e||(e={})),function(e){e[e.None=0]=\"None\",e[e.Color=1]=\"Color\",e[e.MetallicRoughness=2]=\"MetallicRoughness\",e[e.Normal=4]=\"Normal\",e[e.Occlusion=8]=\"Occlusion\",e[e.Emissive=16]=\"Emissive\",e[e.AlphaMask=32]=\"AlphaMask\",e[e.ColorTextures=19]=\"ColorTextures\",e[e.GeometryTextures=36]=\"GeometryTextures\",e[e.GeometryTexturesPBR=44]=\"GeometryTexturesPBR\",e[e.AllTextures=37]=\"AllTextures\",e[e.AllTexturesPBR=63]=\"AllTexturesPBR\"}(s||(s={}));export{e as TextureEncoding,s as TextureUsage};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as e,isSome as t}from\"../../../../../core/maybe.js\";import{isPromiseLike as s}from\"../../../../../core/promiseUtils.js\";class r{constructor(t,r){this._textureRep=t,this._disposed=!1;const i=this._textureRep.acquire(r);s(i)?(i.then((t=>{this._disposed?e(t):this._textureRef=t})),this.loadPromise=i):this._textureRef=i}dispose(){this._textureRef=e(this._textureRef),this._disposed=!0}get glTexture(){return t(this._textureRef)?this._textureRef.glTexture:null}}export{r as RenderTexture};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/has.js\";import{clamp as a,isPowerOfTwo as o}from\"../../../../core/mathUtils.js\";import{isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{TextureEncoding as t,TextureUsage as n}from\"./enums.js\";import{RenderTexture as l}from\"../../webgl-engine/core/material/RenderTexture.js\";import{PBRSchematicMRRValues as i}from\"../../webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{defaultMaskAlphaCutoff as u}from\"../../webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{getEllipsoidMode as c}from\"../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js\";import{CullFaceOptions as m,AlphaDiscardMode as d}from\"../../webgl-engine/lib/basicInterfaces.js\";import{Texture as g}from\"../../webgl-engine/lib/Texture.js\";import{TextureWrapMode as p}from\"../../../webgl/enums.js\";function h(e,a){const o=new Map,t=(e,a)=>{if(s(e))return-1;if(o.has(e.id)){const r=o.get(e.id);return r.usage|=a,r.id}const r=o.size;return o.set(e.id,{id:r,usage:a}),r},l=a.pbrMetallicRoughness,u=l&&l.baseColorFactor,c=a.emissiveFactor,d=null==a.normalTexture&&null==a.emissiveTexture&&null==a.occlusionTexture&&(!l||null==l.metallicRoughnessTexture&&1===l.roughnessFactor&&(1===l.metallicFactor||0===l.metallicFactor)),g=d?i[0]:l?l.metallicFactor:1,p=d?i[1]:l?l.roughnessFactor:1,h=\"mask\"===a.alphaMode?n.Color|n.AlphaMask:n.Color,x={baseColorFactor:u?[u[0],u[1],u[2],u[3]]:[1,1,1,1],baseColorTextureId:t(l&&l.baseColorTexture,h),metallicRoughnessTextureId:t(l&&l.metallicRoughnessTexture,n.MetallicRoughness),metallicFactor:g,roughnessFactor:p},b={alphaMode:a.alphaMode,alphaCutoff:a.alphaCutoff,doubleSided:a.doubleSided,cullFace:\"none\"===a.cullFace?m.None:\"back\"===a.cullFace?m.Back:\"front\"===a.cullFace?m.Front:void 0,normalTextureId:t(a.normalTexture,n.Normal),emissiveTextureId:t(a.emissiveTexture,n.Emissive),occlusionTextureId:t(a.occlusionTexture,n.Occlusion),emissiveFactor:c?[c[0],c[1],c[2]]:[0,0,0],metallicRoughness:x,wrapTextures:!1,hasParametersFromSource:d},F=[];return o.forEach((({usage:a},o)=>{const s=r(e)&&e[o]&&e[o].formats,t=s?f(s.map((({name:e,format:a})=>({name:e,encoding:T[a]})))):[];F.push({id:o,usage:a,encodings:t})})),{material:b,textures:F}}function f(e){return e.sort(((e,a)=>e.encoding-a.encoding))}const T={ktx2:t.KTX2,basis:t.Basis,dds:t.DDS_S3TC,png:t.PNG,jpg:t.JPG,\"ktx-etc2\":t.KTX_ETC2},x={[g.KTX2_ENCODING]:t.Basis,[g.BASIS_ENCODING]:t.Basis,[g.DDS_ENCODING]:t.DDS_S3TC,\"image/png\":t.PNG,\"image/jpg\":t.JPG,\"image/jpeg\":t.JPG,\"image/ktx\":t.KTX_ETC2};function b(e){const o=e&&e.materialDefinitions?Object.keys(e.materialDefinitions)[0]:null,r=e&&e.textureDefinitions?Object.keys(e.textureDefinitions)[0]:null,s=o&&e.materialDefinitions[o],t=r&&e.textureDefinitions[r],l=F();if(null!=s){const e=s.params;e.diffuse&&(l.metallicRoughness.baseColorFactor=[e.diffuse[0],e.diffuse[1],e.diffuse[2],1]),null!=e.doubleSided&&(l.doubleSided=e.doubleSided,l.cullFace=e.doubleSided?m.None:m.Back),\"none\"!==e.cullFace&&\"front\"!==e.cullFace&&\"back\"!==e.cullFace||(l.cullFace=\"none\"===e.cullFace?m.None:\"back\"===e.cullFace?m.Back:m.Front),e.transparency&&(l.metallicRoughness.baseColorFactor[3]=a(1-e.transparency,0,1)),(e.useVertexColorAlpha||l.metallicRoughness.baseColorFactor[3]<1)&&(l.alphaMode=\"blend\")}const i=[];if(null!=t){const e=0;!t.wrap||\"repeat\"!==t.wrap[0]&&\"repeat\"!==t.wrap[1]||(l.wrapTextures=!0);let a=n.Color;\"rgba\"===t.channels&&(l.alphaMode=\"blend\",a|=n.AlphaMask);const o=t.images.length-1,r=t.images[o],s=e=>e&&e.split(\"/\").pop(),u=Array.isArray(t.encoding)?f(t.encoding.map(((e,a)=>({name:s(r.href[a]),encoding:x[e]||0})))):[{name:s(r.href),encoding:x[t.encoding]||0}];i.push({id:e,usage:a,encodings:u}),l.metallicRoughness.baseColorTextureId=e}return{material:l,textures:i}}const F=()=>({alphaMode:\"opaque\",alphaCutoff:u,doubleSided:!0,cullFace:m.None,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function C(e,a,r,t){if(s(e)||null==e.data)return null;const l=e.data,i=!(l instanceof HTMLImageElement)||o(l.width)&&o(l.height),u=t.renderingContext.parameters.maxMaxAnisotropy,c=r&&!t.capabilities.shaderTextureLOD?1:u,m=i&&!e.downsampled&&c>1,d=r||!a.wrapTextures?P:M,p=E(e.encoding),h=e.usage&n.Color?\"opaque\"===a.alphaMode?3:4:3;return new g(l,{mipmap:m,maxAnisotropy:c,encoding:p,wrap:d,components:h,noUnpackFlip:!0})}const P={s:p.CLAMP_TO_EDGE,t:p.CLAMP_TO_EDGE},M={s:p.REPEAT,t:p.REPEAT};function S(e,o,s,t,i,m){const g=m.rendererTextureUsage,p=e=>R(t,s,e&g),h=o.metallicRoughness.baseColorFactor,f=a(o.metallicRoughness.baseColorFactor[3],0,1);e.baseColor=[h[0],h[1],h[2],f],e.hasParametersFromSource=!!o.hasParametersFromSource,e.usePBR=m.usePBR,e.mrrFactors=[o.metallicRoughness.metallicFactor,o.metallicRoughness.roughnessFactor,o.hasParametersFromSource?.2:.5],e.emissiveFactor=o.emissiveFactor,e.isIntegratedMesh=m.isIntegratedMesh,e.textureAlphaCutoff=\"mask\"===o.alphaMode?o.alphaCutoff:u,e.alphaDiscardMode=\"opaque\"===o.alphaMode?d.Opaque:\"mask\"===o.alphaMode?d.Mask:d.MaskBlend;const T=[],x=p(n.Color|n.AlphaMask);r(x)&&(e.baseColorTexture=new l(i,x),T.push(e.baseColorTexture.loadPromise));const b=p(n.MetallicRoughness);r(b)&&(e.metallicRoughnessTexture=new l(i,b),T.push(e.metallicRoughnessTexture.loadPromise));const F=p(n.Emissive);r(F)&&(e.emissionTexture=new l(i,F),T.push(e.emissionTexture.loadPromise));const C=p(n.Occlusion);r(C)&&(e.occlusionTexture=new l(i,C),T.push(e.occlusionTexture.loadPromise));const P=p(n.Normal);return r(P)&&(e.normalTexture=new l(i,P),T.push(e.normalTexture.loadPromise)),e.commonMaterialParameters.hasSlicePlane=m.slicePlaneEnabled,e.commonMaterialParameters.doubleSided=o.doubleSided,e.commonMaterialParameters.cullFace=o.cullFace,e.ellipsoidMode=c(m.viewSpatialReference),Promise.all(T)}function D(a){const o=!!a.compressedTextureS3TC,r=!!a.compressedTextureETC,s=e(\"disable-feature:i3s-basis\")?0:t.Basis|t.KTX2,n=t.JPG|t.PNG,l=s|t.DDS_S3TC;return n|(o?l:0)|(r?s:0)}function w(e,a){return e.find((e=>0!=(e.encoding&a)))}function R(e,a,o){if(s(e)||o===n.None)return null;for(let s=0;s<e.length;s++){const t=e[s];if(r(t)&&0!=(t.usage&o)){const e=a[s];return r(e)?e.id:null}}return null}function E(e){switch(e){case t.KTX2:return g.KTX2_ENCODING;case t.Basis:return g.BASIS_ENCODING;case t.DDS_S3TC:return g.DDS_ENCODING;case t.PNG:return\"image/png\";case t.JPG:return\"image/jpeg\";case t.KTX_ETC2:return\"image/ktx\";default:return\"\"}}export{S as configureMaterial,C as createTexture,F as defaultMaterial,h as getMaterialAndTextures,b as getMaterialAndTexturesFromShared,D as getSupportedEncodings,w as selectEncoding};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{result as e,assertResult as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/has.js\";import{clone as i}from\"../../../../core/lang.js\";import{isNone as o,isSome as n}from\"../../../../core/maybe.js\";import{eachAlways as s,isAbortError as a}from\"../../../../core/promiseUtils.js\";import{makeAbsolute as u}from\"../../../../core/urlUtils.js\";import{TextureEncoding as l}from\"./enums.js\";import{readBinaryAttribute as f,createGeometryDescriptor as d}from\"./I3SBinaryReader.js\";import{getMaterialAndTextures as c,getMaterialAndTexturesFromShared as m,selectEncoding as h}from\"./I3SMaterialUtil.js\";class g{constructor(e,t,r,i,o,n){if(this.streamDataController=t,this.logger=r,this.defaultGeometrySchema=i,this.requiredAttributes=o,this.options=n,this.logLayer=e,this.layerUrl=e.parsedUrl.path,this.geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this.materialAndTextures=e.materialDefinitions.map((e=>c(t,e)))}}_load(e,t,r){return this.streamDataController.request(e,t,r)}_loadAttribute(e,t,r){const i=`${this.layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this._load(i,\"binary\",r).then((e=>f(t,e)))}loadAttributes(e,t,r){return s(t.map((t=>this._loadAttribute(e,t.attributeStorageInfo,r)))).then((r=>{const i={};for(let o=0;o<t.length;++o)if(r[o].value)i[t[o].name]=r[o].value;else{if(a(r[o].error))throw r[o].error;this.logger.error(\"#loadAttributes\",this.logLayer,`Failed to load attributeData for '${t[o].name}' on node '${e.id}'`,r[o].error)}return i}))}async loadNodeData(r,i){const s=null!=this.requiredAttributes&&r.resources.attributes?e(this.loadAttributes(r,this.requiredAttributes,i)):null,{bufferDefinition:a,bufferIndex:u}=x(this.geometryDefinitions,r),l=!!r.resources.geometry,f=l?e(this._loadGeometry(r.resources.geometry,u,i)):null,c=r.resources.hasSharedResource?await this._loadShared(r,i):null,h=this.materialAndTextures&&r.resources.materialDefinition>=0?this.materialAndTextures[r.resources.materialDefinition]:null!=c?m(c):null,g=h&&h.material,A=h&&h.textures,_=`${r.id}`,w=!l&&this.options.loadFeatureData,T=w?await this._loadFeatureData(_,i):null,$=w?b(T):y(g),j=o($)&&D(T),I=null!=A&&A.length>0?e(this.loadTextures(r,A,i)):null;let U=null,S=null;if(f){U=t(await f);const e=p(this.defaultGeometrySchema,c);S=d(a,e)}const q=I?t(await I):null,v=s?t(await s):{},B=v?{attributeData:v,loadedAttributes:this.requiredAttributes}:null;if(n($))return{geometryData:$,attributeDataInfo:B,geometryBuffer:U,geometryDescriptor:S,requiredTextures:A,textureData:q};if(n(j))return{pointData:j,attributeDataInfo:B,geometryBuffer:U,geometryDescriptor:S,requiredTextures:A,textureData:q};throw new Error}static _addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>u(e,t))):e.hrefConcat=u(e.href,t)}static _fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];\"data:\"===r.substring(0,5)&&(e.encoding[t]=r.substring(5))}else{const t=e.encoding;\"data:\"===t.substring(0,5)&&(e.encoding=t.substring(5))}}}_loadShared(e,t){const r=`${this.layerUrl}/nodes/${e.resources.geometry}/shared`;return this._load(r,\"json\",t).then((e=>(g._fixTextureEncodings(e),g._addAbsoluteHrefTexture(e,r),e)))}_loadTexture(e,t,r,i,o,n){let s=!1;return o===l.DDS_S3TC||o===l.KTX2||o===l.Basis?this._load(e,\"binary\",n).then((e=>({id:t,usage:r,data:e,encoding:o,downsampled:s}))):this._load(e,\"image\",n).then((e=>{let n=e;const a=4096,u=2;if(i&&e.width*e.height>=a){const t=Math.ceil(e.width/u),r=Math.ceil(e.height/u),i=document.createElement(\"canvas\");i.width=t,i.height=r;i.getContext(\"2d\").drawImage(e,0,0,t,r),n=i,s=!0}return{id:t,usage:r,data:n,encoding:o,downsampled:s}}))}loadTextures(e,t,r){const i=this.options.uncompressedTextureDownsamplingEnabled,o=this.options.textureUsageMask;return Promise.all(t.map((t=>{if(0==(t.usage&o))return null;const n=h(t.encodings,this.options.textureEncodings);if(null==n)return this.logger.error(\"#loadTextures\",this.logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const s=e.resources.texture||e.id,a=`${this.layerUrl}/nodes/${s}/textures/${n.name}`;return this._loadTexture(a,t.id,t.usage,i,n.encoding,r)})))}_loadFeatureData(e,t){const r=`${this.layerUrl}/nodes/${e}/features/0`;return this._load(r,\"json\",t)}_loadGeometry(e,t,r){const i=`${this.layerUrl}/nodes/${e}/geometries/${t}`;return this._load(i,\"binary\",r)}}function y(e){return{featureIds:[],geometries:[{type:\"ArrayBufferView\",params:{material:e}}],featureDataPosition:[0,0,0]}}function b(e){for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function D(e){const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:null});return t}function p(e,t){if(!e||!t||!t.materialDefinitions)return e;const r=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[r].params.vertexRegions&&e.vertexAttributes.region&&delete(e=i(e)).vertexAttributes.region,e}function x(e,t){const i={bufferDefinition:null,bufferIndex:0};if(null==e||t.resources.geometryDefinition<0)return i;const o=t.resources.geometryDefinition>=0?e[t.resources.geometryDefinition].geometryBuffers:null;if(null==o)return i;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)i.bufferIndex=n,i.bufferDefinition=o[n];else if(\"draco\"===e.compressedAttributes.encoding&&!r(\"disable-feature:i3s-draco\"))return i.bufferIndex=n,i.bufferDefinition=e,i}return i}export{g as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{onAbortOrThrow as e,always as t}from\"../../../../core/promiseUtils.js\";class r{constructor(e,t){this.requester=e,this.apiKey=t,this.activeRequests=new Set}get busy(){return this.requester.busy}request(r,s,o){const l=new AbortController,a=e(o,(()=>l.abort())),n={signal:l.signal,query:{token:this.apiKey}},i=this.requester.request(r,s,n),u={response:i,abortController:l,abortHandle:a};return this.activeRequests.add(u),t(i,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this.activeRequests.delete(u)})),i}cancelAll(){this.activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this.activeRequests.clear()}}export{r as I3SStreamDataController};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../core/maybe.js\";import{d as i,i as s,l as r,g as n,e as o,p as a,b as h,a as c}from\"../../../../chunks/vec3.js\";import{c as m}from\"../../../../chunks/vec3f64.js\";import{c as p}from\"../../../../chunks/vec4.js\";import{projectBoundingSphere as l}from\"../../../../geometry/projection.js\";import{getReferenceEllipsoid as _,getSphericalPCPF as u}from\"../../../../geometry/projectionEllipsoid.js\";import{create as d,fromMatrix as g,intersectsSphere as b}from\"../../../../geometry/support/frustum.js\";import{isPlateCarree as v}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{w as x}from\"../../../../chunks/sphere.js\";import{makeDehydratedPoint as f}from\"../../../../layers/graphics/dehydratedFeatures.js\";import{evaluateElevationAlignmentAtPoint as M}from\"../graphics/elevationAlignmentUtils.js\";import{ElevationContext as R}from\"../graphics/ElevationContext.js\";import{createContextWithoutExpressionSupport as D,extractExpressionInfo as S}from\"../graphics/featureExpressionInfoUtils.js\";import{LodMetric as C}from\"./I3SNode.js\";import{isValidMbs as E,isValidObb as P,transformObb as O,computeOffsetObb as L,intersectBoundingRectWithMbs as j,MbsIntersectResult as F}from\"./I3SUtil.js\";import{create as B,isVisible as y}from\"../../support/orientedBoundingBox.js\";const I=1e5;class A{constructor(e,t,i,s,r,n,o,a,h={}){this._indexSR=e,this._renderCoordsHelper=t,this.clippingArea=r,this._elevationProvider=n,this._viewingMode=o,this._options=h,this._frustum=d(),this._useFrustumCulling=!1,this._poi=m(),this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmpObb=B(),this._tmp1=m(),this._tmp2=m(),this._tmp3=m(),this._tmp0=m(),this._screenspaceErrorBias=h.screenspaceErrorBias||1,this._progressiveLoadFactor=h.progressiveLoadFactor||1,this.updateCamera(i,s),this.engineSR=this._renderCoordsHelper.spatialReference,this.updateElevationInfo(a),this._tmpPoint=f(0,0,0,e),this._isECEFOBBInLocalMode=this._indexSR.isWGS84&&(this.engineSR.isWebMercator||v(this.engineSR)),this._indexSREllipsoidRadius=_(this._indexSR).radius}updateElevationInfo(e){null!=e?(this._elevationContext=R.fromElevationInfo(e),this._elevationContext.updateFeatureExpressionInfoContext(D(S(e,!1)))):this._elevationContext=null}updateCamera(e,t){this._useFrustumCulling=t,t&&g(e.viewMatrix,e.projectionMatrix,this._frustum),this._screenSizeFactor=1/(e.perScreenPixelRatio/2),this._camPos=e.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(e){this._poi=e}updateScreenSpaceErrorBias(e){const t=this._screenspaceErrorBias;return this._screenspaceErrorBias=e,t}updateClippingArea(e){this.clippingArea=e}getElevationRange(i){if(e(this._elevationContext))return null;const s=i.mbs[0],r=i.mbs[1],n=i.mbs[2],o=i.mbs[3],a=\"relative-to-scene\"===this._elevationContext.mode?\"scene\":\"ground\";if(this._elevationProvider.getSphereElevationBounds)return this._elevationProvider.getSphereElevationBounds(s,r,n,o,this._indexSR,a);const h=this._elevationProvider.getElevation(s,r,n,this._indexSR,a);return t(h)?{min:h,max:h}:null}getRenderMbs(e){const t=e.renderMbs;return E(t)||(p(t,e.mbs),this._elevationContext&&t[3]<I&&(this._tmpPoint.x=t[0],this._tmpPoint.y=t[1],this._tmpPoint.z=t[2],t[2]=M(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper)),l(t,this._indexSR,t,this.engineSR)),t}getVisibilityObb(i){if(t(i.visibilityObb))return i.visibilityObb;const s=i.serviceObb,r=.01*this._indexSREllipsoidRadius;return e(s)||!P(s)||this._isECEFOBBInLocalMode&&s.halfSize.some((e=>e>r))?null:(i.serviceObbInRenderSR=this._computeRenderObb(s,i.serviceObbInRenderSR,i.mbs[3],i.elevationRange),i.serviceObbInRenderSR)}_computeRenderObb(i,s,r,n){if(e(s))s=B();else if(P(s))return s;let o=0,a=0;if(this._elevationContext&&t(n)&&Number.isFinite(n.min))switch(this._elevationContext.mode){case\"relative-to-ground\":o=this._elevationContext.geometryZWithOffset(i.center[2],this._renderCoordsHelper)+n.min-i.center[2],a=n.max-n.min;break;case\"on-the-ground\":o=n.min-i.center[2],a=n.max-n.min}else this._elevationContext&&r<I&&(this._tmpPoint.x=i.center[0],this._tmpPoint.y=i.center[1],this._tmpPoint.z=i.center[2],o=M(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper)-i.center[2]);return a>0?(O(i,this._indexSR,this._tmpObb,this.engineSR,o),L(this._tmpObb,0,a,this._viewingMode,s)):O(i,this._indexSR,s,this.engineSR,o),s}isNodeVisible(e){const i=this.getRenderMbs(e);if(!this._isMBSinClippingArea(i))return!1;if(!this._useFrustumCulling)return!0;const s=this.getVisibilityObb(e);return t(s)?y(s,this._frustum):b(this._frustum,x(i))}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const i=e.geometryObb;return t(i)?y(i,this._frustum):this.isNodeVisible(e)}_isMBSinClippingArea(t){return!!e(this.clippingArea)||j(this.clippingArea,t)!==F.OUTSIDE}_screenSpaceDiameterMbs(e,t){const s=this.getRenderMbs(e),r=Math.sqrt(i(s,this._camPos)),n=r-s[3];return this._updateMinMaxDistance(r),n<0?.5*Number.MAX_VALUE:t/n*this._screenSizeFactor}calcCameraDistance(e){return this.calcCameraDistanceToCenter(e)-this.getRenderMbs(e)[3]}calcCameraDistanceToCenter(e){const t=this.getRenderMbs(e),i=s(t,this._camPos);return this._updateMinMaxDistance(i),i}calcAngleDependentLoD(e){const t=this.getRenderMbs(e),i=t[3],n=(Math.abs(t[0]*(t[0]-this._camPos[0])+t[1]*(t[1]-this._camPos[1])+t[2]*(t[2]-this._camPos[2]))/r(t)+i)/s(t,this._camPos);return Math.min(1,n)}hasLOD(e){return e.lodMetric!==C.None}_getDistancePlanarMode(e,t){const i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],n=i*i+s*s,o=t[3];if(n<=o*o)return Math.abs(r);const a=Math.sqrt(n)-o;return Math.sqrt(r*r+a*a)}_getDistanceGlobeMode(e,t){const m=r(t),p=r(e)-m;n(this._tmp0,e,o(e,t)/a(e));const l=i(t,this._tmp0),_=t[3];if(l<=_*_)return Math.abs(p);{const i=n(this._tmp0,t,1/m),a=m,l=_*_/2/a,u=n(this._tmp1,i,a-l),d=e,g=h(this._tmp2,d,u),b=h(this._tmp2,g,n(this._tmp3,i,o(i,g))),v=c(this._tmp2,u,n(this._tmp2,b,_/r(b)));let x=s(d,v);if(p>=2e5){const e=h(this._tmp1,d,v);let t=o(e,i)/r(e);t<.08&&(t=1e-4),x/=t}return x}}_getDistance(e,t){return this.engineSR===u(this.engineSR)?this._getDistanceGlobeMode(e,t):this._getDistancePlanarMode(e,t)}_updateMinMaxDistance(e){e>0?(this.minDistance=Math.min(this.minDistance,e),this.maxDistance=Math.max(this.maxDistance,e)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-e))}getLodLevel(e){if(e.lodMetric===C.None)return 0;if(0===e.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this._progressiveLoadFactor<1){const t=this._progressiveLoadFactor*this._screenspaceErrorBias,i=this._screenspaceErrorBias;return this.evaluateLODmetric(e,t)?this.evaluateLODmetric(e,i)?2:1:0}return this.evaluateLODmetric(e,this._screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(e,t){switch(e.lodMetric){case C.ScreenSpaceRelative:{const i=this.getRenderMbs(e),s=this._getDistance(this._camPos,i),r=2*s/this._screenSizeFactor,n=s+i[3];return this._updateMinMaxDistance(n),e.maxError*t<=r}case C.MaxScreenThreshold:{let i=this._screenSpaceDiameterMbs(e,e.mbs[3]*t);return this._options.angleDependentLoD&&(i*=this.calcAngleDependentLoD(e)),i<e.maxError}case C.RemovedFeatureDiameter:return this._screenSpaceDiameterMbs(e,e.maxError)*t<10;case C.DistanceRangeFromDefaultCamera:return this.calcCameraDistance(e)>e.maxError*t}return!1}distToPOI(e){const t=this.getRenderMbs(e);return s(t,this._poi)-t[3]}distCameraToPOI(){return s(this._camPos,this._poi)}}export{A as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import i from\"../../../core/Handles.js\";import s from\"../../../core/has.js\";import r from\"../../../core/Logger.js\";import{isNone as a,isSome as d}from\"../../../core/maybe.js\";import o from\"../../../core/PooledArray.js\";import{EsriPromiseMixin as n}from\"../../../core/Promise.js\";import{isAbortError as h}from\"../../../core/promiseUtils.js\";import{watch as l,initial as u,sync as _}from\"../../../core/reactiveUtils.js\";import{property as c}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as p}from\"../../../core/accessorSupport/decorators/subclass.js\";import{projectBoundingRect as g}from\"../../../geometry/projection.js\";import{create as m,intersectsSphere as y}from\"../../../geometry/support/aaBoundingRect.js\";import{makeDehydratedPoint as x}from\"../dehydratedFeatures.js\";import{PromiseQueue as f}from\"../../support/PromiseQueue.js\";import{viewingModeFromString as b}from\"../../../views/ViewingMode.js\";import{addTask as N}from\"../../../views/3d/layers/i3s/I3SFrameTask.js\";import{I3SIndex as v}from\"../../../views/3d/layers/i3s/I3SIndex.js\";import w from\"../../../views/3d/layers/i3s/I3SLodHandling.js\";import{NodeState as C,CacheState as D}from\"../../../views/3d/layers/i3s/I3SNode.js\";import L from\"../../../views/3d/layers/i3s/I3SNodeLoader.js\";import{I3SStreamDataController as S}from\"../../../views/3d/layers/i3s/I3SStreamDataController.js\";import{getVertexCrs as I,getIndexCrs as V,findIntersectingNodes as A}from\"../../../views/3d/layers/i3s/I3SUtil.js\";import F from\"../../../views/3d/layers/i3s/I3SViewportQueries.js\";import{FadeDirection as O}from\"../../../views/3d/layers/support/I3SLayerView.js\";import{toBoundingRect as P}from\"../../../views/3d/support/extentUtils.js\";import{ClientType as U,maxDownloadSlots as M}from\"../../../views/3d/support/index.js\";import{extractSafeScaleBounds as q,scaleBoundsPredicate as G}from\"../../../views/support/layerViewUtils.js\";import{noBudget as j}from\"../../../views/support/Scheduler.js\";const Q=r.getLogger(\"esri.layers.graphics.controllers.I3SOnDemandController\"),T=100,E=2,H=1e4,B=1e-4,k=1.2,R=500,z=1.5;let K=class extends(n(t)){constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._newLoadingNodes=new o({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new o,this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._handles=new i,this._idleQueue=new f,this._elevationUpdateNodes=new o({deallocator:null}),this._errorCount=0}get isMeshPyramid(){return\"mesh-pyramids\"===this.layer.profile||\"MeshPyramid\"===this.layer.store.lodType}get isGraphics3D(){return\"points\"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(a(this.layer.priority)||\"High\"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(U.I3S_INDEX);return new S(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(U.I3S_DATA);return new S(e,this.layer.apiKey)}get crsVertex(){return I(this.layer)}get crsIndex(){return V(this.layer)}get layer(){return this.layerView.i3slayer}get rootNodeVisible(){if(d(this._index)){const e=this._index.rootNode;if(d(e))return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new w(e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=s(\"disable-feature:idb-cache\"),\"fields\"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([i])=>{if(this.destroyed||!e||e.destroyed)return;const{view:s}=e,{resourceController:r}=s;this._setClippingArea(s.clippingArea),this.own([l((()=>s?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),u),l((()=>r.memoryController.memoryFactor),(()=>this._setCameraDirty()),_),l((()=>e.suspended),(e=>{const t=e?()=>this._updateViewData():()=>this._updateIdleState(!0),i=e?()=>{}:()=>this._updateIdleState(!1);this._idleStateCallbacks?(e&&this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=r.scheduler.registerIdleStateCallbacks(t,i)}),u),N(e.view.resourceController.scheduler,{update:(e,t)=>this._frame(e,t),needsUpdate:()=>this.updating}),l((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),l((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),l((()=>s.state?.contentCamera),(()=>this._setCameraDirty())),l((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),l((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),l((()=>e.lodFactor),(()=>this._setCameraDirty())),l((()=>e.availableFields),(()=>this._requiredFieldsChange())),l((()=>e.holeFilling),(e=>d(this._index)&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new F(this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?s.basemapTerrain:s.elevationProvider,b(s.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this.lod,angleDependentLoD:this.lod<.5}),this._index=new v(t,i,this.indexStreamController,this._viewportQueries,Q,e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,C.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?e.computeVisibilityObb(t):null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid),this._index.imModificationsChanged(!!e.hasModifications),this._startNodeLoading()}))),this._tmpPoint=x(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;d(t)&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);d(i)&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._handles.destroy(),this._nodeLoader=null,X.prune(),d($)&&($.hide(),$=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=W(e,i),r=W(t,i);return s>=0&&r>=0?{index:s,name:t[r].name,field:t[r],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();J(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=m();P(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){d(this._viewportQueries)&&(this._viewportQueries.setPointOfInterest(e),d(this._index)&&(this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),d(this._viewportQueries)&&d(this._index)&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateElevationChanged(e,t){const i=this._index;if(a(i)||a(i.rootNode))return null;const s=this._elevationUpdateNodes;return s.clear(),A(e,t,i.rootNode,this.crsIndex,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}getParentIndex(e){return d(this._index)&&this._index.getParentIndex(e)}removeAllGeometryObbs(){d(this._index)&&this._index.removeAllGeometryObbs()}_elevationInfoChanged(e){a(this._index)||(this._index.updateElevationInfo(e,this.isMeshPyramid),this._setCameraDirty())}_updateScaleHandles(){const e=\"scale-bounds\";this._handles.remove(e),this.areScaleBoundsActive&&this._handles.add(this.layerView.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this.areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(a(i))return;const s=i.rootNode;!a(s)&&g(e,t,Z,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);d(s)&&y(Z,s.mbs)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get isIntegratedMesh(){return\"integrated-mesh\"===this.layer.type}get areScaleBoundsActive(){const{minScale:e,maxScale:t}=q(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return a(this._index)||this.layerView.suspended?0:this._index.getUnloadedMemoryEstimate()*this.lodDropFactor}get indexDepth(){return d(this._index)?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}_frame(e,t){return this.layerView.suspended?(this._updateViewData(),this._evaluateUpdating(),-1/0):!this.layerView.visible||a(this._index)?-1/0:(this._processLogError(e,t),this._index.getPriority())}_processLogError(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?Q.error(\"Error during processing: \"+i):50===this._errorCount&&Q.error(\"Too many errors for this layer. Further errors will not be displayed.\"),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null==this._nodeLoader||a(this._index)||(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this.isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this.isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.getIndexLoading(),t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(a(this._index))return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading()||t===this._get(\"leavesReached\")||this._set(\"leavesReached\",t)}return this._index.load()}_prefetchIndex(){return!(a(this._index)||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||a(this._index)||a(this._viewportQueries))return;const e=!this._index.isLoading(),t=this.featureTarget*this.baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.getIndexMissing()>R){if(this._featureLOD<=B)return;this._featureLOD/=z,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=H||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this.lod,r=this._index.checkFeatureTarget(t,s);r!==s&&(this._featureLOD=r/this.baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*k||e&&i.estimate>t))return;if(this._featureLOD<=B)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(H,Math.max(B,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(a(t))return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);d(s)&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,C.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(a(this._index))return!1;let i=(this._isIdle?T:E)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());d(t)&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const r=this._index.getNode(s.add.back());if(a(r)||r.cacheState!==D.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(r),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=E)&&(this._downloadingCount<M&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView.suspended)e=this._cameraDirty,t=e?0:1;else{const i=(d(this._index)?this._index.getIndexMissing():0)+3*(d(this._index)?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}this.updating=e,this.updatingProgress=t}_updateViewData(){if(!this._cameraDirty||a(this._index)||a(this._viewportQueries))return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this.lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=Y.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange(\"rootNodeVisible\")}_getProgressiveLoadFactor(){return this.layerView.view.resourceController.memoryController.memoryFactor<1?1:this.layerView.progressiveLoadFactor}get lod(){return this._featureLOD*this.baseLOD}get baseLOD(){const e=this.layerView.lodFactor,t=this.layerView.view.resourceController.memoryController.memoryFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*t}get lodDropFactor(){if(this.fixedFeatureTarget)return 1;const e=this.layerView.view.resourceController.memoryController;return(Math.min(e.memoryFactor,.5)-e.minQuality)/(.5-e.minQuality)}isGeometryVisible(e){return d(this._index)&&this._index.isGeometryVisible(e.index)}updateVisibility(e){d(this._index)&&this._index.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){d(this._index)&&this._index.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){d(this._index)&&this._index.invalidateVisibilityObbs()}modificationsChanged(){d(this._index)&&this._index.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(a(this._index)||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(a(this._viewportQueries))return!1;const t=this.lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||a(e)||a(this._viewportQueries))return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new L(this.layer,this.dataStreamController,Q,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,ee.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(a(t)||a(this._viewportQueries))return!1;X.clear(),this.layerView.getLoadedNodeIndices(X);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return X.filterInPlace((e=>{const i=t.getNode(e);return a(i)||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),X.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(X,e,ee.pop),!(i&&this.lodDropFactor<1)&&(0===X.length||(X.clear(),!1))}markNodeToRemove(e){X.push(e)}removeMarkedNodes(){this._removeNodes(X,j,ee.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(d(this._index)&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),r=this._index;i===ee.fadeout&&this.layerView.nodeFadeoutEnabled&&d(r)&&r.isGeometryVisible(s)?this.layerView.fadeNode(s,O.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(!e.resources.hasFeatureData||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}_updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t);(J(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes)?Promise.resolve(this.layerView.getAttributeData(e.index)):this._nodeLoader.loadAttributes(e,this._requiredAttributes,t.signal)).then((i=>this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:i},t.signal)),t.signal))).catch((i=>{if(!h(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)})).catch((()=>{})).then((()=>{this._updatingNodes.delete(e.index),this._evaluateUpdating()})),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void Q.error(\"already loading node \"+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&d(this._index)&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!h(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===D.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=D.Uncached,!0))).catch((t=>!h(t)&&(e.cacheState=D.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||a(this._index))return!1;if(t===C.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e);return d(t)&&d(t.attributeInfo)&&J(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){d(this._index)&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;d(i)&&i.updateChildrenLoaded(e,t?1:-1)}_loadCached(e,t){if(this._enableFromGPUCache(e,C.Leaf))return Promise.resolve(!0);const i=this.layerView;return!this.disableIDBCache&&i.loadCachedNodeData&&i.addCachedNodeData?this.schedule((()=>i.loadCachedNodeData(e,t,((t,i)=>this._nodeLoader.loadTextures(e,t,i)))),t).then((s=>{if(a(s))return!1;const r=this._requiredAttributes;return this.reschedule((()=>this._nodeLoader.loadAttributes(e,r,t)),t).then((a=>this.reschedule((()=>i.addCachedNodeData(e,s,{loadedAttributes:r,attributeData:a},t)),t))).then((()=>(this._nodeAdded(),!0)))})):Promise.resolve(!1)}_loadUncached(e,t){return this._downloadingCount++,this._nodeLoader.loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=D.Cached})).catch((t=>{if(!h(t))throw Q.error(\"#loadNodeData()\",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,d(this._index)&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&d(this._index)&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=e.mbs[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this.areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=q(this.layer);return G(t,i,s)}updateStats(e){e.index=d(this._index)?this._index.size:0,this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this.baseLOD),d(this._index)&&this._index.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){d(e._index)&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),d(this._index)&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;d(t)&&t.layerFilterChanged(e),this.requestUpdate()}};e([c({readOnly:!0})],K.prototype,\"isMeshPyramid\",null),e([c({readOnly:!0})],K.prototype,\"isGraphics3D\",null),e([c({readOnly:!0})],K.prototype,\"useMaximumNumberOfFeatures\",null),e([c({readOnly:!0})],K.prototype,\"indexStreamController\",null),e([c({readOnly:!0})],K.prototype,\"dataStreamController\",null),e([c({readOnly:!0})],K.prototype,\"crsVertex\",null),e([c({readOnly:!0})],K.prototype,\"crsIndex\",null),e([c()],K.prototype,\"screenSizeFactor\",void 0),e([c()],K.prototype,\"featureTarget\",void 0),e([c()],K.prototype,\"fixedFeatureTarget\",void 0),e([c()],K.prototype,\"layerView\",void 0),e([c()],K.prototype,\"layer\",null),e([c({})],K.prototype,\"updating\",void 0),e([c({})],K.prototype,\"updatingProgress\",void 0),e([c({readOnly:!0})],K.prototype,\"leavesReached\",void 0),e([c({constructOnly:!0})],K.prototype,\"scaleVisibilityEnabled\",void 0),e([c({readOnly:!0,dependsOn:[]})],K.prototype,\"rootNodeVisible\",null),K=e([p(\"esri.layers.graphics.controllers.I3SOnDemandController\")],K);const X=new o({deallocator:null});let $;function J(e,t){return d(e)&&e.length===t.length&&e.every((e=>W(t,e.name)>=0))}function W(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const Y={factorIM:.2,factor3dObject:.05,distancePenalty:10},Z=m();var ee;!function(e){e[e.pop=0]=\"pop\",e[e.fadeout=1]=\"fadeout\"}(ee||(ee={}));const te=K;export{te as default};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Evented.js\";import{someMap as t}from\"../../../core/MapUtils.js\";class s extends e{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit(\"change\",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let r=0;r<e.length;r++){const s=e[r],o=s.objectId,n=this._map.get(o);n?(t.add(o),s!==n&&(e[r]=n),++n.refCount):(s.refCount=1,this._map.set(o,s))}const s=t.size>0?e.filter((e=>!t.has(e.objectId))):e;s.length>0&&this.emit(\"change\",{added:s,removed:[]})}removeMany(e){const t=[];for(const s of e){const e=s.objectId,r=this._map.get(e);null!=r&&--r.refCount<=0&&(this._map.delete(e),t.push(s))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const s of e){const e=this._map.get(s);null!=e&&--e.refCount<=0&&(this._map.delete(s),t.push(e))}t.length>0&&this.emit(\"change\",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){let s;return t(this._map,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._map.forEach((t=>e(t)))}}export{s as GraphicsMap};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{remove as t,splitIntoChunks as s}from\"../../../../core/arrayUtils.js\";import{resultOrAbort as i,result as r}from\"../../../../core/asyncUtils.js\";import{estimateStringByteSize as a,estimateNumberByteSize as n}from\"../../../../core/byteSizeEstimations.js\";import o from\"../../../../core/Logger.js\";import{isNone as c,unwrap as d,get as h,isSome as l}from\"../../../../core/maybe.js\";import{whenOrAbort as m}from\"../../../../core/promiseUtils.js\";import{formatNumber as u}from\"../../../../intl/number.js\";import{getMaximumQuerySize as g,queryAllJSON as b}from\"../../../../layers/support/featureQueryAll.js\";const p=o.getLogger(\"esri.views.3d.layers.i3s.I3SAttributeOverrides\");class f{constructor(e,t){this.layer=e,this.warnMaximumChangedObjectsExceeded=!1,this.changedObjectIds=new Set,this.pendingFetchAbortController=new AbortController,this.interactiveEditingSessions=null,this._maximumNumberOfEditOVerrides=j,this.memCache=t.newCache(`${e.uid}-attribute-overrides`),this.pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this.pendingFetchAbortController.signal),this.pendingFetchChangedObjectIds.then((()=>this.pendingFetchAbortController=null))}destroy(){this.layer=null,this.memCache.destroy(),this.memCache=null,this.pendingFetchAbortController&&(this.pendingFetchAbortController.abort(),this.pendingFetchAbortController=null),this.pendingFetchChangedObjectIds=null}createInteractiveEditSession(e){this.changedObjectIds.add(e),c(this.interactiveEditingSessions)&&(this.interactiveEditingSessions=[]);const s=this.interactiveEditingSessions,i=new y(e,{rollback:()=>{t(s,i),0===s.length&&(this.interactiveEditingSessions=null)},commit:t=>{for(const[s,i]of t)this.updateValue(e,s,i)}});return s.unshift(i),i}async apply(e,t,s){if(c(t))return;const{loadedAttributes:i,attributeData:r}=t;if(c(i)||0===i.length||c(r))return;if(await m(this.pendingFetchChangedObjectIds,s),0===this.changedObjectIds.size)return;const a={loadedAttributes:i,attributeData:r},n=this._getOverridesFromCache(e,a,this.changedObjectIds),{objectIds:o,fieldNames:d}=n,h=await this._queryOverridesFromAssociatedLayer(o,d,s);c(h)||this._processOverridesFromAssociatedLayer(e,h,d,a)}updateValue(e,t,s){this.changedObjectIds.add(e),this._cacheValue(e,t,s)}_cacheValue(e,t,s){this.memCache.put(this._getCacheKey(e,t),s,this._memCacheValueSize(s))}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:s},i){const r=new Set,a=new Array;for(const o of t)a[o.index]=s[o.name];const n=new Set;for(let o=0;o<e.length;o++){const s=e[o];if(i.has(s))for(const e of t){const t=this._fromCache(s,e.index);void 0===t?(r.add(s),n.add(e.name)):a[e.index][o]=t}}return{objectIds:Array.from(r),fieldNames:Array.from(n)}}_fromCache(e,t){const s=this._fromInteractiveEditingSession(e,t);if(void 0!==s)return s;const i=this._getCacheKey(e,t);return this.memCache.get(i)}_fromInteractiveEditingSession(e,t){if(!c(this.interactiveEditingSessions))for(const s of this.interactiveEditingSessions){if(s.objectId!==e)continue;const i=s.get(t);if(void 0!==i)return i}}_getCacheKey(e,t){return`${e}-${t}`}async _queryOverridesFromAssociatedLayer(e,t,r){if(0===e.length||0===t.length)return null;e=e.sort(((e,t)=>e-t)),this.warnMaximumChangedObjectsExceeded&&(this.warnMaximumChangedObjectsExceeded=!1,this._logMaximumObjectsExceededWarning());const a=d(this.layer.associatedLayer),n=a.createQuery();n.where=\"1=1\",n.returnGeometry=!1,n.outFields=[a.objectIdField,...t],n.cacheHint=!0,n.objectIds=e;const o=g(a),c=e.length>o?s(e,o).map((e=>{const t=n.clone();return t.objectIds=e,i(b(a,t,{signal:r}))})):[i(b(a,n,{signal:r}))];return(await Promise.all(c)).reduce(((e,t)=>e.concat(t.ok?t.value.features:[])),[])}_logMaximumObjectsExceededWarning(){let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${u(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,p.warn(\"#queryOverrides()\",this.layer.title,`${e}.`)}_processOverridesFromAssociatedLayer(e,t,s,{loadedAttributes:i,attributeData:r}){const a=d(this.layer.associatedLayer).objectIdField,n=s.map((e=>r[e])),o=new Map(i.map((e=>[e.name,e.index]))),c=s.map((e=>o.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const d of t){const e=d.attributes[a];for(let t=0;t<s.length;t++){const i=c[t],r=h.get(e),a=d.attributes[s[t]];n[t][r]=a,this._cacheValue(e,i,a)}}}_memCacheValueSize(e){return\"string\"==typeof e?a(e):n()}async _fetchChangedObjectIds(t){const s=this.layer;if(await s.load({signal:t}),this.changedObjectIds.clear(),c(s.associatedLayer)||!s.associatedLayer.capabilities?.operations?.supportsChangeTracking)return;const i=this._getFetchChangedObjectIdsServerGen();if(c(i))return null;const a=s.associatedLayer.layerId,n=await r(e(`${s.associatedLayer.url}/extractChanges`,{method:\"post\",query:{f:\"json\",returnIdsOnly:!0,layers:`${a}`,returnUpdates:!0,returnDeletes:!1,returnInserts:!1,layerServerGens:JSON.stringify([{id:a,serverGen:i}])},timeout:C,signal:t})),o=n.ok&&n.value.data?.edits?h(n.value.data.edits[0],\"objectIds\",\"updates\"):null;if(l(o)){const e=Math.min(this._maximumNumberOfEditOVerrides,o.length);e<o.length&&(this.warnMaximumChangedObjectsExceeded=!0);const t=o.sort(((e,t)=>e-t));for(let s=0;s<e;s++)this.changedObjectIds.add(t[s])}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(l(e.serviceUpdateTimeStamp)&&l(e.serviceUpdateTimeStamp.lastUpdate))return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return l(t)&&l(t.serverGens)&&l(t.serverGens.minServerGen)?t.serverGens.minServerGen:null}get test(){const e=Array.from(this.changedObjectIds),t=this.pendingFetchChangedObjectIds,s=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return s._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){s._maximumNumberOfEditOVerrides=e}}}}class y{constructor(e,t){this.objectId=e,this.options=t,this.updates=new Map,this.state=O.ACTIVE}get(e){return this.updates.get(e)}set(e,t){this.isActive&&this.updates.set(e,t)}rollback(){this.isActive&&(this.state=O.ROLLED_BACK,this.options.rollback())}commit(){this.isActive&&(this.state=O.COMMITTED,this.options.commit(this.updates),this.updates.clear())}get isActive(){return this.state===O.ACTIVE}}var O;!function(e){e[e.ACTIVE=0]=\"ACTIVE\",e[e.COMMITTED=1]=\"COMMITTED\",e[e.ROLLED_BACK=2]=\"ROLLED_BACK\"}(O||(O={}));const C=1e4,j=5e4;export{f as I3SAttributeOverrides};\n"],
  "mappings": "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",
  "names": ["r", "t", "e", "s", "n", "e", "t", "i", "s", "n", "p", "r", "o", "d", "l", "h", "u", "c", "g", "m", "a", "I", "N", "F", "f", "x", "L", "E", "P", "w", "C", "y", "O", "v", "a", "t", "e", "i", "o", "s", "r", "d", "l", "n", "a", "h", "u", "c", "x", "L", "N", "m", "y", "b", "f", "e", "s", "r", "t", "i", "h", "e", "a", "o", "t", "r", "l", "u", "c", "d", "g", "p", "s", "x", "b", "n", "F", "T", "L", "i", "C", "m", "P", "M", "E", "S", "R", "f", "D", "w", "g", "e", "t", "r", "i", "o", "n", "h", "s", "a", "u", "x", "l", "f", "c", "b", "A", "w", "T", "$", "y", "j", "D", "I", "U", "S", "p", "q", "v", "B", "m", "r", "e", "t", "s", "o", "l", "a", "d", "n", "i", "u", "I", "A", "e", "t", "i", "s", "r", "n", "o", "a", "h", "E", "v", "p", "m", "O", "P", "C", "l", "u", "d", "g", "b", "x", "Q", "T", "E", "H", "k", "R", "m", "y", "e", "u", "i", "A", "r", "t", "s", "n", "o", "p", "v", "g", "I", "a", "c", "d", "s", "n", "e", "t", "r", "o", "p", "f", "e", "t", "s", "i", "y", "r", "a", "n", "o", "d", "h", "c", "u", "m", "U", "C", "O"]
}
