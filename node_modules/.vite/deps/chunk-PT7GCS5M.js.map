{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js", "../../@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ShaderOutput as t}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{NoParameters as r}from\"../core/shaderModules/interfaces.js\";import{ReloadableShaderModule as i}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{CullFaceOptions as n,TransparencyPassType as a}from\"../lib/basicInterfaces.js\";import{Default3D as l}from\"../lib/DefaultVertexAttributeLocations.js\";import{oitBlending as p,oitDepthTest as c,oitDepthWrite as u,getOITPolygonOffset as h}from\"../lib/OrderIndependentTransparency.js\";import{Program as d}from\"../lib/Program.js\";import{stencilWriteMaskOn as m,stencilToolMaskBaseParams as f,stencilBaseAllZerosParams as y}from\"../lib/StencilUtils.js\";import{DefaultTechniqueConfiguration as g}from\"../materials/DefaultTechniqueConfiguration.js\";import{I as b}from\"../../../../chunks/ImageMaterial.glsl.js\";import{BlendFactor as O}from\"../../../webgl/enums.js\";import{simpleBlendingParams as T,makePipelineState as P,cullingParams as S,defaultDepthWriteParams as j,defaultColorWriteParams as v}from\"../../../webgl/renderState.js\";class N extends r{}class _ extends s{initializeProgram(e){const t=_.shader.get().build(this.configuration);return new d(e.rctx,t,l)}_setPipelineState(e,r){const i=this.configuration,s=e===a.NONE,o=e===a.FrontFace;return P({blending:i.output!==t.Color&&i.output!==t.Alpha||!i.transparent?null:s?C:p(e),culling:S(i.cullFace),depthTest:{func:c(e)},depthWrite:s?i.writeDepth&&j:u(e),colorWrite:v,stencilWrite:i.hasOccludees?m:null,stencilTest:i.hasOccludees?r?f:y:null,polygonOffset:s||o?null:h(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}_.shader=new i(b,(()=>import(\"./ImageMaterial.glsl.js\")));const C=T(O.ONE,O.ONE_MINUS_SRC_ALPHA);class w extends g{constructor(){super(...arguments),this.output=t.Color,this.cullFace=n.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=a.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}e([o({count:t.COUNT})],w.prototype,\"output\",void 0),e([o({count:n.COUNT})],w.prototype,\"cullFace\",void 0),e([o()],w.prototype,\"hasSlicePlane\",void 0),e([o()],w.prototype,\"transparent\",void 0),e([o()],w.prototype,\"enableOffset\",void 0),e([o()],w.prototype,\"writeDepth\",void 0),e([o()],w.prototype,\"hasOccludees\",void 0),e([o({count:a.COUNT})],w.prototype,\"transparencyPassType\",void 0),e([o()],w.prototype,\"hasMultipassTerrain\",void 0),e([o()],w.prototype,\"cullAboveGround\",void 0);export{N as ImageMaterialPassParameters,_ as ImageMaterialTechnique,w as ImageMaterialTechniqueConfiguration};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutputOptions.js\";import{CullFaceOptions as t}from\"../lib/basicInterfaces.js\";import{outputFromPass as r}from\"../lib/GLMaterials.js\";import{GLTextureMaterial as i}from\"../lib/GLTextureMaterial.js\";import{Material as s,MaterialParameters as a}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as n}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as u}from\"../lib/RenderSlot.js\";import{DefaultBufferWriter as h,PositionUVLayout as l}from\"./internal/DefaultBufferWriter.js\";import{intersectTriangleGeometry as o}from\"./internal/MaterialUtil.js\";import{ImageMaterialTechniqueConfiguration as c,ImageMaterialTechnique as p}from\"../shaders/ImageMaterialTechnique.js\";class m extends s{constructor(e){super(e,new f),this.supportsEdges=!0,this.techniqueConfig=new c}getConfiguration(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<n,this.techniqueConfig.hasMultipassTerrain=t.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=t.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(e,t,r,i,s,a,n){o(e,t,i,s,a,void 0,n)}requiresSlot(t,i){if(t===u.DRAPED_MATERIAL)return!0;if(r(i)===e.Highlight)return t===u.OPAQUE_MATERIAL;return t===(this.parameters.transparent?this.parameters.writeDepth?u.TRANSPARENT_MATERIAL:u.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:u.OPAQUE_MATERIAL)}createGLMaterial(t){return t.output===e.Color||t.output===e.Alpha||t.output===e.Highlight?new d(t):void 0}createBufferWriter(){return new h(l)}}class d extends i{constructor(e){super({...e,...e.material.parameters})}_updateParameters(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(p,e)}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:e.hasOccludees}),this._updateParameters(e))}beginSlot(t){return this._output!==e.Color&&this._output!==e.Alpha||this._updateOccludeeState(t),this._updateParameters(t)}}class f extends a{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=t.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0}}export{m as ImageMaterial,f as Parameters};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIixC,IAAMA,KAAN,cAAgBC,GAAC;AAAA,EAAC,kBAAkBA,IAAE;AAAC,UAAMC,KAAEF,GAAE,OAAO,IAAI,EAAE,MAAM,KAAK,aAAa;AAAE,WAAO,IAAIG,GAAEF,GAAE,MAAKC,IAAE,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkBD,IAAE,GAAE;AAAC,UAAMG,KAAE,KAAK,eAAcC,KAAEJ,OAAI,EAAE,MAAKE,KAAEF,OAAI,EAAE;AAAU,WAAO,EAAE,EAAC,UAASG,GAAE,WAAS,EAAE,SAAOA,GAAE,WAAS,EAAE,SAAO,CAACA,GAAE,cAAY,OAAKC,KAAE,IAAEC,GAAEL,EAAC,GAAE,SAAQM,GAAEH,GAAE,QAAQ,GAAE,WAAU,EAAC,MAAK,EAAEH,EAAC,EAAC,GAAE,YAAWI,KAAED,GAAE,cAAY,IAAE,EAAEH,EAAC,GAAE,YAAW,GAAE,cAAaG,GAAE,eAAaH,KAAE,MAAK,aAAYG,GAAE,eAAa,IAAED,KAAE,IAAE,MAAK,eAAcE,MAAGF,KAAE,OAAK,EAAEC,GAAE,YAAY,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,qBAAoB;AAAC,WAAO,KAAK,yBAAuB,KAAK,kBAAkB,KAAK,cAAc,sBAAqB,IAAE,GAAE,KAAK,kBAAkB,KAAK,cAAc,sBAAqB,KAAE;AAAA,EAAC;AAAA,EAAC,iBAAiBH,IAAEC,IAAE;AAAC,WAAOA,KAAE,KAAK,yBAAuB,MAAM,iBAAiBD,IAAEC,EAAC;AAAA,EAAC;AAAC;AAACF,GAAE,SAAO,IAAI,EAAE,GAAG,MAAI,OAAO,kCAAyB,CAAE;AAAE,IAAM,IAAE,EAAE,EAAE,KAAI,EAAE,mBAAmB;AAAE,IAAMQ,KAAN,cAAgBJ,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,SAAO,EAAE,OAAM,KAAK,WAAS,EAAE,MAAK,KAAK,gBAAc,OAAG,KAAK,cAAY,OAAG,KAAK,eAAa,MAAG,KAAK,aAAW,MAAG,KAAK,eAAa,OAAG,KAAK,uBAAqB,EAAE,MAAK,KAAK,sBAAoB,OAAG,KAAK,kBAAgB;AAAA,EAAE;AAAC;AAAC,EAAE,CAACH,GAAE,EAAC,OAAM,EAAE,MAAK,CAAC,CAAC,GAAEO,GAAE,WAAU,UAAS,MAAM,GAAE,EAAE,CAACP,GAAE,EAAC,OAAM,EAAE,MAAK,CAAC,CAAC,GAAEO,GAAE,WAAU,YAAW,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,iBAAgB,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,eAAc,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,cAAa,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,gBAAe,MAAM,GAAE,EAAE,CAACP,GAAE,EAAC,OAAM,EAAE,MAAK,CAAC,CAAC,GAAEO,GAAE,WAAU,wBAAuB,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,uBAAsB,MAAM,GAAE,EAAE,CAACP,GAAE,CAAC,GAAEO,GAAE,WAAU,mBAAkB,MAAM;;;ACAzoE,IAAM,IAAN,cAAgB,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,IAAE,IAAIC,IAAC,GAAE,KAAK,gBAAc,MAAG,KAAK,kBAAgB,IAAIC;AAAA,EAAC;AAAA,EAAC,iBAAiBF,IAAEG,IAAE;AAAC,WAAO,KAAK,gBAAgB,SAAOH,IAAE,KAAK,gBAAgB,WAAS,KAAK,WAAW,UAAS,KAAK,gBAAgB,gBAAc,KAAK,WAAW,eAAc,KAAK,gBAAgB,cAAY,KAAK,WAAW,aAAY,KAAK,gBAAgB,aAAW,KAAK,WAAW,YAAW,KAAK,gBAAgB,eAAa,KAAK,WAAW,cAAa,KAAK,gBAAgB,uBAAqBG,GAAE,sBAAqB,KAAK,gBAAgB,eAAaA,GAAE,OAAO,oBAAkB,GAAE,KAAK,gBAAgB,sBAAoBA,GAAE,iBAAiB,SAAQ,KAAK,gBAAgB,kBAAgBA,GAAE,iBAAiB,iBAAgB,KAAK;AAAA,EAAe;AAAA,EAAC,UAAUH,IAAEG,IAAE,GAAEC,IAAEC,IAAEC,IAAEC,IAAE;AAAC,MAAEP,IAAEG,IAAEC,IAAEC,IAAEC,IAAE,QAAOC,EAAC;AAAA,EAAC;AAAA,EAAC,aAAaJ,IAAEC,IAAE;AAAC,QAAGD,OAAIK,GAAE;AAAgB,aAAM;AAAG,QAAGJ,GAAEA,EAAC,MAAI,EAAE;AAAU,aAAOD,OAAIK,GAAE;AAAgB,WAAOL,QAAK,KAAK,WAAW,cAAY,KAAK,WAAW,aAAWK,GAAE,uBAAqBA,GAAE,4CAA0CA,GAAE;AAAA,EAAgB;AAAA,EAAC,iBAAiBL,IAAE;AAAC,WAAOA,GAAE,WAAS,EAAE,SAAOA,GAAE,WAAS,EAAE,SAAOA,GAAE,WAAS,EAAE,YAAU,IAAIM,GAAEN,EAAC,IAAE;AAAA,EAAM;AAAA,EAAC,qBAAoB;AAAC,WAAO,IAAIC,GAAEM,EAAC;AAAA,EAAC;AAAC;AAAC,IAAMD,KAAN,cAAgB,EAAC;AAAA,EAAC,YAAYT,IAAE;AAAC,UAAM,EAAC,GAAGA,IAAE,GAAGA,GAAE,SAAS,WAAU,CAAC;AAAA,EAAC;AAAA,EAAC,kBAAkBA,IAAE;AAAC,WAAO,KAAK,cAAc,KAAK,UAAU,WAAW,SAAS,GAAE,KAAK,UAAU,cAAc,KAAK,qBAAqB,GAAE,KAAK,gBAAgBW,IAAEX,EAAC;AAAA,EAAC;AAAA,EAAC,qBAAqBA,IAAE;AAAC,IAAAA,GAAE,iBAAe,KAAK,UAAU,WAAW,iBAAe,KAAK,UAAU,cAAc,EAAC,cAAaA,GAAE,aAAY,CAAC,GAAE,KAAK,kBAAkBA,EAAC;AAAA,EAAE;AAAA,EAAC,UAAUG,IAAE;AAAC,WAAO,KAAK,YAAU,EAAE,SAAO,KAAK,YAAU,EAAE,SAAO,KAAK,qBAAqBA,EAAC,GAAE,KAAK,kBAAkBA,EAAC;AAAA,EAAC;AAAC;AAAC,IAAMF,KAAN,cAAgBS,GAAC;AAAA,EAAC,cAAa;AAAC,UAAM,GAAG,SAAS,GAAE,KAAK,cAAY,OAAG,KAAK,aAAW,MAAG,KAAK,gBAAc,OAAG,KAAK,WAAS,EAAE,MAAK,KAAK,eAAa,OAAG,KAAK,UAAQ,GAAE,KAAK,YAAU,MAAK,KAAK,yBAAuB;AAAA,EAAE;AAAC;",
  "names": ["_", "e", "t", "o", "i", "s", "E", "h", "w", "e", "f", "w", "t", "i", "s", "a", "n", "E", "d", "o", "_"]
}
