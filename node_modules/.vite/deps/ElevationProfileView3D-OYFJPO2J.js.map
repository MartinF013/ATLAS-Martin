{
  "version": 3,
  "sources": ["../../@arcgis/core/widgets/ElevationProfile/support/InputRepresentation3D.js", "../../@arcgis/core/widgets/ElevationProfile/support/ProfileLines3D.js", "../../@arcgis/core/widgets/ElevationProfile/support/ElevationProfileView3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{destroyHandle as e,handlesGroup as i}from\"../../../core/handleUtils.js\";import{abortMaybe as t,removeMaybe as s,isNone as r,isSome as l}from\"../../../core/maybe.js\";import{createTask as a,throwIfAborted as h}from\"../../../core/promiseUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{getGraphicEffectiveElevationInfo as o}from\"../../../support/elevationInfoUtils.js\";import{settings as m}from\"../../../views/3d/interactive/editingTools/settings.js\";import{OutlineVisualElement as g}from\"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";import{GraphicState as p}from\"../../../views/3d/layers/graphics/GraphicState.js\";import{RenderOccludedFlag as c}from\"../../../views/3d/webgl-engine/lib/Material.js\";import{highlightsSupported as d}from\"../../../views/support/layerViewUtils.js\";class u{constructor(e){this._params=e,this._highlightTask=null,this._highlightHandle=null,this._visualElementHandle=null}destroy(){this.remove()}remove(){this._highlightTask=t(this._highlightTask),this._highlightHandle=s(this._highlightHandle),this._visualElementHandle=s(this._visualElementHandle)}showHighlight(e){if(this.remove(),r(e)||!v(e))return;const i=e.layer;this._highlightTask=a((async t=>{const s=await this._params.view.whenLayerView(i);h(t),d(s)&&(this._highlightHandle=s.highlight(e))}))}showReshaping(t){if(this.remove(),r(t))return;const s=this._params.view,l=new g({view:s,geometry:v(t)?t.geometry:null,attached:!1,elevationInfo:o(t),renderOccluded:c.OccludeAndTransparentStencil}),a=new p({graphic:t}),h=[n((()=>a.isDraped),(e=>{l.isDraped=e})),a.on(\"changed\",(()=>{l.geometry=v(t)?t.geometry:null})),s.trackGraphicState(a),s.maskOccludee(t),e(l)];m.visualElements.lineGraphics.outline.apply(l),l.attached=!0,this._visualElementHandle=i(h)}}function v(e){return l(e.geometry)&&\"polyline\"===e.geometry.type}export{u as InputRepresentation3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../Color.js\";import s from\"../../../core/Accessor.js\";import o from\"../../../core/Handles.js\";import{isNone as r,unwrapOr as i,isSome as a}from\"../../../core/maybe.js\";import{watch as l,syncAndInitial as n}from\"../../../core/reactiveUtils.js\";import{throttle as c}from\"../../../core/throttle.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import{b as p}from\"../../../chunks/vec4f64.js\";import f from\"../../../geometry/Polyline.js\";import{OutlineVisualElement as d}from\"../../../views/3d/interactive/visualElements/OutlineVisualElement.js\";import{PROFILE_LINES_STYLE_3D as u}from\"./constants.js\";const v=100;let y=class extends s{constructor(e){super(e),this._chartData=null,this._visualElements=[],this._handles=new o}initialize(){const e=c((e=>{this._update(e)}),v);this._handles.add([l((()=>({spatialReference:this.view.spatialReference,chartData:this._chartData})),e,n),e])}destroy(){this._handles.destroy(),this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(e){this._chartData=e}_update(e){const{chartData:s}=e;if(r(s))return this.remove();if(!s.refined)return;const o=this._visualElements,i=s.lines.filter((e=>e.viewVisualizationEnabled)),a=i.length;for(;o.length>a;)o.pop().destroy();const l=u;for(;o.length<a;){const e=new d({view:this.view,elevationInfo:{mode:\"absolute-height\",offset:0},innerWidth:l.width-l.outlineSize,width:l.width,falloff:l.falloff,color:l.outlineColor,renderOccluded:l.renderOccluded});o.push(e)}const n=e.spatialReference;for(let r=0;r<a;++r){const e=o[r],s=i[a-1-r];e.geometry=this._createLineGeometry(s,n),e.innerColor=p(t.toUnitRGBA(s.color))}}_createLineGeometry(e,t){const s=i(e.samples,[]),o=s.length-1,l=[];let n=[];for(let i=0;i<=o;i++){const{x:e,y:t,z:c}=s[i];a(c)&&n.push([e,t,c]),(i===o||r(c))&&n.length&&(l.push(n),n=[])}return new f({paths:l,hasZ:!0,spatialReference:t})}_destroyVisualElements(){this._visualElements.forEach((e=>e.destroy())),this._visualElements.length=0}};e([h()],y.prototype,\"view\",void 0),e([h()],y.prototype,\"_chartData\",void 0),y=e([m(\"esri.widgets.ElevationProfile.support.ProfileLines3D\")],y);export{y as ProfileLines3D};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Handles.js\";import{applySome as t,destroyMaybe as i}from\"../../../core/maybe.js\";import{watch as o,syncAndInitial as s}from\"../../../core/reactiveUtils.js\";import{ElevationProfileState as n}from\"./constants.js\";import{HoveredPoints as r}from\"./HoveredPoints.js\";import{InputRepresentation3D as h}from\"./InputRepresentation3D.js\";import{ProfileLines3D as p}from\"./ProfileLines3D.js\";class a{constructor(i,n){this._handles=new e,this._inputRepresentation=new h({view:i}),this._hoveredPoints=new r({view:i}),this._profileLines=new p({view:i}),this._handles.add([o((()=>n.viewModel.hoveredPoints),(e=>this._hoveredPoints.update(e)),s),o((()=>{const{state:e,editable:i,highlightEnabled:o,viewModel:s}=n,r=s.input;return t(r,(e=>{e.commitProperty(\"geometry\"),e.commitProperty(\"layer\")})),{input:r,state:e,editable:i,highlightEnabled:o}}),(e=>this._updateInputRepresentation(e)),s),o((()=>n.viewModel.chartData),(e=>this._profileLines.update(e)),s),o((()=>t(n.viewModel.input,(e=>e.geometry))),(()=>{this._profileLines.remove()}),s)])}destroy(){this._handles=i(this._handles),this._inputRepresentation=i(this._inputRepresentation),this._hoveredPoints=i(this._hoveredPoints),this._profileLines=i(this._profileLines)}_updateInputRepresentation({input:e,state:t,editable:i,highlightEnabled:o}){const s=this._inputRepresentation;if(!o)return s.remove();t===n.Selected?s.showHighlight(e):t!==n.Created||i?s.remove():s.showReshaping(e)}}export{a as ElevationProfileView3D};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAI8zB,IAAMA,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAE;AAAC,SAAK,UAAQA,IAAE,KAAK,iBAAe,MAAK,KAAK,mBAAiB,MAAK,KAAK,uBAAqB;AAAA,EAAI;AAAA,EAAC,UAAS;AAAC,SAAK,OAAO;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,SAAK,iBAAe,EAAE,KAAK,cAAc,GAAE,KAAK,mBAAiB,EAAE,KAAK,gBAAgB,GAAE,KAAK,uBAAqB,EAAE,KAAK,oBAAoB;AAAA,EAAC;AAAA,EAAC,cAAcA,IAAE;AAAC,QAAG,KAAK,OAAO,GAAE,EAAEA,EAAC,KAAG,CAACC,GAAED,EAAC;AAAE;AAAO,UAAME,KAAEF,GAAE;AAAM,SAAK,iBAAe,EAAG,OAAMG,OAAG;AAAC,YAAM,IAAE,MAAM,KAAK,QAAQ,KAAK,cAAcD,EAAC;AAAE,QAAEC,EAAC,GAAEH,GAAE,CAAC,MAAI,KAAK,mBAAiB,EAAE,UAAUA,EAAC;AAAA,IAAE,CAAE;AAAA,EAAC;AAAA,EAAC,cAAcG,IAAE;AAAC,QAAG,KAAK,OAAO,GAAE,EAAEA,EAAC;AAAE;AAAO,UAAM,IAAE,KAAK,QAAQ,MAAKC,KAAE,IAAI,EAAE,EAAC,MAAK,GAAE,UAASH,GAAEE,EAAC,IAAEA,GAAE,WAAS,MAAK,UAAS,OAAG,eAAcJ,GAAEI,EAAC,GAAE,gBAAeE,GAAE,6BAA4B,CAAC,GAAEC,KAAE,IAAIN,GAAE,EAAC,SAAQG,GAAC,CAAC,GAAEE,KAAE,CAACD,GAAG,MAAIE,GAAE,UAAW,CAAAN,OAAG;AAAC,MAAAI,GAAE,WAASJ;AAAA,IAAC,CAAE,GAAEM,GAAE,GAAG,WAAW,MAAI;AAAC,MAAAF,GAAE,WAASH,GAAEE,EAAC,IAAEA,GAAE,WAAS;AAAA,IAAI,CAAE,GAAE,EAAE,kBAAkBG,EAAC,GAAE,EAAE,aAAaH,EAAC,GAAEA,GAAEC,EAAC,CAAC;AAAE,IAAAG,GAAE,eAAe,aAAa,QAAQ,MAAMH,EAAC,GAAEA,GAAE,WAAS,MAAG,KAAK,uBAAqBI,GAAEH,EAAC;AAAA,EAAC;AAAC;AAAC,SAASJ,GAAED,IAAE;AAAC,SAAO,EAAEA,GAAE,QAAQ,KAAG,eAAaA,GAAE,SAAS;AAAI;;;ACA57B,IAAMS,KAAE;AAAI,IAAIC,KAAE,cAAc,EAAC;AAAA,EAAC,YAAYC,IAAE;AAAC,UAAMA,EAAC,GAAE,KAAK,aAAW,MAAK,KAAK,kBAAgB,CAAC,GAAE,KAAK,WAAS,IAAI;AAAA,EAAC;AAAA,EAAC,aAAY;AAAC,UAAMA,KAAEA,GAAG,CAAAA,OAAG;AAAC,WAAK,QAAQA,EAAC;AAAA,IAAC,GAAGF,EAAC;AAAE,SAAK,SAAS,IAAI,CAACG,GAAG,OAAK,EAAC,kBAAiB,KAAK,KAAK,kBAAiB,WAAU,KAAK,WAAU,IAAID,IAAE,CAAC,GAAEA,EAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,SAAS,QAAQ,GAAE,KAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,SAAQ;AAAC,SAAK,uBAAuB;AAAA,EAAC;AAAA,EAAC,OAAOA,IAAE;AAAC,SAAK,aAAWA;AAAA,EAAC;AAAA,EAAC,QAAQA,IAAE;AAAC,UAAK,EAAC,WAAU,EAAC,IAAEA;AAAE,QAAG,EAAE,CAAC;AAAE,aAAO,KAAK,OAAO;AAAE,QAAG,CAAC,EAAE;AAAQ;AAAO,UAAME,KAAE,KAAK,iBAAgBC,KAAE,EAAE,MAAM,OAAQ,CAAAH,OAAGA,GAAE,wBAAyB,GAAEI,KAAED,GAAE;AAAO,WAAKD,GAAE,SAAOE;AAAG,MAAAF,GAAE,IAAI,EAAE,QAAQ;AAAE,UAAMD,KAAE;AAAE,WAAKC,GAAE,SAAOE,MAAG;AAAC,YAAMJ,KAAE,IAAI,EAAE,EAAC,MAAK,KAAK,MAAK,eAAc,EAAC,MAAK,mBAAkB,QAAO,EAAC,GAAE,YAAWC,GAAE,QAAMA,GAAE,aAAY,OAAMA,GAAE,OAAM,SAAQA,GAAE,SAAQ,OAAMA,GAAE,cAAa,gBAAeA,GAAE,eAAc,CAAC;AAAE,MAAAC,GAAE,KAAKF,EAAC;AAAA,IAAC;AAAC,UAAMK,KAAEL,GAAE;AAAiB,aAAQM,KAAE,GAAEA,KAAEF,IAAE,EAAEE,IAAE;AAAC,YAAMN,KAAEE,GAAEI,EAAC,GAAEC,KAAEJ,GAAEC,KAAE,IAAEE,EAAC;AAAE,MAAAN,GAAE,WAAS,KAAK,oBAAoBO,IAAEF,EAAC,GAAEL,GAAE,aAAWA,GAAEC,GAAE,WAAWM,GAAE,KAAK,CAAC;AAAA,IAAC;AAAA,EAAC;AAAA,EAAC,oBAAoBP,IAAEQ,IAAE;AAAC,UAAM,IAAE,EAAER,GAAE,SAAQ,CAAC,CAAC,GAAEE,KAAE,EAAE,SAAO,GAAED,KAAE,CAAC;AAAE,QAAII,KAAE,CAAC;AAAE,aAAQF,KAAE,GAAEA,MAAGD,IAAEC,MAAI;AAAC,YAAK,EAAC,GAAEH,IAAE,GAAEQ,IAAE,GAAEC,GAAC,IAAE,EAAEN,EAAC;AAAE,QAAEM,EAAC,KAAGJ,GAAE,KAAK,CAACL,IAAEQ,IAAEC,EAAC,CAAC,IAAGN,OAAID,MAAG,EAAEO,EAAC,MAAIJ,GAAE,WAASJ,GAAE,KAAKI,EAAC,GAAEA,KAAE,CAAC;AAAA,IAAE;AAAC,WAAO,IAAI,EAAE,EAAC,OAAMJ,IAAE,MAAK,MAAG,kBAAiBO,GAAC,CAAC;AAAA,EAAC;AAAA,EAAC,yBAAwB;AAAC,SAAK,gBAAgB,QAAS,CAAAR,OAAGA,GAAE,QAAQ,CAAE,GAAE,KAAK,gBAAgB,SAAO;AAAA,EAAC;AAAC;AAAE,EAAE,CAAC,EAAE,CAAC,GAAED,GAAE,WAAU,QAAO,MAAM,GAAE,EAAE,CAAC,EAAE,CAAC,GAAEA,GAAE,WAAU,cAAa,MAAM,GAAEA,KAAE,EAAE,CAAC,EAAE,sDAAsD,CAAC,GAAEA,EAAC;;;ACA17D,IAAMW,KAAN,MAAO;AAAA,EAAC,YAAYC,IAAEC,IAAE;AAAC,SAAK,WAAS,IAAI,KAAE,KAAK,uBAAqB,IAAIC,GAAE,EAAC,MAAKF,GAAC,CAAC,GAAE,KAAK,iBAAe,IAAIG,GAAE,EAAC,MAAKH,GAAC,CAAC,GAAE,KAAK,gBAAc,IAAII,GAAE,EAAC,MAAKJ,GAAC,CAAC,GAAE,KAAK,SAAS,IAAI,CAACK,GAAG,MAAIJ,GAAE,UAAU,eAAgB,CAAAK,OAAG,KAAK,eAAe,OAAOA,EAAC,GAAG,CAAC,GAAED,GAAG,MAAI;AAAC,YAAK,EAAC,OAAMC,IAAE,UAASN,IAAE,kBAAiBO,IAAE,WAAU,EAAC,IAAEN,IAAEO,KAAE,EAAE;AAAM,aAAO,EAAEA,IAAG,CAAAF,OAAG;AAAC,QAAAA,GAAE,eAAe,UAAU,GAAEA,GAAE,eAAe,OAAO;AAAA,MAAC,CAAE,GAAE,EAAC,OAAME,IAAE,OAAMF,IAAE,UAASN,IAAE,kBAAiBO,GAAC;AAAA,IAAC,GAAI,CAAAD,OAAG,KAAK,2BAA2BA,EAAC,GAAG,CAAC,GAAED,GAAG,MAAIJ,GAAE,UAAU,WAAY,CAAAK,OAAG,KAAK,cAAc,OAAOA,EAAC,GAAG,CAAC,GAAED,GAAG,MAAI,EAAEJ,GAAE,UAAU,OAAO,CAAAK,OAAGA,GAAE,QAAS,GAAI,MAAI;AAAC,WAAK,cAAc,OAAO;AAAA,IAAC,GAAG,CAAC,CAAC,CAAC;AAAA,EAAC;AAAA,EAAC,UAAS;AAAC,SAAK,WAAS,EAAE,KAAK,QAAQ,GAAE,KAAK,uBAAqB,EAAE,KAAK,oBAAoB,GAAE,KAAK,iBAAe,EAAE,KAAK,cAAc,GAAE,KAAK,gBAAc,EAAE,KAAK,aAAa;AAAA,EAAC;AAAA,EAAC,2BAA2B,EAAC,OAAMA,IAAE,OAAMG,IAAE,UAAST,IAAE,kBAAiBO,GAAC,GAAE;AAAC,UAAM,IAAE,KAAK;AAAqB,QAAG,CAACA;AAAE,aAAO,EAAE,OAAO;AAAE,IAAAE,OAAI,EAAE,WAAS,EAAE,cAAcH,EAAC,IAAEG,OAAI,EAAE,WAAST,KAAE,EAAE,OAAO,IAAE,EAAE,cAAcM,EAAC;AAAA,EAAC;AAAC;",
  "names": ["u", "e", "v", "i", "t", "l", "h", "a", "y", "r", "v", "y", "e", "l", "o", "i", "a", "n", "r", "s", "t", "c", "a", "i", "n", "u", "h", "y", "l", "e", "o", "r", "t"]
}
