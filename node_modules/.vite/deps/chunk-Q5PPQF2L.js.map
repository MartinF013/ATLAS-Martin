{
  "version": 3,
  "sources": ["../../@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js", "../../@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js"],
  "sourcesContent": ["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Handles.js\";import{unwrap as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{watch as i}from\"../../../../core/reactiveUtils.js\";import{createScreenPointArray as o}from\"../../../../core/screenUtils.js\";import{i as a,g as c,f as n,a as h,b as l}from\"../../../../chunks/vec2.js\";import{k as d,c as m,n as u,b as _,a as p}from\"../../../../chunks/vec3.js\";import{c as f,f as g}from\"../../../../chunks/vec3f64.js\";import{g as b,c as j}from\"../../../../chunks/vec4.js\";import{f as y}from\"../../../../chunks/vec4f32.js\";import{Object3DVisualElement as w}from\"./Object3DVisualElement.js\";import x from\"../../webgl-engine/lib/GeometryUtil.js\";import{RenderOccludedFlag as G}from\"../../webgl-engine/lib/Material.js\";import{VertexAttribute as O}from\"../../webgl-engine/lib/VertexAttribute.js\";import{RibbonLineMaterial as R}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";class v extends w{constructor(t){super(t),this._handles=new e,this._location=f(),this._direction=g(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=y(1,0,1,1),this._renderOccluded=G.OccludeAndTransparent,this.applyProps(t)}get location(){return this._location}set location(e){d(this._location,e)||(m(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){d(this._direction,e)||(m(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){u(this._direction,_(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){b(e,this._color)||(j(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}createExternalResources(){const e=new R(this.materialParameters);this._handles.add(i((()=>this.view.state.camera),(()=>{this._updateGeometry()}))),this._externalResources={material:e}}destroyExternalResources(){this._handles.removeAll(),this._externalResources=null}createGeometries(e){const r=x.createPolylineGeometry([f(),f()]),s=x.createPolylineGeometry([f(),f()]),i=t(this._externalResources).material;e.addGeometry(r,i),e.addGeometry(s,i),this._updateVertices(e)}forEachExternalMaterial(e){r(this._externalResources)&&e(this._externalResources.material)}_updateMaterial(){if(s(this._externalResources))return;this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}_updateGeometry(){const e=this.object;s(e)||this._updateVertices(e)}_updateVertices(e){const t=this.view.state.camera;t.projectToScreen(this.location,V),p(P,this.location,this.direction),t.projectToScreen(P,A),a(A,c(A,A,V)),this._updateVertexAttributes(t,e,0,V,A,1),this._updateVertexAttributes(t,e,1,V,A,-1)}_updateVertexAttributes(e,t,r,s,i,o){const a=t.geometryRecords[r],c=a.geometry.getMutableAttribute(O.POSITION).data,d=n(M,h(M,i[1]*o,i[0]*-o),this.offset+this.width/2),m=l(k,l(k,l(k,s,n(k,i,this.length/2)),d),d),u=l(E,m,n(E,i,-this.length));e.unprojectFromScreen(m,P),c[0]=P[0],c[1]=P[1],c[2]=P[2],e.unprojectFromScreen(u,P),c[3]=P[0],c[4]=P[1],c[5]=P[2],t.geometryVertexAttrsUpdated(a)}}const P=f(),V=o(),A=o(),M=o(),k=o(),E=o();export{v as ParallelLineVisualElement};\n", "/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import\"../../../core/has.js\";import{destroyHandle as n}from\"../../../core/handleUtils.js\";import{unwrapOr as t}from\"../../../core/maybe.js\";import{h as i}from\"../../../chunks/vec3.js\";import{c as o}from\"../../../chunks/vec3f64.js\";import{ExtendedLineVisualElement as r,ExtensionType as a}from\"./visualElements/ExtendedLineVisualElement.js\";import{ParallelLineVisualElement as l}from\"./visualElements/ParallelLineVisualElement.js\";import{PointVisualElement as s}from\"./visualElements/PointVisualElement.js\";import{RightAngleQuadVisualElement as c}from\"./visualElements/RightAngleQuadVisualElement.js\";import{RenderOccludedFlag as d}from\"../webgl-engine/lib/Material.js\";import{defaults as p}from\"../../interactive/snapping/Settings.js\";import{LineSegmentHintType as m}from\"../../interactive/snapping/snappingUtils.js\";import{SnappingVisualizer as v}from\"../../interactive/snapping/SnappingVisualizer.js\";import{anyMapPointToRender as u,anyMapPointsToRenderWithEqualRelativeZ as f}from\"../../interactive/support/viewUtils.js\";class g extends v{visualizeIntersectionPoint(i,o){const{coordinateHelper:r,view:a}=o;return n(new s({view:a,primitive:\"circle\",geometry:r.vectorToPoint(i.intersectionPoint),elevationInfo:t(i.elevationInfo,o.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:e.toUnitRGBA(p.orange),pixelSnappingEnabled:!1}))}visualizePoint(i,o){const{coordinateHelper:r,view:a}=o;return n(new s({view:a,primitive:\"circle\",geometry:r.vectorToPoint(i.point),elevationInfo:t(i.elevationInfo,o.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:e.toUnitRGBA(p.orange),pixelSnappingEnabled:!1}))}visualizeLine(e,i){const{coordinateHelper:o,view:r}=i;return n(this._createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,o,t(e.elevationInfo,i.elevationInfo),r,e.fadeLeft,e.fadeRight))}visualizeParallelSign(o,r){const{coordinateHelper:a,view:s}=r,c=t(o.elevationInfo,r.elevationInfo),m=u(o.lineStart,a,c,r.view),v=u(o.lineEnd,a,c,r.view),f=i(v,m,v,.5),g=new l({view:s,attached:!1,offset:p.parallelLineHintOffset,length:p.parallelLineHintLength,width:p.parallelLineHintWidth,color:e.toUnitRGBA(p.orange),location:f,renderOccluded:d.Opaque});return g.setDirectionFromPoints(m,f),g.attached=!0,n(g)}visualizeRightAngleQuad(i,o){const{coordinateHelper:r,view:a}=o,l=t(i.elevationInfo,o.elevationInfo);return n(new c({view:a,attached:!0,color:e.toUnitRGBA(p.orange),renderOccluded:d.Transparent,outlineRenderOccluded:d.Opaque,outlineColor:e.toUnitRGBA(p.orange),outlineSize:p.rightAngleHintOutlineSize,size:p.rightAngleHintSize,geometry:{previous:u(i.previousVertex,r,l,a),center:u(i.centerVertex,r,l,a),next:u(i.nextVertex,r,l,a)}}))}_createLineSegmentHintFromMap(e,n,t,i,r,a,l=!0,s=!0){const c=o(),d=o();return f(n,t,i,r,a,c,d),this._createLineSegmentHint(e,a,c,d,l,s)}_createLineSegmentHint(n,t,i,o,l=!0,s=!0){const c=new r({view:t,extensionType:a.FADED,start:i,end:o,color:e.toUnitRGBA(p.orange),renderOccluded:d.Opaque});switch(n){case m.TARGET:c.width=p.lineHintWidthTarget,c.fadedExtensions={start:0,end:p.lineHintFadedExtensions};break;case m.REFERENCE_EXTENSION:c.width=p.lineHintWidthReference,c.fadedExtensions={start:0,end:0};break;case m.REFERENCE:c.width=p.lineHintWidthReference,c.fadedExtensions={start:l?p.lineHintFadedExtensions:0,end:s?p.lineHintFadedExtensions:0}}return c.attached=!0,c}}export{g as SnappingVisualizer3D};\n"],
  "mappings": "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",
  "names": ["v", "n", "t", "u", "r", "e", "l", "s", "i", "V", "A", "o", "a", "c", "r", "i", "o", "a", "t", "e", "s", "c", "l", "v", "g", "j", "n"]
}
